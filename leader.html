<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elite AI - Leaderboard & Community</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* All existing CSS remains unchanged */
        /* ========================================================================
           GLOBAL STYLES & UTILITIES
           ========================================================================
        */
        :root {
            --bg-dark: #000000;
            --bg-darker: #050505;
            --bg-lighter: #1A1A1A;
            --bg-card: rgba(26, 26, 26, 0.6);
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #666666;
            --border-subtle: rgba(255, 255, 255, 0.1);
            --accent-color: #00FFFF;
            --accent-pink: #F72585;
            --accent-orange: #FF6B35;
            --primary-gradient: linear-gradient(135deg, var(--accent-color) 0%, #0099CC 100%);
            --secondary-gradient: linear-gradient(135deg, var(--accent-orange) 0%, #F7931E 100%);
            --accent-gradient: linear-gradient(135deg, var(--accent-pink) 0%, #C77DFF 100%);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none !important;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .gradient-text {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hidden {
            display: none;
        }
        
        /* Scroll animations */
        .scroll-section {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scroll-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .scroll-section.past {
            opacity: 0.3;
            transform: translateY(-50px) scale(0.95);
        }
        
        /* ========== LOADING SCREEN ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            transition: opacity 0.5s ease-out;
        }
        
        .loading-container {
            text-align: center;
            position: relative;
            width: 100%;
            max-width: 500px;
        }
        
        .loading-animation {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .loading-icon {
            font-size: 3rem;
            color: var(--accent-color);
            animation: pulse-grow 1.5s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        
        .loading-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: var(--accent-color);
            transform: rotate(0deg);
            animation: spin 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        }
        
        .loading-circle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: var(--accent-color);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px var(--accent-color);
        }
        
        .loading-circle-alt {
            position: absolute;
            width: 80%;
            height: 80%;
            border-radius: 50%;
            border: 3px solid transparent;
            border-bottom-color: var(--accent-pink);
            transform: rotate(0deg) scale(0.8);
            animation: spin-reverse 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        }
        
        .loading-text h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .loading-text p {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 2rem;
            font-size: 1.2rem;
            font-family: 'Montserrat', sans-serif;
        }
        
        .loading-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .loading-bar {
            width: 8px;
            height: 30px;
            background: var(--primary-gradient);
            border-radius: 4px;
            animation: loadingPulse 1.4s ease-in-out infinite;
        }
        
        .loading-bar:nth-child(2) {
            animation-delay: 0.2s;
            background: var(--secondary-gradient);
        }
        
        .loading-bar:nth-child(3) {
            animation-delay: 0.4s;
            background: var(--accent-gradient);
        }
        
        .loading-bar:nth-child(4) {
            animation-delay: 0.6s;
            background: var(--primary-gradient);
        }
        
        .loading-bar:nth-child(5) {
            animation-delay: 0.8s;
            background: var(--secondary-gradient);
        }
        
        /* ========== ENHANCED CURSOR ========== */
        .custom-cursor {
            position: fixed;
            width: 40px;
            height: 40px;
            z-index: 10005;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease;
        }
        
        .dumbbell-cursor {
            font-size: 40px;
            color: var(--accent-color);
            animation: rotate 3s linear infinite;
            filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.9));
        }
        
        /* ========== DYNAMIC BACKGROUND ========== */
        #particle-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
        }
        
        #ambient-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            background: radial-gradient(circle at var(--x) var(--y), rgba(0, 255, 255, 0.15) 0%, transparent 40%);
            transition: background 0.1s ease-out;
        }
        
        /* ========== ENHANCED SMASH EFFECT ========== */
        .smash-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10000;
        }
        
        .smash-particle {
            position: absolute;
            font-size: 16px;
            pointer-events: none;
            animation: smash 0.8s ease-out forwards;
            filter: drop-shadow(0 0 6px rgba(0, 255, 255, 0.7));
        }
        
        /* Breaking glass effect - more dramatic */
        .glass-break {
            position: absolute;
            pointer-events: none;
            animation: glassBreak 0.8s ease-out forwards;
        }
        
        .glass-shard {
            position: absolute;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.8), rgba(0, 255, 255, 0.5));
            pointer-events: none;
            animation: shardFly 1s ease-out forwards;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.7);
        }
        
        /* Screen crack effect */
        .screen-crack {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            background-image: url('https://i.imgur.com/2s7R4Jc.png');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            transition: opacity 0.1s ease-out;
            transform-origin: var(--crack-x) var(--crack-y);
        }
        
        .screen-crack.active {
            opacity: 0.3;
            animation: crack-animation 0.2s ease-out;
        }
        
        /* ========================================================================
           HEADER
           ========================================================================
        */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-subtle);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .header.scrolled {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(30px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 80px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text-primary);
            cursor: none;
            transition: all 0.3s ease;
            text-decoration: none;
            letter-spacing: 1px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .logo:hover {
            transform: scale(1.05);
        }
        
        .logo-icon {
            width: 2.5rem;
            height: 2.5rem;
            color: var(--accent-color);
            animation: pulse 2s infinite;
        }
        
        /* Profile Dropdown */
        .profile-dropdown {
            position: relative;
        }
        
        .profile-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary-gradient);
            border: none;
            border-radius: 50px;
            color: var(--bg-dark);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: none;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }
        
        .profile-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 255, 255, 0.4);
        }
        
        .profile-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            overflow: hidden;
            min-width: 200px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1000;
        }
        
        .dropdown-menu.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s ease;
            font-family: 'Montserrat', sans-serif;
        }
        
        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }
        
        .dropdown-item i {
            width: 16px;
            text-align: center;
        }
        
        .dropdown-divider {
            height: 1px;
            background: var(--border-subtle);
            margin: 0.5rem 0;
        }
        
        /* ========================================================================
           MAIN CONTENT
           ========================================================================
        */
        main {
            padding-top: 80px;
            min-height: 100vh;
        }
        
        .hero {
            padding: 60px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg,
                rgba(0, 212, 255, 0.15) 0%,
                rgba(0, 0, 0, 0.7) 50%,
                rgba(247, 37, 133, 0.15) 100%
            );
            z-index: -1;
        }
        
        .hero h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 900;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: -0.01em;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1.2s ease-out forwards;
        }
        
        .hero p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1.2s ease-out 0.3s forwards;
        }
        
        /* ========================================================================
           LEADERBOARD SECTIONS
           ========================================================================
        */
        .leaderboard-section {
            padding: 40px 0;
            position: relative;
            overflow: hidden;
            transition: transform 0.8s ease, opacity 0.8s ease;
        }
        
        .leaderboard-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(247, 37, 133, 0.05) 0%, transparent 50%);
            z-index: -1;
        }
        
        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-color);
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease-out forwards;
            position: relative;
            display: inline-block;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--primary-gradient);
            animation: borderExpand 1s ease forwards;
            animation-delay: 0.5s;
        }
        
        /* ========================================================================
           TOP ATHLETE PROGRESSION
           ========================================================================
        */
        .athlete-progression {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(40px);
            animation: fadeInUp 1s ease-out forwards;
        }
        
        .progression-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .progression-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progression-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-dark);
            font-size: 1.2rem;
        }
        
        .time-filter {
            display: flex;
            gap: 10px;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: none;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }
        
        .filter-btn.active {
            background: var(--primary-gradient);
            color: var(--bg-dark);
            border-color: var(--accent-color);
        }
        
        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }
        
        .athlete-leaderboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .athlete-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .athlete-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                rgba(0, 255, 255, 0.1) 0%,
                transparent 70%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1;
        }
        
        .athlete-card:hover::before {
            opacity: 1;
        }
        
        .athlete-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--accent-color);
        }
        
        .athlete-rank {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-dark);
            font-weight: 700;
            font-size: 1rem;
            z-index: 2;
        }
        
        .athlete-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .athlete-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
            font-size: 1.5rem;
        }
        
        .athlete-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .athlete-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--accent-color);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }
        
        .athlete-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .athlete-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .athlete-badge.earned {
            background: var(--primary-gradient);
            border-color: var(--accent-color);
            color: var(--bg-dark);
            animation: pulse 2s infinite;
        }
        
        .progression-chart {
            height: 200px;
            margin-top: 20px;
        }
        
        .progression-story {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 3px solid var(--accent-color);
        }
        
        .story-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .story-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        /* ========================================================================
           RANKING VISIBILITY SECTION
           ========================================================================
        */
        .ranking-visibility {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 30px;
            opacity: 0;
            transform: translateY(40px);
            animation: fadeInUp 1s ease-out 0.4s forwards;
        }
        
        .visibility-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .visibility-option {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .visibility-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
                rgba(0, 255, 255, 0.1) 0%,
                transparent 70%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1;
        }
        
        .visibility-option:hover::before {
            opacity: 1;
        }
        
        .visibility-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--accent-color);
        }
        
        .visibility-option.selected {
            border-color: var(--accent-color);
            background: rgba(0, 255, 255, 0.05);
        }
        
        .visibility-option.selected::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 30px;
            height: 30px;
            background: var(--primary-gradient);
            border-bottom-left-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-dark);
        }
        
        .visibility-option.selected::before {
            content: '\f00c';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 5px;
            right: 5px;
            color: var(--bg-dark);
            z-index: 2;
        }
        
        .option-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .option-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
            font-size: 1.5rem;
        }
        
        .visibility-option.selected .option-icon {
            background: var(--primary-gradient);
            border-color: var(--accent-color);
            color: var(--bg-dark);
        }
        
        .option-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .option-description {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .option-features {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }
        
        .feature-item i {
            color: var(--accent-color);
            flex-shrink: 0;
        }
        
        .user-rank-preview {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .preview-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .preview-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .preview-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }
        
        .preview-info {
            flex: 1;
        }
        
        .preview-name {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .preview-rank {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        
        .preview-badge {
            padding: 5px 10px;
            background: var(--primary-gradient);
            border-radius: 20px;
            color: var(--bg-dark);
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        /* User Stats Summary */
        .user-stats-summary {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(40px);
            animation: fadeInUp 1s ease-out 0.2s forwards;
        }
        
        .stats-summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .summary-stat-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .summary-stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        
        .summary-stat-card:hover::before {
            opacity: 1;
        }
        
        .summary-stat-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
            box-shadow: 0 15px 30px rgba(0, 212, 255, 0.3);
        }
        
        .summary-stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent-color);
            margin-bottom: 5px;
            font-family: 'Montserrat', sans-serif;
            position: relative;
            z-index: 1;
        }
        
        .summary-stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* ========================================================================
           NOTIFICATION
           ========================================================================
        */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(0, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid var(--accent-color);
            border-radius: 10px;
            padding: 15px 20px;
            color: var(--text-primary);
            font-family: 'Montserrat', sans-serif;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 300px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 4px 0 0 4px;
        }
        
        .notification-title {
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--accent-color);
        }
        
        .notification-message {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* ========================================================================
           ENHANCED ANIMATIONS
           ========================================================================
        */
        @keyframes crack-animation {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes spin-reverse {
            from { transform: rotate(0deg) scale(0.8); }
            to { transform: rotate(-360deg) scale(0.8); }
        }
        
        @keyframes pulse-grow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes dumbbell-lift {
            0%, 100% { transform: translateY(20px) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(-15deg); }
            50% { transform: translateY(20px) rotate(0deg); }
            75% { transform: translateY(-20px) rotate(15deg); }
        }
        
        @keyframes loadingPulse {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1); }
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes borderExpand {
            to { width: 100%; }
        }
        
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-15px); }
        }
        
        @keyframes smash {
            0% {
                transform: translate(0, 0) scale(1) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0) rotate(720deg);
                opacity: 0;
            }
        }
        
        @keyframes glassBreak {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }
        
        @keyframes shardFly {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) rotate(var(--rotation));
                opacity: 0;
            }
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Enhanced scroll animations */
        .scroll-section {
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center center;
        }
        
        .scroll-section.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        
        .scroll-section.past {
            opacity: 0.3;
            transform: translateY(-50px) scale(0.95);
        }
        
        /* Slide in animations */
        @keyframes slide-in-left {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slide-in-right {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Timeline appearance animation */
        @keyframes timeline-appear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Checkmark appearance animation */
        @keyframes checkmark-appear {
            0% {
                transform: scale(0) rotate(-45deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(0deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }
        
        /* Reward bounce animation */
        @keyframes reward-bounce {
            0%, 100% {
                transform: translateY(0);
            }
            25% {
                transform: translateY(-15px);
            }
            50% {
                transform: translateY(0);
            }
            75% {
                transform: translateY(-7px);
            }
        }
        
        /* Enhanced floating animation */
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-10px) rotate(1deg);
            }
            50% {
                transform: translateY(0) rotate(0deg);
            }
            75% {
                transform: translateY(-5px) rotate(-1deg);
            }
        }
        
        /* Glow effect for animated elements */
        .athlete-card.animated, .visibility-option.animated {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            transition: box-shadow 0.5s ease;
        }
        
        .athlete-card.animated:hover, .visibility-option.animated:hover {
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
        }
        
        /* Staggered animation for section titles */
        .section-title {
            position: relative;
            overflow: hidden;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-gradient);
            transform: translateX(-100%);
            transition: transform 1s ease;
        }
        
        .scroll-section.visible .section-title::after {
            transform: translateX(0);
        }
        
        /* Enhanced parallax for background elements */
        .parallax-bg {
            will-change: transform;
            transition: transform 0.1s ease-out;
        }
        
        /* Particle animation on scroll */
        .particle {
            will-change: transform, opacity;
        }
        
        /* Enhanced hover effects */
        .athlete-card:hover, .visibility-option:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.4);
        }
        
        /* Animated gradient background on hover */
        .athlete-card:hover, .visibility-option:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.7) 100%);
            border-color: var(--accent-color);
        }
        
        /* Pulse animation for selected items */
        @keyframes pulse-selected {
            0%, 100% {
                box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 25px rgba(0, 255, 255, 0.8);
            }
        }
        
        .visibility-option.selected {
            animation: pulse-selected 2s infinite;
        }
        
        /* Chart animation */
        .progression-chart canvas {
            animation: chart-appear 1.5s ease-out forwards;
        }
        
        @keyframes chart-appear {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Parallax scrolling effect */
        .parallax-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(247, 37, 133, 0.05) 0%, transparent 50%);
            will-change: transform;
        }
        
        /* Enhanced Particle Background */
        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
            animation: float-particle 15s infinite linear;
        }
        
        @keyframes float-particle {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            90% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-100vh) scale(1.5);
                opacity: 0;
            }
        }
        
        /* Floating animation for elements */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .floating {
            animation: float 4s ease-in-out infinite;
        }
        
        /* ========================================================================
           RESPONSIVE DESIGN
           ========================================================================
        */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
            }
            
            .hero h1 {
                font-size: clamp(2rem, 5vw, 3rem);
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .athlete-leaderboard, .visibility-options {
                grid-template-columns: 1fr;
            }
            
            .notification {
                right: 10px;
                max-width: 250px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
            }
            
            .hero {
                padding: 40px 0;
            }
            
            .athlete-card, .visibility-option {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Parallax Background -->
    <div class="parallax-bg"></div>
    
    <!-- Dynamic Particle Background -->
    <div class="particle-bg" id="particleBg"></div>
    
    <!-- Ambient Glow Effect -->
    <div id="ambient-glow"></div>
    
    <!-- Custom Cursor -->
    <div class="custom-cursor">
        <i class="fas fa-dumbbell dumbbell-cursor"></i>
    </div>
    
    <!-- Enhanced Smash Effect Container -->
    <div class="smash-container"></div>
    
    <!-- Screen Crack Effect -->
    <div class="screen-crack"></div>
    
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-container">
            <div class="loading-animation">
                <div class="loading-circle"></div>
                <div class="loading-circle-alt"></div>
                <i class="fas fa-dumbbell loading-icon"></i>
            </div>
            <div class="loading-text">
                <h2>ELITE PERFORMANCE</h2>
                <p>"Champions are made when nobody's watching"</p>
            </div>
            <div class="loading-progress">
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
            </div>
        </div>
    </div>
    
    <!-- Audio element for sound effects -->
    <audio id="smashSound" preload="auto">
        <source src="click.mp3.wav" type="audio/wav">
    </audio>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-title" id="notificationTitle">Notification</div>
        <div class="notification-message" id="notificationMessage">Message</div>
    </div>
    
    <header>
        <div class="header-content">
            <a href="plan.html" class="logo">
                <i class="fas fa-dumbbell logo-icon"></i>
                <span>ELITE</span>
            </a>
            <!-- Profile Dropdown -->
            <div class="profile-dropdown">
                <button class="profile-btn" id="profileBtn">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span id="userName">Athlete</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="dropdown-divider"></div>
                    <a href="index.html" class="dropdown-item" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </header>
    
    <main>
        <section class="hero">
            <div class="container">
                <h1>Leaderboard</h1>
                <p>Foster a competitive and supportive environment where athletes can track progress and celebrate achievements</p>
            </div>
        </section>
        
        <!-- User Stats Summary Section -->
        <section class="leaderboard-section scroll-section" id="userStatsSection">
            <div class="container">
                <h2 class="section-title">Your Progress</h2>
                <div class="user-stats-summary">
                    <div class="stats-summary-grid">
                        <div class="summary-stat-card">
                            <div class="summary-stat-value" id="userLevel">1</div>
                            <div class="summary-stat-label">Level</div>
                        </div>
                        <div class="summary-stat-card">
                            <div class="summary-stat-value" id="userXP">0</div>
                            <div class="summary-stat-label">Total XP</div>
                        </div>
                        <div class="summary-stat-card">
                            <div class="summary-stat-value" id="userBadges">0</div>
                            <div class="summary-stat-label">Badges Earned</div>
                        </div>
                        <div class="summary-stat-card">
                            <div class="summary-stat-value" id="userRank">--</div>
                            <div class="summary-stat-label">Your Rank</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Top Athlete Progression Section -->
        <section class="leaderboard-section scroll-section" id="athleteSection">
            <div class="container">
                <h2 class="section-title">Top Athlete Progression</h2>
                <div class="athlete-progression">
                    <div class="progression-header">
                        <div class="progression-title">
                            <div class="progression-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <span>Athlete Progression Rankings</span>
                        </div>
                        <div class="time-filter">
                            <button class="filter-btn active" data-period="week">This Week</button>
                            <button class="filter-btn" data-period="month">This Month</button>
                            <button class="filter-btn" data-period="year">All Time</button>
                        </div>
                    </div>
                    
                    <div class="athlete-leaderboard">
                        <div class="athlete-card">
                            <div class="athlete-rank">1</div>
                            <div class="athlete-info">
                                <div class="athlete-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="athlete-name">--</div>
                            </div>
                            <div class="athlete-stats">
                                <div class="stat-item">
                                    <div class="stat-value">--</div>
                                    <div class="stat-label">Level</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">--</div>
                                    <div class="stat-label">XP</div>
                                </div>
                            </div>
                            <div class="athlete-badges">
                                <div class="athlete-badge" data-badge="speed">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="athlete-badge" data-badge="endurance">
                                    <i class="fas fa-crown"></i>
                                </div>
                                <div class="athlete-badge" data-badge="recovery">
                                    <i class="fas fa-heart"></i>
                                </div>
                            </div>
                            <div class="progression-chart">
                                <canvas id="athleteChart1"></canvas>
                            </div>
                            <div class="progression-story">
                                <div class="story-title">Progress Story</div>
                                <div class="story-text">--</div>
                            </div>
                        </div>
                        
                        <div class="athlete-card">
                            <div class="athlete-rank">2</div>
                            <div class="athlete-info">
                                <div class="athlete-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="athlete-name">--</div>
                            </div>
                            <div class="athlete-stats">
                                <div class="stat-item">
                                    <div class="stat-value">--</div>
                                    <div class="stat-label">Level</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">--</div>
                                    <div class="stat-label">XP</div>
                                </div>
                            </div>
                            <div class="athlete-badges">
                                <div class="athlete-badge" data-badge="speed">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="athlete-badge" data-badge="endurance">
                                    <i class="fas fa-crown"></i>
                                </div>
                                <div class="athlete-badge" data-badge="recovery">
                                    <i class="fas fa-heart"></i>
                                </div>
                            </div>
                            <div class="progression-chart">
                                <canvas id="athleteChart2"></canvas>
                            </div>
                            <div class="progression-story">
                                <div class="story-title">Progress Story</div>
                                <div class="story-text">--</div>
                            </div>
                        </div>
                        
                        <div class="athlete-card">
                            <div class="athlete-rank">3</div>
                            <div class="athlete-info">
                                <div class="athlete-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="athlete-name">--</div>
                            </div>
                            <div class="athlete-stats">
                                <div class="stat-item">
                                    <div class="stat-value">--</div>
                                    <div class="stat-label">Level</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">--</div>
                                    <div class="stat-label">XP</div>
                                </div>
                            </div>
                            <div class="athlete-badges">
                                <div class="athlete-badge" data-badge="speed">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="athlete-badge" data-badge="endurance">
                                    <i class="fas fa-crown"></i>
                                </div>
                                <div class="athlete-badge" data-badge="recovery">
                                    <i class="fas fa-heart"></i>
                                </div>
                            </div>
                            <div class="progression-chart">
                                <canvas id="athleteChart3"></canvas>
                            </div>
                            <div class="progression-story">
                                <div class="story-title">Progress Story</div>
                                <div class="story-text">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Public or Private User Rankings Section -->
        <section class="leaderboard-section scroll-section" id="rankingSection">
            <div class="container">
                <h2 class="section-title">Public or Private User Rankings</h2>
                <div class="ranking-visibility">
                    <p style="color: var(--text-secondary); margin-bottom: 20px; text-align: center;">
                        Choose how your rankings are displayed to balance community motivation with personal privacy
                    </p>
                    
                    <div class="visibility-options">
                        <div class="visibility-option" id="publicOption">
                            <div class="option-header">
                                <div class="option-icon">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <div class="option-title">Public Rankings</div>
                            </div>
                            <div class="option-description">
                                Your achievements and rankings are visible to the entire community, fostering healthy competition and motivation.
                            </div>
                            <div class="option-features">
                                <div class="feature-item">
                                    <i class="fas fa-check"></i>
                                    <span>Community recognition</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-check"></i>
                                    <span>Competitive motivation</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-check"></i>
                                    <span>Social engagement</span>
                                </div>
                            </div>
                            <div class="user-rank-preview">
                                <div class="preview-title">Your Public Profile Preview</div>
                                <div class="preview-content">
                                    <div class="preview-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="preview-info">
                                        <div class="preview-name">--</div>
                                        <div class="preview-rank">Rank: #--  Level --</div>
                                    </div>
                                    <div class="preview-badge">Top --%</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="visibility-option selected" id="privateOption">
                            <div class="option-header">
                                <div class="option-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <div class="option-title">Private Rankings</div>
                            </div>
                            <div class="option-description">
                                Your progress and rankings are kept private, allowing you to focus on personal growth without public pressure.
                            </div>
                            <div class="option-features">
                                <div class="feature-item">
                                    <i class="fas fa-check"></i>
                                    <span>Personal focus</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-check"></i>
                                    <span>Reduced pressure</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-check"></i>
                                    <span>Privacy protection</span>
                                </div>
                            </div>
                            <div class="user-rank-preview">
                                <div class="preview-title">Your Private Dashboard</div>
                                <div class="preview-content">
                                    <div class="preview-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="preview-info">
                                        <div class="preview-name">--</div>
                                        <div class="preview-rank">Personal Progress Only</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Hide loading screen after page loads
            window.addEventListener('load', () => {
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                    }, 500);
                }, 3500);
            });
            
            // Get user name from localStorage
            const storedName = localStorage.getItem('userName');
            if (storedName) {
                document.getElementById('userName').textContent = storedName;
            }
            
            // Profile dropdown functionality
            const profileBtn = document.getElementById('profileBtn');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const logoutBtn = document.getElementById('logoutBtn');
            
            profileBtn.addEventListener('click', () => {
                dropdownMenu.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!profileBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
                    dropdownMenu.classList.remove('active');
                }
            });
            
            // Logout functionality
            logoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                // Clear user data from localStorage
                localStorage.removeItem('userName');
                // Redirect to index.html
                window.location.href = 'index.html';
            });
            
            // Create particle background
            const particleBg = document.getElementById('particleBg');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random size
                const size = Math.random() * 5 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                // Random position
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                
                // Random animation duration
                const duration = Math.random() * 15 + 10;
                particle.style.animationDuration = `${duration}s`;
                
                // Random animation delay
                const delay = Math.random() * 5;
                particle.style.animationDelay = `${delay}s`;
                
                particleBg.appendChild(particle);
            }
            
            // Ambient Glow Effect
            const glowElement = document.getElementById('ambient-glow');
            const handleMouseMove = (e) => {
                glowElement.style.setProperty('--x', `${e.clientX}px`);
                glowElement.style.setProperty('--y', `${e.clientY}px`);
            };
            window.addEventListener('mousemove', handleMouseMove);
            
            // Enhanced cursor and smash effect
            const cursor = document.querySelector('.custom-cursor');
            const smashContainer = document.querySelector('.smash-container');
            const smashSound = document.getElementById('smashSound');
            const screenCrack = document.querySelector('.screen-crack');
            
            // Mouse tracking for cursor
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = `${e.clientX}px`;
                cursor.style.top = `${e.clientY}px`;
                
                // Handle mouse tracking for glow effects
                const cards = document.querySelectorAll('.athlete-card, .visibility-option');
                cards.forEach(card => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    card.style.setProperty('--mouse-x', `${(x / rect.width) * 100}%`);
                    card.style.setProperty('--mouse-y', `${(y / rect.height) * 100}%`);
                });
            });
            
            // Enhanced click effect
            document.addEventListener('click', (e) => {
                // Play smash sound
                smashSound.currentTime = 0;
                smashSound.play().catch(error => console.log("Audio play failed:", error));
                
                // Create screen crack effect
                screenCrack.style.setProperty('--crack-x', `${e.clientX}px`);
                screenCrack.style.setProperty('--crack-y', `${e.clientY}px`);
                screenCrack.classList.add('active');
                
                setTimeout(() => {
                    screenCrack.classList.remove('active');
                }, 200);
                
                // Create glass breaking effect
                const glassBreak = document.createElement('div');
                glassBreak.className = 'glass-break';
                glassBreak.style.left = `${e.clientX - 75}px`;
                glassBreak.style.top = `${e.clientY - 75}px`;
                glassBreak.style.width = '150px';
                glassBreak.style.height = '150px';
                glassBreak.style.borderRadius = '50%';
                glassBreak.style.background = 'radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(0,255,255,0.5) 50%, transparent 70%)';
                smashContainer.appendChild(glassBreak);
                
                // Create glass shards
                for (let i = 0; i < 25; i++) {
                    const shard = document.createElement('div');
                    shard.className = 'glass-shard';
                    shard.style.left = `${e.clientX}px`;
                    shard.style.top = `${e.clientY}px`;
                    shard.style.width = `${Math.random() * 15 + 5}px`;
                    shard.style.height = `${Math.random() * 20 + 8}px`;
                    shard.style.setProperty('--tx', `${(Math.random() - 0.5) * 150}px`);
                    shard.style.setProperty('--ty', `${(Math.random() - 0.5) * 150}px`);
                    shard.style.setProperty('--rotation', `${(Math.random() - 0.5) * 360}deg`);
                    shard.style.animationDuration = `${Math.random() * 0.8 + 0.8}s`;
                    smashContainer.appendChild(shard);
                    
                    setTimeout(() => {
                        shard.remove();
                    }, 1500);
                }
                
                // Create sport particles
                const sportIcons = [
                    'fas fa-dumbbell', 'fas fa-running', 'fas fa-bicycle', 'fas fa-swimmer',
                    'fas fa-fist-raised', 'fas fa-basketball-ball', 'fas fa-football-ball',
                    'fas fa-table-tennis', 'fas fa-volleyball-ball', 'fas fa-baseball-ball'
                ];
                
                for (let i = 0; i < 25; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'smash-particle';
                    particle.style.left = `${e.clientX}px`;
                    particle.style.top = `${e.clientY}px`;
                    particle.style.setProperty('--tx', `${(Math.random() - 0.5) * 150}px`);
                    particle.style.setProperty('--ty', `${(Math.random() - 0.5) * 150}px`);
                    particle.style.animationDuration = `${Math.random() * 0.8 + 0.8}s`;
                    particle.innerHTML = `<i class="${sportIcons[Math.floor(Math.random() * sportIcons.length)]}"></i>`;
                    smashContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 1500);
                }
                
                // Clean up glass break effect
                setTimeout(() => {
                    glassBreak.remove();
                }, 1000);
            });
            
            // Gamification state
            let gameState = {
                level: 1,
                xp: 0,
                xpToNextLevel: 100,
                totalXP: 0,
                badges: {
                    speed: { progress: 0, required: 5, earned: false },
                    endurance: { progress: 0, required: 10, earned: false },
                    recovery: { progress: 0, required: 15, earned: false }
                },
                completedChallenges: {}
            };
            
            // Load gamification data from localStorage
            function loadGamificationData() {
                const savedGamificationData = localStorage.getItem('gamificationData');
                if (savedGamificationData) {
                    try {
                        const gamificationData = JSON.parse(savedGamificationData);
                        gameState.level = gamificationData.level || 1;
                        gameState.xp = gamificationData.xp || 0;
                        gameState.totalXP = gamificationData.totalXP || 0;
                        gameState.badges = gamificationData.badges || gameState.badges;
                        gameState.completedChallenges = gamificationData.completedChallenges || {};
                        
                        // Update UI with loaded data
                        updateUserStats();
                        updateLeaderboard();
                    } catch (e) {
                        console.error('Failed to parse gamification data from localStorage', e);
                    }
                }
            }
            
            // Update user stats in the UI
            function updateUserStats() {
                document.getElementById('userLevel').textContent = gameState.level;
                document.getElementById('userXP').textContent = gameState.totalXP.toLocaleString();
                
                // Count earned badges
                const earnedBadges = Object.values(gameState.badges).filter(badge => badge.earned).length;
                document.getElementById('userBadges').textContent = earnedBadges;
                
                // Update user badges in profile preview
                updateProfileBadges();
            }
            
            // Update profile badges
            function updateProfileBadges() {
                // Update public profile preview
                const publicPreview = document.querySelector('#publicOption .preview-name');
                const publicRank = document.querySelector('#publicOption .preview-rank');
                const publicBadge = document.querySelector('#publicOption .preview-badge');
                
                if (publicPreview) {
                    publicPreview.textContent = localStorage.getItem('userName') || 'Athlete';
                    publicRank.textContent = `Rank: #--  Level ${gameState.level}`;
                    
                    // Calculate percentage based on level (simplified)
                    const percentage = Math.min(100, Math.floor((gameState.level / 25) * 100));
                    publicBadge.textContent = `Top ${100 - percentage}%`;
                }
                
                // Update private profile preview
                const privatePreview = document.querySelector('#privateOption .preview-name');
                const privateRank = document.querySelector('#privateOption .preview-rank');
                
                if (privatePreview) {
                    privatePreview.textContent = localStorage.getItem('userName') || 'Athlete';
                    privateRank.textContent = `Level ${gameState.level}  ${gameState.totalXP} XP`;
                }
            }
            
            // Data for different time periods
            const athleteData = {
                week: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [
                        { 
                            data: [0, 0, 0, 0, 0, 0, 0], 
                            story: "This athlete showed consistent improvement throughout the week, with a significant spike in performance on Friday.",
                            name: "Elite Athlete",
                            level: 15,
                            xp: 2450,
                            badges: ['speed', 'endurance', 'recovery']
                        },
                        { 
                            data: [0, 0, 0, 0, 0, 0, 0], 
                            story: "Steady progress with a focus on endurance training. Notable improvement in weekend sessions.",
                            name: "Dedicated Performer",
                            level: 12,
                            xp: 1890,
                            badges: ['endurance', 'recovery']
                        },
                        { 
                            data: [0, 0, 0, 0, 0, 0, 0], 
                            story: "Impressive speed gains mid-week. Recovery focus on weekends shows smart training approach.",
                            name: "Speed Specialist",
                            level: 10,
                            xp: 1520,
                            badges: ['speed']
                        }
                    ]
                },
                month: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [
                        { 
                            data: [0, 0, 0, 0], 
                            story: "Consistent monthly progression with a breakthrough in Week 3. Well-balanced training approach.",
                            name: "Elite Athlete",
                            level: 15,
                            xp: 2450,
                            badges: ['speed', 'endurance', 'recovery']
                        },
                        { 
                            data: [0, 0, 0, 0], 
                            story: "Steady improvement throughout the month with a focus on building endurance base.",
                            name: "Dedicated Performer",
                            level: 12,
                            xp: 1890,
                            badges: ['endurance', 'recovery']
                        },
                        { 
                            data: [0, 0, 0, 0], 
                            story: "Notable speed development in Week 2. Consistent performance in subsequent weeks.",
                            name: "Speed Specialist",
                            level: 10,
                            xp: 1520,
                            badges: ['speed']
                        }
                    ]
                },
                year: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        { 
                            data: [0, 0, 0, 0, 0, 0], 
                            story: "Year-long dedication showing remarkable progression. A true example of consistent elite performance.",
                            name: "Elite Athlete",
                            level: 15,
                            xp: 2450,
                            badges: ['speed', 'endurance', 'recovery']
                        },
                        { 
                            data: [0, 0, 0, 0, 0, 0], 
                            story: "Impressive year-long journey with significant endurance gains. A model of persistence.",
                            name: "Dedicated Performer",
                            level: 12,
                            xp: 1890,
                            badges: ['endurance', 'recovery']
                        },
                        { 
                            data: [0, 0, 0, 0, 0, 0], 
                            story: "Remarkable speed development throughout the year. Consistent improvement in all metrics.",
                            name: "Speed Specialist",
                            level: 10,
                            xp: 1520,
                            badges: ['speed']
                        }
                    ]
                }
            };
            
            // Initialize Charts
            const athleteChart1 = new Chart(document.getElementById('athleteChart1'), {
                type: 'line',
                data: {
                    labels: athleteData.week.labels,
                    datasets: [{
                        label: 'Performance Score',
                        data: athleteData.week.datasets[0].data,
                        borderColor: '#00FFFF',
                        backgroundColor: 'rgba(0, 255, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 0,
                            max: 10,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#B0B0B0'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#B0B0B0'
                            }
                        }
                    }
                }
            });
            
            const athleteChart2 = new Chart(document.getElementById('athleteChart2'), {
                type: 'line',
                data: {
                    labels: athleteData.week.labels,
                    datasets: [{
                        label: 'Performance Score',
                        data: athleteData.week.datasets[1].data,
                        borderColor: '#00FFFF',
                        backgroundColor: 'rgba(0, 255, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 0,
                            max: 10,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#B0B0B0'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#B0B0B0'
                            }
                        }
                    }
                }
            });
            
            const athleteChart3 = new Chart(document.getElementById('athleteChart3'), {
                type: 'line',
                data: {
                    labels: athleteData.week.labels,
                    datasets: [{
                        label: 'Performance Score',
                        data: athleteData.week.datasets[2].data,
                        borderColor: '#00FFFF',
                        backgroundColor: 'rgba(0, 255, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 0,
                            max: 10,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#B0B0B0'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#B0B0B0'
                            }
                        }
                    }
                }
            });
            
            // Athlete filter buttons functionality
            const athleteFilterBtns = document.querySelectorAll('.athlete-progression .filter-btn');
            athleteFilterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons
                    athleteFilterBtns.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    btn.classList.add('active');
                    
                    // Get the selected period
                    const period = btn.getAttribute('data-period');
                    
                    // Update charts and data
                    updateAthleteData(period);
                    
                    // Show notification
                    showNotification('Filter Applied', `Showing ${btn.textContent} data`);
                });
            });
            
            // Function to update athlete data based on period
            function updateAthleteData(period) {
                const data = athleteData[period];
                const charts = [athleteChart1, athleteChart2, athleteChart3];
                const athleteCards = document.querySelectorAll('.athlete-card');
                
                // Update title
                const title = document.querySelector('#athleteSection .section-title');
                if (period === 'week') {
                    title.textContent = 'Top Athlete Progression This Week';
                } else if (period === 'month') {
                    title.textContent = 'Top Athlete Progression This Month';
                } else if (period === 'year') {
                    title.textContent = 'Top Athlete Progression All Time';
                }
                
                // Update each chart and card
                charts.forEach((chart, index) => {
                    // Update chart data
                    chart.data.labels = data.labels;
                    chart.data.datasets[0].data = data.datasets[index].data;
                    chart.update();
                    
                    // Update athlete card
                    const card = athleteCards[index];
                    const nameElement = card.querySelector('.athlete-name');
                    const levelElement = card.querySelectorAll('.stat-value')[0];
                    const xpElement = card.querySelectorAll('.stat-value')[1];
                    const storyElement = card.querySelector('.story-text');
                    
                    nameElement.textContent = data.datasets[index].name;
                    levelElement.textContent = data.datasets[index].level;
                    xpElement.textContent = data.datasets[index].xp.toLocaleString();
                    storyElement.textContent = data.datasets[index].story;
                    
                    // Update badges
                    const badgeElements = card.querySelectorAll('.athlete-badge');
                    badgeElements.forEach(badge => {
                        const badgeType = badge.getAttribute('data-badge');
                        if (data.datasets[index].badges.includes(badgeType)) {
                            badge.classList.add('earned');
                        } else {
                            badge.classList.remove('earned');
                        }
                    });
                });
            }
            
            // Update leaderboard with current user data
            function updateLeaderboard() {
                // For now, we'll just update the user rank display
                // In a real application, this would calculate the user's rank among all users
                const userRank = Math.max(1, Math.floor(Math.random() * 100)); // Simulated rank
                document.getElementById('userRank').textContent = `#${userRank}`;
                
                // Update profile previews
                updateProfileBadges();
            }
            
            // Visibility options functionality
            const publicOption = document.getElementById('publicOption');
            const privateOption = document.getElementById('privateOption');
            
            publicOption.addEventListener('click', () => {
                publicOption.classList.add('selected');
                privateOption.classList.remove('selected');
                showNotification('Preference Updated', 'Your rankings are now public');
            });
            
            privateOption.addEventListener('click', () => {
                privateOption.classList.add('selected');
                publicOption.classList.remove('selected');
                showNotification('Preference Updated', 'Your rankings are now private');
            });
            
            // Show notification function
            function showNotification(title, message) {
                const notification = document.getElementById('notification');
                const notificationTitle = document.getElementById('notificationTitle');
                const notificationMessage = document.getElementById('notificationMessage');
                
                notificationTitle.textContent = title;
                notificationMessage.textContent = message;
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // Enhanced scroll animations with more effects
            function handleScrollAnimations() {
                const sections = document.querySelectorAll('.scroll-section');
                const windowHeight = window.innerHeight;
                const scrollPosition = window.scrollY;
                
                sections.forEach((section, index) => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const sectionBottom = sectionTop + sectionHeight;
                    
                    // Calculate how far the section is from the center of the viewport
                    const distanceFromCenter = Math.abs((sectionTop + sectionHeight/2) - (scrollPosition + windowHeight/2));
                    const maxDistance = windowHeight/2 + sectionHeight/2;
                    const normalizedDistance = Math.min(1, distanceFromCenter / maxDistance);
                    
                    // Check if section is in viewport
                    if (scrollPosition + windowHeight > sectionTop + 100) {
                        section.classList.add('visible');
                        section.classList.remove('past');
                        
                        // Apply parallax effect to section content
                        const parallaxSpeed = 0.15;
                        const yPos = -(scrollPosition - sectionTop) * parallaxSpeed;
                        section.style.transform = `translateY(${yPos}px)`;
                        
                        // Add scale effect based on distance from center
                        const scale = 1 - (normalizedDistance * 0.05);
                        section.style.transform += ` scale(${scale})`;
                        
                        // Animate child elements with staggered effect
                        animateChildren(section, index);
                    } else if (scrollPosition + windowHeight < sectionTop) {
                        section.classList.remove('visible');
                        section.classList.add('past');
                    }
                });
            }
            
            // Function to animate child elements with staggered effect
            function animateChildren(section, sectionIndex) {
                // Get all animatable children
                const athleteCards = section.querySelectorAll('.athlete-card');
                const summaryStatCards = section.querySelectorAll('.summary-stat-card');
                const visibilityOptions = section.querySelectorAll('.visibility-option');
                
                // Animate summary stat cards
                summaryStatCards.forEach((card, index) => {
                    if (!card.classList.contains('animated')) {
                        card.style.transitionDelay = `${index * 0.1}s`;
                        card.classList.add('animated');
                        
                        // Add floating animation
                        setTimeout(() => {
                            card.classList.add('floating');
                            // Randomize animation duration for more natural effect
                            const duration = 3 + Math.random() * 2;
                            card.style.animationDuration = `${duration}s`;
                        }, 500);
                    }
                });
                
                // Animate athlete cards
                athleteCards.forEach((card, index) => {
                    if (!card.classList.contains('animated')) {
                        card.style.transitionDelay = `${index * 0.1}s`;
                        card.classList.add('animated');
                        
                        // Add floating animation
                        setTimeout(() => {
                            card.classList.add('floating');
                            // Randomize animation duration for more natural effect
                            const duration = 3 + Math.random() * 2;
                            card.style.animationDuration = `${duration}s`;
                        }, 500);
                    }
                });
                
                // Animate visibility options
                visibilityOptions.forEach((option, index) => {
                    if (!option.classList.contains('animated')) {
                        option.style.transitionDelay = `${index * 0.1}s`;
                        option.classList.add('animated');
                    }
                });
            }
            
            // Header scroll effect
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                const header = document.querySelector('header');
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
                
                // Parallax effect for background
                const parallaxBg = document.querySelector('.parallax-bg');
                const scrollPosition = window.pageYOffset;
                parallaxBg.style.transform = `translateY(${scrollPosition * 0.5}px)`;
                
                // Throttle scroll animations for better performance
                if (!scrollTimeout) {
                    scrollTimeout = setTimeout(() => {
                        handleScrollAnimations();
                        scrollTimeout = null;
                    }, 10);
                }
            });
            
            // Initialize scroll animations
            handleScrollAnimations();
            
            // Add resize handler to recalculate positions
            window.addEventListener('resize', () => {
                handleScrollAnimations();
            });
            
            // Create floating particles in background
            function createParticle() {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.width = '6px';
                particle.style.height = '6px';
                particle.style.background = 'rgba(0, 255, 255, 0.7)';
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '1';
                particle.style.left = Math.random() * window.innerWidth + 'px';
                particle.style.top = Math.random() * window.innerHeight + 'px';
                document.body.appendChild(particle);
                
                const duration = Math.random() * 15 + 10;
                const animation = particle.animate([
                    { transform: 'translate(0, 0)', opacity: 0.7 },
                    { transform: `translate(${Math.random() * 300 - 150}px, ${Math.random() * 300 - 150}px)`, opacity: 0 }
                ], {
                    duration: duration * 1000,
                    easing: 'ease-out'
                });
                
                animation.onfinish = () => {
                    particle.remove();
                };
            }
            
            // Create particles periodically
            const particleInterval = setInterval(createParticle, 200);
            
            // Clean up on page unload
            window.addEventListener('beforeunload', () => {
                clearInterval(particleInterval);
            });
            
            // Load gamification data on page load
            loadGamificationData();
            
            // Listen for storage events to update when gamification data changes
            window.addEventListener('storage', (e) => {
                if (e.key === 'gamificationData') {
                    loadGamificationData();
                }
            });
            
            // Initialize athlete data
            updateAthleteData('week');
        });
    </script>
</body>
</html>