<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal Stat Log - Ultimate Fitness Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        :root {
            --bg-dark: #000000;
            --bg-darker: #050505;
            --bg-lighter: #1A1A1A;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --text-muted: #666666;
            --border-subtle: rgba(0, 255, 255, 0.15);
            --accent-color: #00FFFF;
            --accent-pink: #F72585;
            --accent-orange: #FF6B35;
            --primary-gradient: linear-gradient(135deg, var(--accent-color) 0%, #0099CC 100%);
            --secondary-gradient: linear-gradient(135deg, var(--accent-orange) 0%, #F7931E 100%);
            --accent-gradient: linear-gradient(135deg, var(--accent-pink) 0%, #C77DFF 100%);
            --recovery-color: #28a745;
            --fatigue-color: #ffc107;
            --danger-color: #ff4d4d;
            --bear-color: #8B4513;
            --lion-color: #DAA520;
            --cheetah-color: #FFA500;
            --eagle-color: #4682B4;
            --wolf-color: #696969;
            --tiger-color: #FF8C00;
            --gorilla-color: #4B0082;
            --shark-color: #00CED1;
            --rest-color: #555555;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none !important;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* ========================================================================
           LOADING SCREEN - Copied from first code
           ========================================================================
        */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            transition: opacity 0.5s ease-out 3s, visibility 0.5s ease-out 3s;
        }
        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .loading-container {
            text-align: center;
            position: relative;
            width: 100%;
            max-width: 500px;
        }
        .loading-animation {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .loading-icon {
            font-size: 3rem;
            color: var(--accent-color);
            animation: pulse-grow 1.5s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        .loading-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: var(--accent-color);
            transform: rotate(0deg);
            animation: spin 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        }
        .loading-circle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: var(--accent-color);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px var(--accent-color);
        }
        .loading-circle-alt {
            position: absolute;
            width: 80%;
            height: 80%;
            border-radius: 50%;
            border: 3px solid transparent;
            border-bottom-color: var(--accent-pink);
            transform: rotate(0deg) scale(0.8);
            animation: spin-reverse 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        }
        .loading-text h2 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
            font-family: 'Montserrat', sans-serif;
        }
        .loading-text p {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 2rem;
            font-size: 1.2rem;
            font-family: 'Montserrat', sans-serif;
        }
        .loading-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .loading-bar {
            width: 8px;
            height: 30px;
            background: var(--primary-gradient);
            border-radius: 4px;
            animation: loadingPulse 1.4s ease-in-out infinite;
        }
        .loading-bar:nth-child(2) {
            animation-delay: 0.2s;
            background: var(--secondary-gradient);
        }
        .loading-bar:nth-child(3) {
            animation-delay: 0.4s;
            background: var(--accent-gradient);
        }
        .loading-bar:nth-child(4) {
            animation-delay: 0.6s;
            background: var(--primary-gradient);
        }
        .loading-bar:nth-child(5) {
            animation-delay: 0.8s;
            background: var(--secondary-gradient);
        }
        
        /* ========================================================================
           HEADER - Modified from first code
           ======================================================================== */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(12px);
            z-index: 1000;
            padding: 16px 24px;
            opacity: 0;
            transform: translateY(-100%);
            animation: slideDown 0.8s ease 3.5s forwards;
            transition: box-shadow 0.3s ease;
        }
        header.scrolled {
            box-shadow: 0 5px 20px rgba(0, 255, 255, 0.1);
        }
        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--text-primary);
            text-decoration: none;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            letter-spacing: 1px;
        }
        .logo-icon {
            width: 2rem;
            height: 2rem;
            color: var(--accent-color);
            animation: pulse 2s infinite;
        }
        .nav {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-grow: 1;
            justify-content: flex-end;
        }
        .profile-dropdown {
            position: relative;
            margin-left: 0.5rem;
        }
        .profile-btn {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 1rem;
            background: var(--primary-gradient);
            border: none;
            border-radius: 50px;
            color: var(--bg-dark);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: none;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            white-space: nowrap;
        }
        .profile-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 255, 255, 0.4);
        }
        .profile-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
            flex-shrink: 0;
        }
        .profile-avatar i {
            font-size: 0.85rem;
        }
        .profile-btn span {
            max-width: 80px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            overflow: hidden;
            min-width: 180px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1000;
        }
        .dropdown-menu.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s ease;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
        }
        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }
        .dropdown-item i {
            width: 16px;
            text-align: center;
            font-size: 0.9rem;
        }
        .dropdown-divider {
            height: 1px;
            background: var(--border-subtle);
            margin: 0.5rem 0;
        }
        
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: none;
            padding: 0.5rem;
            font-size: 1.5rem;
        }
        
        /* DYNAMIC BACKGROUND */
        #particle-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -10;
        }
        #ambient-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            background: radial-gradient(circle at var(--x) var(--y), rgba(0, 255, 255, 0.15) 0%, transparent 40%);
            transition: background 0.1s ease-out;
        }
        
        /* ENHANCED SMASH EFFECTS */
        .smash-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10000;
        }
        .smash-particle {
            position: absolute;
            font-size: 16px;
            pointer-events: none;
            animation: smash 0.8s ease-out forwards;
            filter: drop-shadow(0 0 6px rgba(0, 255, 255, 0.7));
        }
        .glass-break {
            position: absolute;
            pointer-events: none;
            animation: glassBreak 0.8s ease-out forwards;
        }
        .glass-shard {
            position: absolute;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.8), rgba(0, 255, 255, 0.5));
            pointer-events: none;
            animation: shardFly 1s ease-out forwards;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.7);
        }
        
        /* ENHANCED CUSTOM CURSOR */
        .custom-cursor {
            position: fixed;
            width: 40px;
            height: 40px;
            z-index: 10005;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease;
        }
        .dumbbell-cursor {
            font-size: 40px;
            color: var(--accent-color);
            animation: rotate 3s linear infinite;
            filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.9));
        }
        
        /* DASHBOARD */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        #dashboard {
            padding-top: 120px;
            padding-bottom: 60px;
        }
        .section-header {
            text-align: center;
            max-width: 1000px;
            margin: 0 auto 5rem;
        }
        .section-header h2 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 900;
            line-height: 1.2;
            margin-bottom: 1rem;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--text-primary), var(--accent-color), var(--text-primary));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-shift 3s ease infinite;
        }
        .section-header p {
            font-size: 1.125rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }
        @media (min-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        .dashboard-card {
            background: rgba(25, 25, 25, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 32px;
            transition: transform 0.4s ease, box-shadow 0.4s ease, border-color 0.4s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }
        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: -1;
        }
        .dashboard-card:hover::before {
            opacity: 1;
            animation: hover-glow 3s infinite alternate;
        }
        .dashboard-card:hover {
            transform: translateY(-10px) scale(1.02) var(--transform-tilt);
            box-shadow: 0 20px 50px rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.5);
        }
        .dashboard-card.full-width {
            grid-column: 1 / -1;
        }
        .dashboard-card h3 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.75rem;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .dashboard-card h3 i {
            color: var(--accent-color);
            animation: icon-float 3s ease-in-out infinite;
        }
        
        /* 3D MUSCLE MAP */
        .muscle-map-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            align-items: start;
            min-height: 500px;
        }
        .muscle-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid var(--border-subtle);
            transition: transform 0.3s ease;
        }
        .muscle-view:hover {
            transform: scale(1.02);
        }
        .muscle-view h4 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--accent-color);
            text-transform: uppercase;
        }
        .muscle-diagram {
            width: 100%;
            max-width: 200px;
            height: auto;
        }
        .muscle-group {
            fill: var(--border-subtle);
            stroke: var(--bg-dark);
            stroke-width: 1.5;
            transition: fill 0.3s ease, transform 0.2s ease, filter 0.3s ease;
            cursor: pointer;
        }
        .muscle-group:hover {
            fill: var(--text-secondary);
            transform: scale(1.02);
            filter: drop-shadow(0 0 8px rgba(0, 255, 255, 0.7));
        }
        .muscle-group.active {
            fill: var(--accent-color);
            stroke: var(--accent-color);
            filter: drop-shadow(0 0 12px rgba(0, 255, 255, 0.9));
            animation: muscle-pulse 1.5s infinite alternate;
        }
        .muscle-info {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border-subtle);
            min-height: 200px;
            animation: slide-up 0.6s ease-out;
        }
        .muscle-info h4 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--accent-color);
        }
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: dot-pulse 2s ease-in-out infinite;
        }
        
        /* ANIMAL TOTEM */
        .animal-totem-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 160px;
            padding: 20px 0;
        }
        .totem-active-animal {
            text-align: center;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            animation: float 4s ease-in-out infinite;
        }
        .animal-totem-container:hover .totem-active-animal {
            transform: scale(0.8);
        }
        .totem-active-animal .animal-icon {
            font-size: 4rem;
            filter: drop-shadow(0 0 20px var(--animal-color));
            margin-bottom: 0;
        }
        .totem-active-animal .animal-name {
            font-size: 1rem;
            color: var(--animal-color);
        }
        .totem-orbit-container {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }
        .totem-orbiter {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s;
            pointer-events: auto;
            cursor: pointer;
            transform: translate(-50%, -50%);
        }
        .animal-totem-container:hover .totem-orbiter {
            opacity: 1;
            transform: translate(-50%, -50%) rotate(calc(var(--angle) * 1deg)) translateY(-100px) rotate(calc(var(--angle) * -1deg));
        }
        .totem-orbiter .animal-icon {
            font-size: 2.5rem;
            transition: transform 0.3s ease;
        }
        .totem-orbiter:hover .animal-icon {
            transform: scale(1.2);
            filter: drop-shadow(0 0 15px var(--animal-color));
        }
        .animal-message {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 1px solid var(--border-subtle);
            animation: message-glow 3s ease-in-out infinite alternate;
        }
        
        /* ANIMAL AWAKENING OVERLAY */
        .awakening-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10002;
            pointer-events: none;
            animation: fadeInOut 2.5s ease-in-out forwards;
        }
        .awakening-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, var(--animal-color-transparent) 0%, transparent 70%);
        }
        .awakening-overlay .animal-icon {
            font-size: 20vw;
            animation: awaken-icon-zoom 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            filter: drop-shadow(0 0 50px var(--animal-color));
        }
        
        /* GOAL CELEBRATION */
        .goal-celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10003;
            overflow: hidden;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--accent-color);
            opacity: 0;
            animation: explode-confetti 1.2s ease-out forwards;
        }
        
        /* CALENDAR */
        .calendar-container {
            background: rgba(25, 25, 25, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 32px;
            margin-top: 40px;
            animation: slide-up 0.8s ease-out;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .calendar-container.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .calendar-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 255, 255, 0.1), transparent 70%);
            z-index: -1;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        .calendar-header h3 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.75rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .calendar-icon {
            font-size: 2rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: icon-pulse 2s infinite;
        }
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        .calendar-nav button {
            background: var(--bg-dark);
            border: 1px solid var(--border-subtle);
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .calendar-nav button:hover {
            background: var(--primary-gradient);
            color: var(--bg-dark);
            transform: scale(1.1) rotate(180deg);
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        .calendar-day-header {
            text-align: center;
            font-weight: 700;
            color: var(--text-secondary);
            padding: 10px 0;
            font-size: 0.9rem;
        }
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: var(--bg-dark);
            border: 1px solid var(--border-subtle);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            transform: scale(0.95);
            animation: calendar-day-appear 0.5s ease forwards;
        }
        .calendar-day:hover {
            transform: scale(1.1) rotate(5deg);
            border-color: var(--accent-color);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
            z-index: 1;
        }
        .calendar-day.has-activity {
            background: rgba(0, 255, 255, 0.1);
            border-color: rgba(0, 255, 255, 0.3);
            transform: scale(1.05);
        }
        .calendar-day.has-activity::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent-color);
            animation: pulse 2s infinite;
        }
        .calendar-day.other-month {
            color: var(--text-muted);
            opacity: 0.5;
        }
        .calendar-day.today {
            border: 2px solid var(--accent-color);
            font-weight: 700;
            animation: today-pulse 2s infinite;
            background: rgba(0, 255, 255, 0.05);
        }
        .calendar-day-number {
            font-size: 1rem;
            z-index: 1;
            font-weight: 600;
        }
        .calendar-day-indicator {
            font-size: 0.7rem;
            margin-top: 4px;
        }
        
        /* BMI CALCULATOR */
        .bmi-calculator {
            background: rgba(25, 25, 25, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 32px;
            margin-top: 40px;
            animation: slide-up 0.8s ease-out;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .bmi-calculator.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .bmi-calculator::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 255, 255, 0.1), transparent 70%);
            z-index: -1;
        }
        .bmi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        .bmi-header h3 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.75rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .bmi-icon {
            font-size: 2rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: icon-pulse 2s infinite;
        }
        .bmi-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .bmi-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .bmi-input-group label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 600;
        }
        .bmi-input-group input {
            background-color: var(--bg-dark);
            border: 1px solid var(--border-subtle);
            color: var(--text-primary);
            padding: 12px 15px;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        .bmi-input-group input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
            transform: scale(1.02);
        }
        .bmi-input-group input::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }
        .bmi-input-group input.error {
            border-color: var(--danger-color);
            box-shadow: 0 0 10px rgba(255, 77, 77, 0.5);
            animation: error-shake 0.5s ease;
        }
        .bmi-input-group .error-message {
            color: var(--danger-color);
            font-size: 0.8rem;
            margin-top: 4px;
            display: none;
        }
        .bmi-input-group .error-message.show {
            display: block;
            animation: fade-in 0.3s ease;
        }
        .bmi-calculate {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
        }
        .bmi-result {
            background: var(--bg-dark);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid var(--border-subtle);
            transition: all 0.3s ease;
        }
        .bmi-result:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 255, 255, 0.2);
        }
        .bmi-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .bmi-category {
            font-size: 1.2rem;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 30px;
            display: inline-block;
            margin-bottom: 15px;
        }
        .bmi-category.underweight {
            background: rgba(0, 123, 255, 0.2);
            color: #007bff;
        }
        .bmi-category.normal {
            background: rgba(40, 167, 69, 0.2);
            color: var(--recovery-color);
        }
        .bmi-category.overweight {
            background: rgba(255, 193, 7, 0.2);
            color: var(--fatigue-color);
        }
        .bmi-category.obese {
            background: rgba(255, 77, 77, 0.2);
            color: var(--danger-color);
        }
        .bmi-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .bmi-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-subtle);
        }
        .bmi-scale-item {
            text-align: center;
            flex: 1;
            position: relative;
        }
        .bmi-scale-item:not(:last-child)::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(50%);
            height: 70%;
            width: 1px;
            background: var(--border-subtle);
        }
        .bmi-scale-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 5px;
        }
        .bmi-scale-range {
            font-weight: 600;
        }
        .bmi-scale-range.underweight { color: #007bff; }
        .bmi-scale-range.normal { color: var(--recovery-color); }
        .bmi-scale-range.overweight { color: var(--fatigue-color); }
        .bmi-scale-range.obese { color: var(--danger-color); }
        
        /* DAY SUMMARY MODAL */
        .day-summary-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10004;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .day-summary-modal.active {
            opacity: 1;
            visibility: visible;
        }
        .day-summary-content {
            background: var(--bg-darker);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
        }
        .day-summary-modal.active .day-summary-content {
            transform: scale(1) translateY(0);
        }
        .day-summary-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .day-summary-header h3 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.75rem;
            color: var(--accent-color);
        }
        .day-summary-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .day-summary-close:hover {
            color: var(--danger-color);
            transform: rotate(90deg);
        }
        .day-summary-body {
            padding: 24px;
        }
        .day-summary-section {
            margin-bottom: 24px;
            animation: fade-in 0.6s ease-out;
        }
        .day-summary-section h4 {
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 1.25rem;
            margin-bottom: 16px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .day-summary-section h4 i {
            color: var(--accent-color);
            animation: icon-float 3s ease-in-out infinite;
        }
        .day-summary-empty {
            text-align: center;
            padding: 24px;
            color: var(--text-muted);
            font-style: italic;
        }
        .day-summary-item {
            background: var(--bg-dark);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 3px solid var(--accent-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        .day-summary-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.2);
        }
        .day-summary-item span {
            flex-grow: 1;
        }
        .day-summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .day-summary-stat {
            background: var(--bg-dark);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .day-summary-stat:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 255, 255, 0.2);
        }
        .day-summary-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-color);
        }
        .day-summary-stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        /* ENHANCED INPUTS & TRACKING */
        .tracking-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tracking-input input {
            flex-grow: 1;
            background-color: var(--bg-dark);
            border: 1px solid var(--border-subtle);
            color: var(--text-primary);
            padding: 10px 15px;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
        }
        .tracking-input input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
            transform: scale(1.02);
        }
        .tracking-input input::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }
        .tracking-log {
            min-height: 50px;
            flex-grow: 1;
            overflow-y: auto;
            max-height: 150px;
        }
        .log-item, .goal-item {
            background-color: rgba(0,0,0,0.3);
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 3px solid var(--accent-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInItem 0.4s ease-out;
            transition: all 0.3s ease;
        }
        .log-item:hover, .goal-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.2);
        }
        .log-content {
            flex-grow: 1;
        }
        .log-main {
            font-weight: 600;
            margin-bottom: 4px;
        }
        .log-time {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        .goal-item input {
            margin-right: 10px;
        }
        .delete-log-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        .delete-log-btn:hover {
            color: var(--danger-color);
            transform: scale(1.2);
        }
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: none;
            transition: all 0.3s ease;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
            font-family: 'Montserrat', sans-serif;
            background: var(--primary-gradient);
            color: var(--bg-dark);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
        }
        
        /* ENHANCED CHARTS */
        .weekly-chart {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 150px;
            padding: 10px;
            border-radius: 10px;
            background-color: var(--bg-dark);
            margin-top: auto;
        }
        .chart-bar {
            width: 10%;
            background: var(--primary-gradient);
            border-radius: 5px 5px 0 0;
            position: relative;
            text-align: center;
            height: 0;
            transition: height 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .chart-bar:hover {
            filter: brightness(1.2);
            transform: scaleY(1.05);
        }
        .chart-bar .day {
            position: absolute;
            bottom: -25px;
            width: 100%;
            left: 0;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        /* ENHANCED GRAPHICS */
        .graphic-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        #water-glass-svg {
            width: 100px;
            height: 140px;
            overflow: visible;
            animation: float 4s ease-in-out infinite;
        }
        .water-bubble {
            fill: var(--accent-color);
            opacity: 0.6;
            animation: bubble-rise 4s infinite ease-in;
        }
        .sleep-dial-container {
            position: relative;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: float 4s ease-in-out infinite reverse;
        }
        #sleep-dial-progress {
            transition: stroke-dashoffset 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #sleep-dial-text {
            position: absolute;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-color);
        }
        
        /* NOTIFICATION */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(255, 68, 68, 0.9);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: 600;
            z-index: 10002;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* FOOTER */
        .footer {
            background: var(--bg-darker);
            border-top: 1px solid var(--border-subtle);
            padding: 4rem 0 2rem;
            text-align: center;
            margin-top: 4rem;
        }
        .footer p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }
        
        /* ANIMATIONS */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes loadingPulse {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1); }
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes spin-reverse {
            from { transform: rotate(0deg) scale(0.8); }
            to { transform: rotate(-360deg) scale(0.8); }
        }
        @keyframes pulse-grow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes bubble-rise {
            0% { transform: translateY(0); opacity: 0.6; }
            100% { transform: translateY(-120px); opacity: 0; }
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes smash {
            0% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0) rotate(720deg); opacity: 0; }
        }
        @keyframes glassBreak {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }
        @keyframes shardFly {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) rotate(var(--rotation));
                opacity: 0;
            }
        }
        @keyframes dumbbell-lift {
            0%, 100% { transform: translateY(20px); }
            25% { transform: translateY(-20px) rotate(-15deg); }
            50% { transform: translateY(20px); }
            75% { transform: translateY(-20px) rotate(15deg); }
        }
        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        @keyframes today-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 255, 255, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(0, 255, 255, 0); }
        }
        @keyframes glow-pulse {
            from { box-shadow: 0 0 15px rgba(0, 255, 255, 0.1), 0 0 20px rgba(0, 255, 255, 0.1); }
            to { box-shadow: 0 0 30px rgba(0, 255, 255, 0.25), 0 0 45px rgba(0, 255, 255, 0.2); }
        }
        @keyframes muscle-pulse {
            0% { opacity: 0.8; }
            100% { opacity: 1; filter: drop-shadow(0 0 15px rgba(0, 255, 255, 1)); }
        }
        @keyframes dot-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        @keyframes animal-active-glow {
            from {
                box-shadow: 0 0 30px var(--animal-color);
                filter: drop-shadow(0 0 20px var(--animal-color));
            }
            to {
                box-shadow: 0 0 50px var(--animal-color);
                filter: drop-shadow(0 0 35px var(--animal-color));
            }
        }
        @keyframes awaken-icon-zoom {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        @keyframes icon-float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        @keyframes message-glow {
            from {
                border-color: var(--border-subtle);
                box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
            }
            to {
                border-color: var(--accent-color);
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            }
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInItem {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slide-up {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes hover-glow {
            from { opacity: 0; }
            to { opacity: 0.5; }
        }
        @keyframes explode-confetti {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0);
                opacity: 0;
            }
        }
        @keyframes calendar-day-appear {
            from {
                transform: scale(0.8) rotate(-5deg);
                opacity: 0;
            }
            to {
                transform: scale(0.95) rotate(0deg);
                opacity: 1;
            }
        }
        @keyframes icon-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes error-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        /* SCROLL ANIMATIONS */
        .scroll-animate {
            opacity: 0;
            transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .scroll-animate.from-left { transform: translateX(-100px); }
        .scroll-animate.from-right { transform: translateX(100px); }
        .scroll-animate.from-bottom { transform: translateY(100px); }
        .scroll-animate.visible {
            opacity: 1;
            transform: translate(0, 0);
        }
        
        /* RESPONSIVE */
        @media (max-width: 1200px) {
            .muscle-map-container {
                grid-template-columns: 1fr 1fr;
            }
        }
        @media (max-width: 968px) {
            .nav {
                position: fixed;
                top: 80px;
                left: 0;
                width: 100%;
                height: calc(100vh - 80px);
                background: rgba(0, 0, 0, 0.95);
                backdrop-filter: blur(20px);
                flex-direction: column;
                justify-content: center;
                gap: 2rem;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            .nav.nav-open {
                transform: translateX(0);
            }
            .mobile-menu-toggle {
                display: block;
            }
        }
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 16px;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .muscle-map-container {
                grid-template-columns: 1fr;
            }
            .animal-totem-container {
                min-height: 120px;
            }
            .calendar-grid {
                gap: 5px;
            }
            .calendar-day {
                font-size: 0.9rem;
            }
            .bmi-inputs {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <canvas id="particle-background"></canvas>
    <div id="root"></div>
    <div id="ambient-glow"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;
        
        // Enhanced Custom Cursor Component
        const CustomCursor = ({ onSmash }) => {
            const [position, setPosition] = useState({ x: -100, y: -100 });
            
            useEffect(() => {
                const handleMouseMove = (e) => setPosition({ x: e.clientX, y: e.clientY });
                window.addEventListener('mousemove', handleMouseMove);
                return () => window.removeEventListener('mousemove', handleMouseMove);
            }, []);
            
            return (
                <div className="custom-cursor" style={{ left: `${position.x}px`, top: `${position.y}px` }}>
                    <i className="fas fa-dumbbell dumbbell-cursor"></i>
                </div>
            );
        };
        
        // Ambient Glow Effect
        const AmbientGlow = () => {
            useEffect(() => {
                const glowElement = document.getElementById('ambient-glow');
                const handleMouseMove = (e) => {
                    glowElement.style.setProperty('--x', `${e.clientX}px`);
                    glowElement.style.setProperty('--y', `${e.clientY}px`);
                };
                window.addEventListener('mousemove', handleMouseMove);
                return () => window.removeEventListener('mousemove', handleMouseMove);
            }, []);
            return null;
        };
        
        // Enhanced Smash Effect Container
        const SmashEffectContainer = ({ smashEvents }) => {
            const [particles, setParticles] = useState([]);
            const [glassBreaks, setGlassBreaks] = useState([]);
            
            useEffect(() => {
                if (smashEvents.length === 0) return;
                const { x, y } = smashEvents[smashEvents.length - 1];
                
                // Create glass breaking effect
                const newGlassBreak = {
                    id: `gb-${Date.now()}`,
                    x: x - 75,
                    y: y - 75
                };
                setGlassBreaks(prev => [...prev, newGlassBreak]);
                
                // Create glass shards for dramatic effect
                const newShards = Array.from({ length: 25 }).map((_, i) => ({
                    id: `s-${Date.now()}-${i}`,
                    x: x,
                    y: y,
                    width: Math.random() * 15 + 5,
                    height: Math.random() * 20 + 8,
                    rotation: (Math.random() - 0.5) * 360,
                    tx: (Math.random() - 0.5) * 150,
                    ty: (Math.random() - 0.5) * 150,
                    duration: Math.random() * 0.8 + 0.8
                }));
                setGlassBreaks(prev => [...prev, ...newShards]);
                
                // Create particles
                const sportIcons = [
                    'fas fa-dumbbell', 'fas fa-running', 'fas fa-bicycle', 'fas fa-swimmer',
                    'fas fa-fist-raised', 'fas fa-basketball-ball', 'fas fa-football-ball',
                    'fas fa-table-tennis', 'fas fa-volleyball-ball', 'fas fa-baseball-ball'
                ];
                
                const newParticles = Array.from({ length: 25 }).map((_, i) => ({
                    id: `p-${Date.now()}-${i}`, x, y,
                    icon: sportIcons[Math.floor(Math.random() * sportIcons.length)],
                    tx: (Math.random() - 0.5) * 150,
                    ty: (Math.random() - 0.5) * 150,
                    duration: Math.random() * 0.8 + 0.8
                }));
                setParticles(prev => [...prev, ...newParticles]);
                
                // Cleanup timers
                setTimeout(() => {
                    setGlassBreaks([]);
                }, 1000);
                setTimeout(() => {
                    setParticles([]);
                }, 1500);
            }, [smashEvents]);
            
            return (
                <div className="smash-container">
                    {glassBreaks.map(g => (
                        g.id.startsWith('gb-') ? (
                            <div key={g.id} className="glass-break" style={{
                                left: g.x, top: g.y,
                                width: '150px',
                                height: '150px',
                                borderRadius: '50%',
                                background: 'radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(0, 255, 255, 0.5) 50%, transparent 70%)'
                            }}></div>
                        ) : (
                            <div key={g.id} className="glass-shard" style={{
                                left: g.x, top: g.y,
                                width: `${g.width}px`, height: `${g.height}px`,
                                '--tx': `${g.tx}px`, '--ty': `${g.ty}px`,
                                '--rotation': `${g.rotation}deg`,
                                animationDuration: `${g.duration}s`
                            }}></div>
                        )
                    ))}
                    {particles.map(p => (
                        <div key={p.id} className="smash-particle" style={{
                            left: p.x, top: p.y,
                            '--tx': `${p.tx}px`, '--ty': `${p.ty}px`,
                            animationDuration: `${p.duration}s`
                        }}>
                            <i className={p.icon}></i>
                        </div>
                    ))}
                </div>
            );
        };
        
        // Notification Component
        const Notification = ({ message, visible, onClose }) => {
            useEffect(() => {
                if (visible) {
                    const timer = setTimeout(() => {
                        onClose();
                    }, 3000);
                    return () => clearTimeout(timer);
                }
            }, [visible, onClose]);
            
            if (!visible) return null;
            
            return (
                <div className="notification">
                    {message}
                </div>
            );
        };
        
        // Enhanced Loading Screen Component
        const LoadingScreen = () => {
            const [hidden, setHidden] = useState(false);
            
            useEffect(() => {
                const timer = setTimeout(() => setHidden(true), 3500);
                return () => clearTimeout(timer);
            }, []);
            
            if (hidden) return null;
            
            return (
                <div className="loading-screen">
                    <div className="loading-container">
                        <div className="loading-animation">
                            <div className="loading-circle"></div>
                            <div className="loading-circle-alt"></div>
                            <i className="fas fa-dumbbell loading-icon"></i>
                        </div>
                        <div className="loading-text">
                            <h2>ELITE PERFORMANCE</h2>
                            <p>"Champions are made when nobody's watching"</p>
                        </div>
                        <div className="loading-progress">
                            <div className="loading-bar"></div>
                            <div className="loading-bar"></div>
                            <div className="loading-bar"></div>
                            <div className="loading-bar"></div>
                            <div className="loading-bar"></div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Header Component with Profile Dropdown
        const Header = () => {
            const [scrolled, setScrolled] = useState(false);
            const [isProfileDropdownOpen, setIsProfileDropdownOpen] = useState(false);
            const [userName, setUserName] = useState("Athlete");
            
            useEffect(() => {
                const storedName = localStorage.getItem('userName');
                if (storedName) {
                    setUserName(storedName);
                }
                
                const handleScroll = () => {
                    setScrolled(window.scrollY > 50);
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            
            const toggleProfileDropdown = () => {
                setIsProfileDropdownOpen(!isProfileDropdownOpen);
            };
            
            const handleLogout = () => {
                localStorage.removeItem('userName');
                window.location.href = 'index.html';
            };
            
            useEffect(() => {
                const handleClickOutside = (e) => {
                    if (isProfileDropdownOpen && !e.target.closest('.profile-dropdown')) {
                        setIsProfileDropdownOpen(false);
                    }
                };
                
                document.addEventListener('mousedown', handleClickOutside);
                return () => {
                    document.removeEventListener('mousedown', handleClickOutside);
                };
            }, [isProfileDropdownOpen]);
            
            return (
                <header className={`header ${scrolled ? 'scrolled' : ''}`}>
                    <div className="header-content container">
                        <a href="plan.html" className="logo">
                            <i className="fas fa-dumbbell logo-icon"></i>
                            <span>ELITE</span>
                        </a>
                        <nav className="nav">
                            <div className="profile-dropdown">
                                <button className="profile-btn" onClick={toggleProfileDropdown}>
                                    <div className="profile-avatar">
                                        <i className="fas fa-user"></i>
                                    </div>
                                    <span>{userName}</span>
                                    <i className="fas fa-chevron-down"></i>
                                </button>
                                <div className={`dropdown-menu ${isProfileDropdownOpen ? 'active' : ''}`}>
                                
                                    <div className="dropdown-divider"></div>
                                    <a href="index.html" className="dropdown-item" onClick={handleLogout}>
                                        <i className="fas fa-sign-out-alt"></i>
                                        Logout
                                    </a>
                                </div>
                            </div>
                        </nav>
                    </div>
                </header>
            );
        };
        
        // Card Tilt Effect Hook
        const useCardTilt = (ref) => {
            useEffect(() => {
                const element = ref.current;
                if (!element) return;
                
                const handleMouseMove = (e) => {
                    const rect = element.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const { width, height } = rect;
                    const rotateX = (y / height - 0.5) * -15;
                    const rotateY = (x / width - 0.5) * 15;
                    element.style.setProperty('--transform-tilt', `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`);
                };
                
                const handleMouseLeave = () => {
                    element.style.setProperty('--transform-tilt', 'perspective(1000px) rotateX(0deg) rotateY(0deg)');
                };
                
                element.addEventListener('mousemove', handleMouseMove);
                element.addEventListener('mouseleave', handleMouseLeave);
                
                return () => {
                    element.removeEventListener('mousemove', handleMouseMove);
                    element.removeEventListener('mouseleave', handleMouseLeave);
                };
            }, [ref]);
        };
        
        // Dashboard Card Component
        const DashboardCard = ({ children, className, index }) => {
            const cardRef = useRef(null);
            useCardTilt(cardRef);
            
            return (
                <div ref={cardRef} className={`dashboard-card scroll-animate ${index % 2 === 0 ? 'from-left' : 'from-right'} ${className || ''}`}>
                    {children}
                </div>
            );
        };
        
        // Animated Number Component
        const AnimatedNumber = ({ value, unit }) => {
            const [displayValue, setDisplayValue] = useState(0);
            const ref = useRef(null);
            useEffect(() => {
                const node = ref.current;
                if (!node) return;
                const controls = new AbortController();
                const startValue = displayValue;
                const duration = 800;
                let startTime = null;
                function animate(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const progress = Math.min((timestamp - startTime) / duration, 1);
                    const easedProgress = 1 - Math.pow(1 - progress, 4); // easeOutQuart
                    const currentValue = startValue + (value - startValue) * easedProgress;
                    setDisplayValue(currentValue);
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                }
                requestAnimationFrame(animate);
                return () => controls.abort();
            }, [value]);
            return <span ref={ref}>{displayValue.toFixed(1)}{unit}</span>;
        };
        
        // Goal Celebration Component
        const GoalCelebration = ({ onComplete }) => {
            useEffect(() => {
                const timer = setTimeout(onComplete, 1200);
                return () => clearTimeout(timer);
            }, [onComplete]);
            return (
                <div className="goal-celebration-container">
                    {Array.from({ length: 50 }).map((_, i) => {
                        const style = {
                            left: '50%',
                            top: '50%',
                            '--tx': `${(Math.random() - 0.5) * window.innerWidth}px`,
                            '--ty': `${(Math.random() - 0.5) * window.innerHeight}px`,
                            backgroundColor: `hsl(${Math.random() * 360}, 100%, 70%)`,
                            transform: `rotate(${Math.random() * 360}deg)`
                        };
                        return <div key={i} className="confetti" style={style}></div>;
                    })}
                </div>
            );
        };
        
        // Calendar Component
        const WorkoutCalendar = ({ waterLogs, sleepLogs, workoutLogs, goals, onDayClick }) => {
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const calendarRef = useRef(null);
            
            const getDaysInMonth = (year, month) => {
                return new Date(year, month + 1, 0).getDate();
            };
            
            const getFirstDayOfMonth = (year, month) => {
                return new Date(year, month, 1).getDay();
            };
            
            const formatDate = (date) => {
                const d = new Date(date);
                let month = '' + (d.getMonth() + 1);
                let day = '' + d.getDate();
                const year = d.getFullYear();
                
                if (month.length < 2) month = '0' + month;
                if (day.length < 2) day = '0' + day;
                
                return [year, month, day].join('-');
            };
            
            const hasActivity = (date) => {
                const dateStr = formatDate(date);
                return (
                    workoutLogs.some(log => formatDate(log.date) === dateStr) ||
                    waterLogs.some(log => formatDate(log.date) === dateStr) ||
                    sleepLogs.some(log => formatDate(log.date) === dateStr) ||
                    goals.some(goal => formatDate(goal.date) === dateStr)
                );
            };
            
            const isToday = (date) => {
                const today = new Date();
                return date.getDate() === today.getDate() &&
                    date.getMonth() === today.getMonth() &&
                    date.getFullYear() === today.getFullYear();
            };
            
            const handlePrevMonth = () => {
                setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() - 1, 1));
            };
            
            const handleNextMonth = () => {
                setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() + 1, 1));
            };
            
            const renderCalendar = () => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const daysInMonth = getDaysInMonth(year, month);
                const firstDayOfMonth = getFirstDayOfMonth(year, month);
                
                const days = [];
                
                // Add empty cells for days before the first day of the month
                for (let i = 0; i < firstDayOfMonth; i++) {
                    const prevMonthDays = getDaysInMonth(year, month - 1);
                    const day = prevMonthDays - firstDayOfMonth + i + 1;
                    const date = new Date(year, month - 1, day);
                    days.push(
                        <div
                            key={`empty-${i}`}
                            className="calendar-day other-month"
                            onClick={() => onDayClick(date)}
                        >
                            <div className="calendar-day-number">{day}</div>
                        </div>
                    );
                }
                
                // Add cells for each day of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const date = new Date(year, month, day);
                    const activity = hasActivity(date);
                    const today = isToday(date);
                    days.push(
                        <div
                            key={`day-${day}`}
                            className={`calendar-day ${activity ? 'has-activity' : ''} ${today ? 'today' : ''}`}
                            onClick={() => onDayClick(date)}
                            style={{ animationDelay: `${day * 0.02}s` }}
                        >
                            <div className="calendar-day-number">{day}</div>
                            {activity && <div className="calendar-day-indicator">Activity</div>}
                        </div>
                    );
                }
                
                return days;
            };
            
            const monthNames = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            
            return (
                <div ref={calendarRef} className="calendar-container">
                    <div className="calendar-header">
                        <h3>
                            <i className="fas fa-calendar-alt calendar-icon"></i>
                            Activity Calendar
                        </h3>
                        <div className="calendar-nav">
                            <button onClick={handlePrevMonth}>
                                <i className="fas fa-chevron-left"></i>
                            </button>
                            <span style={{ color: 'var(--text-primary)', fontWeight: '600' }}>
                                {monthNames[currentMonth.getMonth()]} {currentMonth.getFullYear()}
                            </span>
                            <button onClick={handleNextMonth}>
                                <i className="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div className="calendar-grid">
                        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                            <div key={day} className="calendar-day-header">{day}</div>
                        ))}
                        {renderCalendar()}
                    </div>
                </div>
            );
        };
        
        // BMI Calculator Component
        const BMICalculator = () => {
            const [heightFeet, setHeightFeet] = useState('');
            const [heightInches, setHeightInches] = useState('');
            const [weight, setWeight] = useState('');
            const [bmi, setBmi] = useState(null);
            const [category, setCategory] = useState('');
            const [errors, setErrors] = useState({
                heightFeet: '',
                heightInches: '',
                weight: ''
            });
            const bmiRef = useRef(null);
            
            const validateInputs = () => {
                const newErrors = {
                    heightFeet: '',
                    heightInches: '',
                    weight: ''
                };
                let isValid = true;
                
                if (!heightFeet || isNaN(heightFeet) || parseFloat(heightFeet) <= 0) {
                    newErrors.heightFeet = 'Please enter a valid height in feet';
                    isValid = false;
                }
                
                if (!heightInches || isNaN(heightInches) || parseFloat(heightInches) < 0 || parseFloat(heightInches) >= 12) {
                    newErrors.heightInches = 'Please enter a valid height in inches (0-11)';
                    isValid = false;
                }
                
                if (!weight || isNaN(weight) || parseFloat(weight) <= 0) {
                    newErrors.weight = 'Please enter a valid weight';
                    isValid = false;
                }
                
                setErrors(newErrors);
                return isValid;
            };
            
            const calculateBMI = () => {
                if (!validateInputs()) {
                    return;
                }
                
                // Convert feet and inches to centimeters
                const totalInches = (parseFloat(heightFeet) * 12) + parseFloat(heightInches);
                const heightInCm = totalInches * 2.54;
                const heightInMeters = heightInCm / 100;
                
                const bmiValue = weight / (heightInMeters * heightInMeters);
                setBmi(bmiValue);
                
                let bmiCategory = '';
                if (bmiValue < 18.5) {
                    bmiCategory = 'underweight';
                } else if (bmiValue >= 18.5 && bmiValue < 25) {
                    bmiCategory = 'normal';
                } else if (bmiValue >= 25 && bmiValue < 30) {
                    bmiCategory = 'overweight';
                } else {
                    bmiCategory = 'obese';
                }
                setCategory(bmiCategory);
            };
            
            const getCategoryText = () => {
                switch(category) {
                    case 'underweight': return 'Underweight';
                    case 'normal': return 'Normal Weight';
                    case 'overweight': return 'Overweight';
                    case 'obese': return 'Obese';
                    default: return '';
                }
            };
            
            const getCategoryDescription = () => {
                switch(category) {
                    case 'underweight': return 'You may need to gain weight. Consult with a healthcare provider for advice.';
                    case 'normal': return 'Great job! You\'re in the healthy weight range. Keep maintaining your lifestyle.';
                    case 'overweight': return 'Consider adopting a healthier diet and increasing physical activity.';
                    case 'obese': return 'It\'s recommended to consult with a healthcare provider for a comprehensive weight management plan.';
                    default: return 'Enter your height and weight to calculate your BMI.';
                }
            };
            
            useEffect(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.1 });
                
                if (bmiRef.current) {
                    observer.observe(bmiRef.current);
                }
                
                return () => {
                    if (bmiRef.current) {
                        observer.unobserve(bmiRef.current);
                    }
                };
            }, []);
            
            return (
                <div ref={bmiRef} className="bmi-calculator">
                    <div className="bmi-header">
                        <h3>
                            <i className="fas fa-weight bmi-icon"></i>
                            BMI Calculator
                        </h3>
                    </div>
                    
                    <div className="bmi-inputs">
                        <div className="bmi-input-group">
                            <label htmlFor="height-feet">Height (feet)</label>
                            <input
                                type="number"
                                id="height-feet"
                                value={heightFeet}
                                onChange={(e) => {
                                    setHeightFeet(e.target.value);
                                    if (errors.heightFeet) setErrors(prev => ({...prev, heightFeet: ''}));
                                }}
                                placeholder="Feet"
                                min="0"
                                max="8"
                                className={errors.heightFeet ? 'error' : ''}
                            />
                            {errors.heightFeet && <div className="error-message show">{errors.heightFeet}</div>}
                        </div>
                        <div className="bmi-input-group">
                            <label htmlFor="height-inches">Height (inches)</label>
                            <input
                                type="number"
                                id="height-inches"
                                value={heightInches}
                                onChange={(e) => {
                                    setHeightInches(e.target.value);
                                    if (errors.heightInches) setErrors(prev => ({...prev, heightInches: ''}));
                                }}
                                placeholder="Inches"
                                min="0"
                                max="11"
                                className={errors.heightInches ? 'error' : ''}
                            />
                            {errors.heightInches && <div className="error-message show">{errors.heightInches}</div>}
                        </div>
                        <div className="bmi-input-group">
                            <label htmlFor="weight">Weight (kg)</label>
                            <input
                                type="number"
                                id="weight"
                                value={weight}
                                onChange={(e) => {
                                    setWeight(e.target.value);
                                    if (errors.weight) setErrors(prev => ({...prev, weight: ''}));
                                }}
                                placeholder="Enter your weight"
                                min="0"
                                className={errors.weight ? 'error' : ''}
                            />
                            {errors.weight && <div className="error-message show">{errors.weight}</div>}
                        </div>
                    </div>
                    
                    <div className="bmi-calculate">
                        <button className="btn" onClick={calculateBMI}>
                            <i className="fas fa-calculator"></i>
                            Calculate BMI
                        </button>
                    </div>
                    
                    {bmi && (
                        <div className="bmi-result">
                            <div className="bmi-value">
                                <AnimatedNumber value={bmi} unit="" />
                            </div>
                            <div className={`bmi-category ${category}`}>
                                {getCategoryText()}
                            </div>
                            <p className="bmi-description">
                                {getCategoryDescription()}
                            </p>
                            
                            <div className="bmi-scale">
                                <div className="bmi-scale-item">
                                    <div className="bmi-scale-label">Underweight</div>
                                    <div className="bmi-scale-range underweight">&lt; 18.5</div>
                                </div>
                                <div className="bmi-scale-item">
                                    <div className="bmi-scale-label">Normal</div>
                                    <div className="bmi-scale-range normal">18.5 - 24.9</div>
                                </div>
                                <div className="bmi-scale-item">
                                    <div className="bmi-scale-label">Overweight</div>
                                    <div className="bmi-scale-range overweight">25 - 29.9</div>
                                </div>
                                <div className="bmi-scale-item">
                                    <div className="bmi-scale-label">Obese</div>
                                    <div className="bmi-scale-range obese"> 30</div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        // Day Summary Modal Component
        const DaySummaryModal = ({ date, waterLogs, sleepLogs, workoutLogs, goals, onClose }) => {
            if (!date) return null;
            
            const formatDate = (date) => {
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                return date.toLocaleDateString(undefined, options);
            };
            
            const formatDateKey = (date) => {
                const d = new Date(date);
                let month = '' + (d.getMonth() + 1);
                let day = '' + d.getDate();
                const year = d.getFullYear();
                
                if (month.length < 2) month = '0' + month;
                if (day.length < 2) day = '0' + day;
                
                return [year, month, day].join('-');
            };
            
            const formatTime = (date) => {
                const d = new Date(date);
                return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            };
            
            const dateKey = formatDateKey(date);
            
            const dayWaterLogs = waterLogs.filter(log => formatDateKey(log.date) === dateKey);
            const daySleepLogs = sleepLogs.filter(log => formatDateKey(log.date) === dateKey);
            const dayWorkoutLogs = workoutLogs.filter(log => formatDateKey(log.date) === dateKey);
            const dayGoals = goals.filter(goal => formatDateKey(goal.date) === dateKey);
            
            const totalWater = dayWaterLogs.reduce((sum, log) => sum + log.amount, 0);
            const totalSleep = daySleepLogs.reduce((sum, log) => sum + log.amount, 0);
            const completedGoals = dayGoals.filter(goal => goal.completed).length;
            
            return (
                <div className="day-summary-modal active">
                    <div className="day-summary-content">
                        <div className="day-summary-header">
                            <h3>{formatDate(date)}</h3>
                            <button className="day-summary-close" onClick={onClose}>
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                        <div className="day-summary-body">
                            <div className="day-summary-stats">
                                <div className="day-summary-stat">
                                    <div className="day-summary-stat-value">{totalWater} ml</div>
                                    <div className="day-summary-stat-label">Water Intake</div>
                                </div>
                                <div className="day-summary-stat">
                                    <div className="day-summary-stat-value">{totalSleep} h</div>
                                    <div className="day-summary-stat-label">Sleep</div>
                                </div>
                                <div className="day-summary-stat">
                                    <div className="day-summary-stat-value">{dayWorkoutLogs.length}</div>
                                    <div className="day-summary-stat-label">Workouts</div>
                                </div>
                                <div className="day-summary-stat">
                                    <div className="day-summary-stat-value">{completedGoals}/{dayGoals.length}</div>
                                    <div className="day-summary-stat-label">Goals Completed</div>
                                </div>
                            </div>
                            
                            <div className="day-summary-section">
                                <h4><i className="fas fa-dumbbell"></i> Workouts</h4>
                                {dayWorkoutLogs.length === 0 ? (
                                    <div className="day-summary-empty">No workouts logged for this day</div>
                                ) : (
                                    dayWorkoutLogs.map(log => (
                                        <div key={log.id} className="day-summary-item">
                                            <div className="log-content">
                                                <div className="log-main">Completed: <strong>{log.text}</strong></div>
                                                <div className="log-time">{formatTime(log.timestamp)}</div>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                            
                            <div className="day-summary-section">
                                <h4><i className="fas fa-tint"></i> Hydration</h4>
                                {dayWaterLogs.length === 0 ? (
                                    <div className="day-summary-empty">No water intake logged for this day</div>
                                ) : (
                                    dayWaterLogs.map(log => (
                                        <div key={log.id} className="day-summary-item">
                                            <div className="log-content">
                                                <div className="log-main">Logged: <strong>{log.amount} ml</strong></div>
                                                <div className="log-time">{formatTime(log.timestamp)}</div>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                            
                            <div className="day-summary-section">
                                <h4><i className="fas fa-moon"></i> Recovery</h4>
                                {daySleepLogs.length === 0 ? (
                                    <div className="day-summary-empty">No sleep logged for this day</div>
                                ) : (
                                    daySleepLogs.map(log => (
                                        <div key={log.id} className="day-summary-item">
                                            <div className="log-content">
                                                <div className="log-main">Logged: <strong>{log.amount} hours</strong></div>
                                                <div className="log-time">{formatTime(log.timestamp)}</div>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                            
                            <div className="day-summary-section">
                                <h4><i className="fas fa-bullseye"></i> Goals</h4>
                                {dayGoals.length === 0 ? (
                                    <div className="day-summary-empty">No goals set for this day</div>
                                ) : (
                                    dayGoals.map(goal => (
                                        <div key={goal.id} className="day-summary-item">
                                            <div className="log-content">
                                                <div className="log-main" style={{ textDecoration: goal.completed ? 'line-through' : 'none' }}>
                                                    {goal.text}
                                                </div>
                                                <div className="log-time">{formatTime(goal.timestamp)}</div>
                                            </div>
                                            <span style={{ color: goal.completed ? 'var(--recovery-color)' : 'var(--text-muted)' }}>
                                                {goal.completed ? 'Completed' : 'Pending'}
                                            </span>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Main Dashboard Component
        const Dashboard = ({ showNotification, onAnimalAwaken }) => {
            const [userName, setUserName] = useState("Athlete");
            const [activeAnimal, setActiveAnimal] = useState('rest');
            const [selectedMuscle, setSelectedMuscle] = useState(null);
            const [selectedDate, setSelectedDate] = useState(null);
            
            const [waterInput, setWaterInput] = useState('');
            const [sleepInput, setSleepInput] = useState('');
            const [workoutInput, setWorkoutInput] = useState('');
            const [goalInput, setGoalInput] = useState('');
            const [waterLogs, setWaterLogs] = useState([]);
            const [sleepLogs, setSleepLogs] = useState([]);
            const [workoutLogs, setWorkoutLogs] = useState([]);
            const [goals, setGoals] = useState([]);
            const [celebrationGoalId, setCelebrationGoalId] = useState(null);
            
            const [chartData, setChartData] = useState([0, 0, 0, 0, 0, 0, 0]);
            const [unlockedAnimals, setUnlockedAnimals] = useState(['rest']);
            
            const animals = useMemo(() => [
                { id: 'rest', name: 'Resting', icon: '', color: 'var(--rest-color)', message: "Rest is a weapon. Use it wisely." },
                { id: 'bear', name: 'Bear', icon: '', color: 'var(--bear-color)', message: "The Bear's strength flows through you." },
                { id: 'lion', name: 'Lion', icon: '', color: 'var(--lion-color)', message: "The Lion's courage empowers you." },
                { id: 'cheetah', name: 'Cheetah', icon: '', color: 'var(--cheetah-color)', message: "The Cheetah's speed is yours." },
                { id: 'eagle', name: 'Eagle', icon: '', color: 'var(--eagle-color)', message: "The Eagle's focus guides you." },
                { id: 'wolf', name: 'Wolf', icon: '', color: 'var(--wolf-color)', message: "The Wolf's endurance sustains you." },
                { id: 'tiger', name: 'Tiger', icon: '', color: 'var(--tiger-color)', message: "The Tiger's power is unleashed." },
                { id: 'gorilla', name: 'Gorilla', icon: '', color: 'var(--gorilla-color)', message: "The Gorilla's raw power is yours." },
                { id: 'shark', name: 'Shark', icon: '', color: 'var(--shark-color)', message: "The Shark's relentless drive propels you." }
            ], []);
            
            const exerciseDatabase = useMemo(() => ({
                // Bear (Strength)
                'bench press': { muscles: ['chest', 'shoulders', 'triceps'], animal: 'bear', xp: 25 },
                'chest': { muscles: ['chest', 'shoulders', 'triceps'], animal: 'bear', xp: 25 },
                'push up': { muscles: ['chest', 'shoulders', 'triceps'], animal: 'bear', xp: 15 },
                'deadlift': { muscles: ['back', 'glutes', 'hamstrings', 'forearms'], animal: 'bear', xp: 30 },
                'back': { muscles: ['back', 'biceps'], animal: 'bear', xp: 20 },
                'pull up': { muscles: ['back', 'biceps'], animal: 'bear', xp: 20 },
                'row': { muscles: ['back', 'biceps'], animal: 'bear', xp: 20 },
                'squat': { muscles: ['quads', 'glutes', 'hamstrings'], animal: 'bear', xp: 25 },
                'overhead press': { muscles: ['shoulders', 'triceps'], animal: 'bear', xp: 20 },
                'shoulders': { muscles: ['shoulders', 'triceps'], animal: 'bear', xp: 20 },
                // Gorilla (Isolation/Bodybuilding)
                'arms': { muscles: ['biceps', 'triceps', 'forearms'], animal: 'gorilla', xp: 15 },
                'bicep': { muscles: ['biceps'], animal: 'gorilla', xp: 10 },
                'tricep': { muscles: ['triceps'], animal: 'gorilla', xp: 10 },
                'curl': { muscles: ['biceps', 'forearms'], animal: 'gorilla', xp: 10 },
                'extension': { muscles: ['triceps', 'quads'], animal: 'gorilla', xp: 10 },
                'fly': { muscles: ['chest', 'shoulders'], animal: 'gorilla', xp: 15 },
                'raise': { muscles: ['shoulders', 'calves'], animal: 'gorilla', xp: 10 },
                // Cheetah (Legs/Speed)
                'leg press': { muscles: ['quads', 'glutes', 'hamstrings'], animal: 'cheetah', xp: 20 },
                'legs': { muscles: ['quads', 'glutes', 'hamstrings', 'calves'], animal: 'cheetah', xp: 25 },
                'lunge': { muscles: ['quads', 'glutes', 'hamstrings'], animal: 'cheetah', xp: 15 },
                'run': { muscles: ['quads', 'hamstrings', 'calves'], animal: 'cheetah', xp: 20 },
                'sprint': { muscles: ['quads', 'hamstrings', 'calves'], animal: 'cheetah', xp: 25 },
                'jog': { muscles: ['quads', 'hamstrings', 'calves'], animal: 'cheetah', xp: 15 },
                'cardio': { muscles: [], animal: 'cheetah', xp: 15 },
                'cycling': { muscles: ['quads', 'hamstrings', 'calves'], animal: 'cheetah', xp: 20 },
                // Shark (Swimming)
                'swim': { muscles: ['shoulders', 'back', 'chest', 'abs', 'triceps'], animal: 'shark', xp: 25 },
                'swimming': { muscles: ['shoulders', 'back', 'chest', 'abs', 'triceps'], animal: 'shark', xp: 25 },
                // Eagle (Core/Flexibility)
                'yoga': { muscles: ['abs', 'back'], animal: 'eagle', xp: 15 },
                'pilates': { muscles: ['abs', 'back'], animal: 'eagle', xp: 15 },
                'core': { muscles: ['abs'], animal: 'eagle', xp: 10 },
                'abs': { muscles: ['abs'], animal: 'eagle', xp: 10 },
                // Wolf (Endurance)
                'hike': { muscles: ['quads', 'hamstrings', 'calves', 'glutes'], animal: 'wolf', xp: 20 },
                'long distance': { muscles: ['quads', 'hamstrings', 'calves', 'glutes'], animal: 'wolf', xp: 25 },
                'endurance': { muscles: ['quads', 'hamstrings', 'calves', 'glutes'], animal: 'wolf', xp: 20 },
                // Tiger (Agility/HIIT)
                'hiit': { muscles: ['quads', 'hamstrings', 'calves', 'abs'], animal: 'tiger', xp: 30 },
                'crossfit': { muscles: ['shoulders', 'back', 'chest', 'quads', 'glutes', 'hamstrings'], animal: 'tiger', xp: 30 },
                'jump rope': { muscles: ['calves', 'quads'], animal: 'tiger', xp: 15 },
                'skipping': { muscles: ['calves', 'quads'], animal: 'tiger', xp: 15 },
                'conditioning': { muscles: ['quads', 'hamstrings', 'calves'], animal: 'tiger', xp: 20 },
                // Sports specific
                'boxing': { muscles: ['shoulders', 'back', 'abs', 'quads'], animal: 'tiger', xp: 25 },
                'basketball': { muscles: ['quads', 'calves', 'shoulders'], animal: 'tiger', xp: 20 },
                'soccer': { muscles: ['quads', 'hamstrings', 'calves'], animal: 'cheetah', xp: 25 },
                'tennis': { muscles: ['shoulders', 'forearms', 'quads', 'calves'], animal: 'tiger', xp: 20 }
            }), []);
            
            const muscleStatus = useMemo(() => {
                const initialStatus = {
                    head: { name: 'Overall Well-being', status: 'Optimal', lastTrained: 'N/A' },
                    shoulders: { name: 'Shoulders', status: 'Rested', lastTrained: 'N/A' },
                    chest: { name: 'Chest', status: 'Rested', lastTrained: 'N/A' },
                    abs: { name: 'Core/Abs', status: 'Rested', lastTrained: 'N/A' },
                    biceps: { name: 'Biceps', status: 'Rested', lastTrained: 'N/A' },
                    triceps: { name: 'Triceps', status: 'Rested', lastTrained: 'N/A' },
                    forearms: { name: 'Forearms', status: 'Rested', lastTrained: 'N/A' },
                    quads: { name: 'Quadriceps', status: 'Rested', lastTrained: 'N/A' },
                    hamstrings: { name: 'Hamstrings', status: 'Rested', lastTrained: 'N/A' },
                    calves: { name: 'Calves', status: 'Rested', lastTrained: 'N/A' },
                    back: { name: 'Back', status: 'Rested', lastTrained: 'N/A' },
                    glutes: { name: 'Glutes', status: 'Rested', lastTrained: 'N/A' }
                };
                const twoDaysAgo = new Date();
                twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
                workoutLogs.forEach(log => {
                    if (new Date(log.date) > twoDaysAgo) {
                        log.musclesAffected.forEach(muscle => {
                            if (initialStatus[muscle]) {
                                initialStatus[muscle].status = 'Fatigued';
                                initialStatus[muscle].lastTrained = new Date(log.date).toLocaleDateString();
                            }
                        });
                    }
                });
                return initialStatus;
            }, [workoutLogs]);
            
            const totalWater = useMemo(() => waterLogs.reduce((sum, log) => sum + log.amount, 0), [waterLogs]);
            const totalSleep = useMemo(() => sleepLogs.reduce((sum, log) => sum + log.amount, 0), [sleepLogs]);
            
            // Load data from localStorage on component mount
            useEffect(() => {
                // Get user name from localStorage
                const storedName = localStorage.getItem('userName');
                if (storedName) {
                    setUserName(storedName);
                }
                
                // Load workout logs from localStorage
                const savedWorkoutLogs = localStorage.getItem('workoutLogs');
                if (savedWorkoutLogs) {
                    try {
                        const parsedLogs = JSON.parse(savedWorkoutLogs);
                        // Convert date strings back to Date objects
                        const logsWithDates = parsedLogs.map(log => ({
                            ...log,
                            date: new Date(log.date),
                            timestamp: new Date(log.timestamp)
                        }));
                        setWorkoutLogs(logsWithDates);
                        
                        // Update chart data based on loaded logs
                        const newChartData = [...chartData];
                        logsWithDates.forEach(log => {
                            const dayIndex = log.date.getDay();
                            newChartData[dayIndex] = Math.min(100, newChartData[dayIndex] + 25);
                        });
                        setChartData(newChartData);
                    } catch (e) {
                        console.error('Failed to parse workout logs from localStorage', e);
                    }
                }
                
                // Load other data from localStorage
                const savedWaterLogs = localStorage.getItem('waterLogs');
                if (savedWaterLogs) {
                    try {
                        const parsedLogs = JSON.parse(savedWaterLogs);
                        const logsWithDates = parsedLogs.map(log => ({
                            ...log,
                            date: new Date(log.date),
                            timestamp: new Date(log.timestamp)
                        }));
                        setWaterLogs(logsWithDates);
                    } catch (e) {
                        console.error('Failed to parse water logs from localStorage', e);
                    }
                }
                
                const savedSleepLogs = localStorage.getItem('sleepLogs');
                if (savedSleepLogs) {
                    try {
                        const parsedLogs = JSON.parse(savedSleepLogs);
                        const logsWithDates = parsedLogs.map(log => ({
                            ...log,
                            date: new Date(log.date),
                            timestamp: new Date(log.timestamp)
                        }));
                        setSleepLogs(logsWithDates);
                    } catch (e) {
                        console.error('Failed to parse sleep logs from localStorage', e);
                    }
                }
                
                const savedGoals = localStorage.getItem('goals');
                if (savedGoals) {
                    try {
                        const parsedGoals = JSON.parse(savedGoals);
                        const goalsWithDates = parsedGoals.map(goal => ({
                            ...goal,
                            date: new Date(goal.date),
                            timestamp: new Date(goal.timestamp)
                        }));
                        setGoals(goalsWithDates);
                    } catch (e) {
                        console.error('Failed to parse goals from localStorage', e);
                    }
                }
                
                const savedUnlockedAnimals = localStorage.getItem('unlockedAnimals');
                if (savedUnlockedAnimals) {
                    try {
                        setUnlockedAnimals(JSON.parse(savedUnlockedAnimals));
                    } catch (e) {
                        console.error('Failed to parse unlocked animals from localStorage', e);
                    }
                }
                
                const savedActiveAnimal = localStorage.getItem('activeAnimal');
                if (savedActiveAnimal) {
                    setActiveAnimal(savedActiveAnimal);
                }
            }, []);
            
            // Save workout logs to localStorage whenever they change
            useEffect(() => {
                localStorage.setItem('workoutLogs', JSON.stringify(workoutLogs));
                
                // Update game data in localStorage for the gamification page
                const gameData = {
                    totalWorkouts: workoutLogs.length,
                    workoutTypes: {}
                };
                
                workoutLogs.forEach(log => {
                    if (log.animalType) {
                        if (!gameData.workoutTypes[log.animalType]) {
                            gameData.workoutTypes[log.animalType] = 0;
                        }
                        gameData.workoutTypes[log.animalType]++;
                    }
                });
                
                localStorage.setItem('gameData', JSON.stringify(gameData));
            }, [workoutLogs]);
            
            // Save other data to localStorage when they change
            useEffect(() => {
                localStorage.setItem('waterLogs', JSON.stringify(waterLogs));
            }, [waterLogs]);
            
            useEffect(() => {
                localStorage.setItem('sleepLogs', JSON.stringify(sleepLogs));
            }, [sleepLogs]);
            
            useEffect(() => {
                localStorage.setItem('goals', JSON.stringify(goals));
            }, [goals]);
            
            useEffect(() => {
                localStorage.setItem('unlockedAnimals', JSON.stringify(unlockedAnimals));
            }, [unlockedAnimals]);
            
            useEffect(() => {
                localStorage.setItem('activeAnimal', activeAnimal);
            }, [activeAnimal]);
            
            useEffect(() => {
                document.querySelectorAll('.chart-bar').forEach((bar, index) => {
                    setTimeout(() => {
                        bar.style.height = `${chartData[index]}%`;
                    }, index * 100);
                });
            }, [chartData]);
            
            const handleLogWater = () => {
                const amount = parseInt(waterInput);
                if (amount > 0) {
                    setWaterLogs(prev => [{
                        id: Date.now(),
                        amount,
                        date: new Date(),
                        timestamp: new Date()
                    }, ...prev]);
                    setWaterInput('');
                } else {
                    showNotification("Please enter a valid water amount.");
                }
            };
            
            const handleLogSleep = () => {
                const hours = parseFloat(sleepInput);
                if (hours > 0) {
                    setSleepLogs(prev => [{
                        id: Date.now(),
                        amount: hours,
                        date: new Date(),
                        timestamp: new Date()
                    }, ...prev]);
                    setSleepInput('');
                } else {
                    showNotification("Please enter valid sleep hours.");
                }
            };
            
            const handleLogWorkout = () => {
                if (!workoutInput) {
                    showNotification("Please enter a workout name.");
                    return;
                }
                const name = workoutInput.toLowerCase();
                let workoutData = null;
                for (const [exercise, data] of Object.entries(exerciseDatabase)) {
                    if (name.includes(exercise)) {
                        workoutData = data;
                        break;
                    }
                }
                if (workoutData) {
                    const newWorkout = {
                        id: Date.now(),
                        text: workoutInput,
                        animalType: workoutData.animal,
                        musclesAffected: workoutData.muscles,
                        date: new Date(),
                        timestamp: new Date(),
                        xp: workoutData.xp || 20
                    };
                    setWorkoutLogs(prev => [newWorkout, ...prev]);
                    setWorkoutInput('');
                    const dayIndex = newWorkout.date.getDay();
                    const newChartData = [...chartData];
                    newChartData[dayIndex] = Math.min(100, newChartData[dayIndex] + 25);
                    setChartData(newChartData);
                    if (!unlockedAnimals.includes(workoutData.animal)) {
                        setUnlockedAnimals(prev => [...prev, workoutData.animal]);
                    }
                    setActiveAnimal(workoutData.animal);
                    onAnimalAwaken(animals.find(a => a.id === workoutData.animal));
                } else {
                    showNotification("Workout not recognized. Try specific exercises.");
                }
            };
            
            const handleAddGoal = () => {
                if (goalInput) {
                    setGoals(prev => [{
                        id: Date.now(),
                        text: goalInput,
                        completed: false,
                        date: new Date(),
                        timestamp: new Date()
                    }, ...prev]);
                    setGoalInput('');
                } else {
                    showNotification("Please enter a goal.");
                }
            };
            
            const handleRemoveWorkout = (workoutIdToRemove) => {
                const workoutToRemove = workoutLogs.find(w => w.id === workoutIdToRemove);
                if (!workoutToRemove) return;
                const remainingWorkouts = workoutLogs.filter(w => w.id !== workoutIdToRemove);
                
                const dayIndex = workoutToRemove.date.getDay();
                const newChartData = [...chartData];
                newChartData[dayIndex] = Math.max(0, newChartData[dayIndex] - 25);
                setChartData(newChartData);
                setWorkoutLogs(remainingWorkouts);
            };
            
            const createRemoveHandler = (setter) => (id) => setter(prev => prev.filter(item => item.id !== id));
            const handleRemoveWater = createRemoveHandler(setWaterLogs);
            const handleRemoveSleep = createRemoveHandler(setSleepLogs);
            const handleRemoveGoal = createRemoveHandler(setGoals);
            
            const toggleGoal = (id) => {
                let isCompleting = false;
                const newGoals = goals.map(g => {
                    if (g.id === id) {
                        if (!g.completed) {
                            isCompleting = true;
                        }
                        return { ...g, completed: !g.completed };
                    }
                    return g;
                });
                setGoals(newGoals);
                if (isCompleting) {
                    setCelebrationGoalId(id);
                }
            };
            
            const handleMuscleClick = (muscleId) => setSelectedMuscle(muscleId);
            
            const handleDayClick = (date) => {
                setSelectedDate(date);
            };
            
            const closeDaySummary = () => {
                setSelectedDate(null);
            };
            
            const formatTime = (date) => {
                const d = new Date(date);
                return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            };
            
            const activeAnimalData = useMemo(() => animals.find(a => a.id === activeAnimal), [activeAnimal, animals]);
            const orbitingAnimals = useMemo(() => animals.filter(a => unlockedAnimals.includes(a.id) && a.id !== activeAnimal), [unlockedAnimals, activeAnimal, animals]);
            
            return (
                <main>
                    {celebrationGoalId && <GoalCelebration onComplete={() => setCelebrationGoalId(null)} />}
                    <section id="dashboard">
                        <div className="container">
                            <div className="section-header scroll-animate from-bottom">
                                <h2>Welcome back, <span style={{color: 'var(--accent-color)'}}>{userName}</span></h2>
                                <p>Track your elite performance, monitor every metric, and witness your transformation into greatness.</p>
                            </div>
                            <div className="dashboard-grid">
                                <DashboardCard className="full-width" index={0}>
                                    <h3><i className="fas fa-user-ninja"></i> Advanced 3D Muscle Mapping</h3>
                                    <div className="muscle-map-container">
                                        <div className="muscle-view">
                                            <h4>Front View</h4>
                                            <svg className="muscle-diagram" viewBox="0 0 200 400">
                                                <g>
                                                    <ellipse className="muscle-group" onClick={() => handleMuscleClick('head')} data-muscle="head" cx="100" cy="40" rx="25" ry="30" />
                                                    <ellipse className={`muscle-group ${muscleStatus.shoulders.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('shoulders')} data-muscle="shoulders" cx="65" cy="85" rx="20" ry="15" />
                                                    <ellipse className={`muscle-group ${muscleStatus.shoulders.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('shoulders')} data-muscle="shoulders" cx="135" cy="85" rx="20" ry="15" />
                                                    <ellipse className={`muscle-group ${muscleStatus.chest.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('chest')} data-muscle="chest" cx="100" cy="95" rx="30" ry="25" />
                                                    <rect className={`muscle-group ${muscleStatus.abs.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('abs')} data-muscle="abs" x="85" y="125" width="30" height="40" rx="5" />
                                                    <ellipse className={`muscle-group ${muscleStatus.biceps.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('biceps')} data-muscle="biceps" cx="55" cy="115" rx="12" ry="18" />
                                                    <ellipse className={`muscle-group ${muscleStatus.biceps.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('biceps')} data-muscle="biceps" cx="145" cy="115" rx="12" ry="18" />
                                                    <rect className={`muscle-group ${muscleStatus.forearms.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('forearms')} data-muscle="forearms" x="48" y="140" width="14" height="30" rx="7" />
                                                    <rect className={`muscle-group ${muscleStatus.forearms.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('forearms')} data-muscle="forearms" x="138" y="140" width="14" height="30" rx="7" />
                                                    <ellipse className={`muscle-group ${muscleStatus.quads.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('quads')} data-muscle="quads" cx="85" cy="220" rx="15" ry="35" />
                                                    <ellipse className={`muscle-group ${muscleStatus.quads.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('quads')} data-muscle="quads" cx="115" cy="220" rx="15" ry="35" />
                                                    <ellipse className={`muscle-group ${muscleStatus.calves.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('calves')} data-muscle="calves" cx="85" cy="320" rx="12" ry="25" />
                                                    <ellipse className={`muscle-group ${muscleStatus.calves.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('calves')} data-muscle="calves" cx="115" cy="320" rx="12" ry="25" />
                                                </g>
                                            </svg>
                                        </div>
                                        <div className="muscle-view">
                                            <h4>Back View</h4>
                                            <svg className="muscle-diagram" viewBox="0 0 200 400">
                                                <g>
                                                    <ellipse className="muscle-group" onClick={() => handleMuscleClick('head')} data-muscle="head" cx="100" cy="40" rx="25" ry="30" />
                                                    <ellipse className={`muscle-group ${muscleStatus.back.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('back')} data-muscle="back" cx="100" cy="120" rx="35" ry="40" />
                                                    <ellipse className={`muscle-group ${muscleStatus.triceps.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('triceps')} data-muscle="triceps" cx="55" cy="115" rx="10" ry="20" />
                                                    <ellipse className={`muscle-group ${muscleStatus.triceps.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('triceps')} data-muscle="triceps" cx="145" cy="115" rx="10" ry="20" />
                                                    <ellipse className={`muscle-group ${muscleStatus.glutes.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('glutes')} data-muscle="glutes" cx="100" cy="180" rx="25" ry="20" />
                                                    <ellipse className={`muscle-group ${muscleStatus.hamstrings.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('hamstrings')} data-muscle="hamstrings" cx="85" cy="230" rx="13" ry="30" />
                                                    <ellipse className={`muscle-group ${muscleStatus.hamstrings.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('hamstrings')} data-muscle="hamstrings" cx="115" cy="230" rx="13" ry="30" />
                                                    <ellipse className={`muscle-group ${muscleStatus.calves.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('calves')} data-muscle="calves" cx="85" cy="320" rx="12" ry="25" />
                                                    <ellipse className={`muscle-group ${muscleStatus.calves.status === 'Fatigued' ? 'active' : ''}`} onClick={() => handleMuscleClick('calves')} data-muscle="calves" cx="115" cy="320" rx="12" ry="25" />
                                                </g>
                                            </svg>
                                        </div>
                                        <div className="muscle-info">
                                            <h4>{selectedMuscle ? muscleStatus[selectedMuscle]?.name : "Select a Muscle Group"}</h4>
                                            {selectedMuscle ? (
                                                <>
                                                    <div className="status-indicator">
                                                        <div className="status-dot" style={{ backgroundColor: muscleStatus[selectedMuscle].status === 'Rested' || muscleStatus[selectedMuscle].status === 'Optimal' ? 'var(--recovery-color)' : 'var(--fatigue-color)' }}></div>
                                                        <span><strong>Status:</strong> {muscleStatus[selectedMuscle].status}</span>
                                                    </div>
                                                    <p><strong>Last Trained:</strong> {muscleStatus[selectedMuscle].lastTrained}</p>
                                                    <p><strong>Recovery Time:</strong> {muscleStatus[selectedMuscle].status === 'Fatigued' ? '24-48 hours' : 'Ready to train'}</p>
                                                </>
                                            ) : (
                                                <p>Click on any muscle group to view detailed information about its current status, recovery time, and training recommendations.</p>
                                            )}
                                        </div>
                                    </div>
                                </DashboardCard>
                                <DashboardCard index={1}>
                                    <h3><i className="fas fa-fire"></i> Spirit Totem</h3>
                                    <div className="animal-totem-container">
                                        <div className="totem-active-animal" style={{'--animal-color': activeAnimalData.color}}>
                                            <div className="animal-icon">{activeAnimalData.icon}</div>
                                            <div className="animal-name">{activeAnimalData.name}</div>
                                        </div>
                                        <div className="totem-orbit-container">
                                            {orbitingAnimals.map((animal, index) => (
                                                <div
                                                    key={animal.id}
                                                    className="totem-orbiter"
                                                    style={{'--animal-color': animal.color, '--angle': (360 / orbitingAnimals.length) * index}}
                                                    onClick={() => setActiveAnimal(animal.id)}
                                                >
                                                    <div className="animal-icon">{animal.icon}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="animal-message" style={{ color: activeAnimalData.color }}>
                                        {activeAnimalData.message}
                                    </div>
                                </DashboardCard>
                                <DashboardCard index={2}>
                                    <h3><i className="fas fa-rocket"></i> Elite Workout Tracker</h3>
                                    <div className="tracking-input">
                                        <input type="text" value={workoutInput} onChange={(e) => setWorkoutInput(e.target.value)} placeholder="e.g., Bench Press, Skipping, Swimming" />
                                        <button className="btn" onClick={handleLogWorkout}><i className="fas fa-plus"></i> Log</button>
                                    </div>
                                    <div className="tracking-log">
                                        {workoutLogs.length === 0 ? <p className="log-item">Ready to log your next elite performance...</p> : workoutLogs.map(log => (
                                            <div key={log.id} className="log-item">
                                                <div className="log-content">
                                                    <div className="log-main">Completed: <strong>{log.text}</strong></div>
                                                    <div className="log-time">{formatTime(log.timestamp)}</div>
                                                </div>
                                                <button onClick={() => handleRemoveWorkout(log.id)} className="delete-log-btn"><i className="fas fa-times"></i></button>
                                            </div>
                                        ))}
                                    </div>
                                </DashboardCard>
                                <DashboardCard index={3}>
                                    <h3><i className="fas fa-target"></i> Victory Goals</h3>
                                    <div className="tracking-input">
                                        <input type="text" value={goalInput} onChange={(e) => setGoalInput(e.target.value)} placeholder="Set your next conquest..." />
                                        <button className="btn" onClick={handleAddGoal}><i className="fas fa-bullseye"></i> Add</button>
                                    </div>
                                    <div className="tracking-log">
                                        {goals.length === 0 ? <p className="log-item">Your path to greatness begins with goals...</p> : goals.map(goal => (
                                            <div key={goal.id} className="goal-item">
                                                <input type="checkbox" checked={goal.completed} onChange={() => toggleGoal(goal.id)} />
                                                <div className="log-content">
                                                    <div className="log-main" style={{ textDecoration: goal.completed ? 'line-through' : 'none' }}>
                                                        {goal.text}
                                                    </div>
                                                    <div className="log-time">{formatTime(goal.timestamp)}</div>
                                                </div>
                                                <button className="delete-log-btn" onClick={() => handleRemoveGoal(goal.id)}><i className="fas fa-trash-alt"></i></button>
                                            </div>
                                        ))}
                                    </div>
                                </DashboardCard>
                                <DashboardCard index={4}>
                                    <h3><i className="fas fa-chart-line"></i> Performance Analytics</h3>
                                    <div className="weekly-chart">
                                        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day, i) => (
                                            <div key={day} className="chart-bar" data-day={i}><span className="day">{day}</span></div>
                                        ))}
                                    </div>
                                </DashboardCard>
                                <DashboardCard index={5}>
                                    <h3><i className="fas fa-tint"></i> Hydration Command Center</h3>
                                    <div className="graphic-container">
                                        <svg id="water-glass-svg" viewBox="0 0 80 120">
                                            <defs>
                                                <linearGradient id="water-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                                    <stop offset="0%" stopColor="var(--accent-color)" />
                                                    <stop offset="100%" stopColor="#0099CC" />
                                                </linearGradient>
                                            </defs>
                                            <path id="water-level" fill="url(#water-gradient)" d="M 20 110 H 60 V 110 H 20 Z" />
                                            <path d="M10 10 L 20 110 H 60 L 70 10 Z" fill="rgba(255,255,255,0.1)" stroke="var(--accent-color)" strokeWidth="2" />
                                            <circle className="water-bubble" cx="30" cy="110" r="3" style={{animationDelay: '0s'}} />
                                            <circle className="water-bubble" cx="45" cy="110" r="2" style={{animationDelay: '1.5s'}} />
                                            <circle className="water-bubble" cx="55" cy="110" r="4" style={{animationDelay: '2.5s'}} />
                                        </svg>
                                    </div>
                                    <div className="tracking-input">
                                        <input type="number" value={waterInput} onChange={(e) => setWaterInput(e.target.value)} placeholder="Hydration (ml)" />
                                        <button className="btn" onClick={handleLogWater}><i className="fas fa-plus"></i> Log</button>
                                    </div>
                                    <div className="tracking-log">
                                        {waterLogs.length === 0 ? <p className="log-item">Fuel your performance with optimal hydration...</p> : waterLogs.map(log => (
                                            <div key={log.id} className="log-item">
                                                <div className="log-content">
                                                    <div className="log-main">Logged: <strong>{log.amount} ml</strong></div>
                                                    <div className="log-time">{formatTime(log.timestamp)}</div>
                                                </div>
                                                <button onClick={() => handleRemoveWater(log.id)} className="delete-log-btn"><i className="fas fa-times"></i></button>
                                            </div>
                                        ))}
                                    </div>
                                </DashboardCard>
                                <DashboardCard index={6}>
                                    <h3><i className="fas fa-moon"></i> Recovery Chamber</h3>
                                    <div className="graphic-container">
                                        <div className="sleep-dial-container">
                                            <svg style={{transform: 'rotate(-90deg)'}} width="120" height="120" viewBox="0 0 120 120">
                                                <defs>
                                                    <linearGradient id="sleep-gradient">
                                                        <stop offset="0%" stopColor="var(--accent-color)" />
                                                        <stop offset="100%" stopColor="#0099CC" />
                                                    </linearGradient>
                                                </defs>
                                                <circle cx="60" cy="60" r="54" fill="none" stroke="var(--border-subtle)" strokeWidth="12" />
                                                <circle id="sleep-dial-progress" cx="60" cy="60" r="54" fill="none" stroke="url(#sleep-gradient)" strokeWidth="12" strokeLinecap="round" />
                                            </svg>
                                            <div id="sleep-dial-text"><AnimatedNumber value={totalSleep} unit="h" /></div>
                                        </div>
                                    </div>
                                    <div className="tracking-input">
                                        <input type="number" value={sleepInput} onChange={(e) => setSleepInput(e.target.value)} placeholder="Recovery hours" />
                                        <button className="btn" onClick={handleLogSleep}><i className="fas fa-plus"></i> Log</button>
                                    </div>
                                    <div className="tracking-log">
                                        {sleepLogs.length === 0 ? <p className="log-item">Elite recovery for elite performance...</p> : sleepLogs.map(log => (
                                            <div key={log.id} className="log-item">
                                                <div className="log-content">
                                                    <div className="log-main">Logged: <strong>{log.amount} hours</strong></div>
                                                    <div className="log-time">{formatTime(log.timestamp)}</div>
                                                </div>
                                                <button onClick={() => handleRemoveSleep(log.id)} className="delete-log-btn"><i className="fas fa-times"></i></button>
                                            </div>
                                        ))}
                                    </div>
                                </DashboardCard>
                            </div>
                            
                            <BMICalculator />
                            
                            <WorkoutCalendar
                                waterLogs={waterLogs}
                                sleepLogs={sleepLogs}
                                workoutLogs={workoutLogs}
                                goals={goals}
                                onDayClick={handleDayClick}
                            />
                        </div>
                    </section>
                    
                    {selectedDate && (
                        <DaySummaryModal
                            date={selectedDate}
                            waterLogs={waterLogs}
                            sleepLogs={sleepLogs}
                            workoutLogs={workoutLogs}
                            goals={goals}
                            onClose={closeDaySummary}
                        />
                    )}
                </main>
            );
        };
        
        // Animal Awakening Overlay Component
        const AnimalAwakeningOverlay = ({ animal }) => {
            if (!animal) return null;
            
            const animalColor = getComputedStyle(document.documentElement).getPropertyValue(animal.color.match(/--[a-zA-Z-]+/)[0]).trim();
            const transparentColor = `rgba(${parseInt(animalColor.slice(1,3),16)}, ${parseInt(animalColor.slice(3,5),16)}, ${parseInt(animalColor.slice(5,7),16)}, 0.5)`;
            return (
                <div className="awakening-overlay" style={{'--animal-color': animal.color, '--animal-color-transparent': transparentColor}}>
                    <div className="animal-icon">{animal.icon}</div>
                </div>
            );
        };
        
        // Main App Component
        const App = () => {
            const [smashEvents, setSmashEvents] = useState([]);
            const [notification, setNotification] = useState({ visible: false, message: '' });
            const [awakenedAnimal, setAwakenedAnimal] = useState(null);
            const [lastScrollY, setLastScrollY] = useState(0);
            const [scrollDirection, setScrollDirection] = useState('down');
            const showNotification = useCallback((message) => {
                setNotification({ visible: true, message });
            }, []);
            const closeNotification = useCallback(() => {
                setNotification({ visible: false, message: '' });
            }, []);
            const handleAnimalAwaken = useCallback((animal) => {
                setAwakenedAnimal(animal);
                setTimeout(() => setAwakenedAnimal(null), 2500);
            }, []);
            
            // Handle scroll direction for calendar visibility
            useEffect(() => {
                const handleScroll = () => {
                    const currentScrollY = window.scrollY;
                    
                    // Determine scroll direction
                    if (currentScrollY > lastScrollY) {
                        setScrollDirection('down');
                    } else if (currentScrollY < lastScrollY) {
                        setScrollDirection('up');
                    }
                    
                    setLastScrollY(currentScrollY);
                    
                    // Show/hide calendar based on scroll direction and position
                    const calendarElement = document.querySelector('.calendar-container');
                    if (calendarElement) {
                        const calendarTop = calendarElement.offsetTop;
                        const calendarHeight = calendarElement.offsetHeight;
                        const viewportHeight = window.innerHeight;
                        const scrollPosition = currentScrollY + viewportHeight;
                        
                        if (scrollDirection === 'down' && scrollPosition > calendarTop + 100) {
                            calendarElement.classList.add('visible');
                        } else if (scrollDirection === 'up' && scrollPosition < calendarTop + calendarHeight) {
                            calendarElement.classList.remove('visible');
                        }
                    }
                    
                    // Show/hide BMI calculator based on scroll direction and position
                    const bmiElement = document.querySelector('.bmi-calculator');
                    if (bmiElement) {
                        const bmiTop = bmiElement.offsetTop;
                        const bmiHeight = bmiElement.offsetHeight;
                        const viewportHeight = window.innerHeight;
                        const scrollPosition = currentScrollY + viewportHeight;
                        
                        if (scrollDirection === 'down' && scrollPosition > bmiTop + 100) {
                            bmiElement.classList.add('visible');
                        } else if (scrollDirection === 'up' && scrollPosition < bmiTop + bmiHeight) {
                            bmiElement.classList.remove('visible');
                        }
                    }
                };
                
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, [lastScrollY, scrollDirection]);
            
            useEffect(() => {
                const canvas = document.getElementById('particle-background');
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                let particlesArray = [];
                const numberOfParticles = 50;
                let mouse = { x: null, y: null };
                window.addEventListener('mousemove', (event) => {
                    mouse.x = event.x;
                    mouse.y = event.y;
                });
                
                class Particle {
                    constructor(x, y, size, color, weight) {
                        this.x = x; this.y = y; this.size = size; this.color = color; this.weight = weight;
                        this.baseX = this.x; this.baseY = this.y;
                    }
                    draw() {
                        ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = this.color; ctx.fill();
                    }
                    update() {
                        let dx = mouse.x - this.x;
                        let dy = mouse.y - this.y;
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        let forceDirectionX = dx / distance;
                        let forceDirectionY = dy / distance;
                        let maxDistance = 100;
                        let force = (maxDistance - distance) / maxDistance;
                        let directionX = forceDirectionX * force * this.size;
                        let directionY = forceDirectionY * force * this.size;
                        if (distance < maxDistance) {
                            this.x -= directionX;
                            this.y -= directionY;
                        } else {
                            if (this.x !== this.baseX) {
                                let dx = this.x - this.baseX;
                                this.x -= dx/10;
                            }
                            if (this.y !== this.baseY) {
                                let dy = this.y - this.baseY;
                                this.y -= dy/10;
                            }
                        }
                    }
                }
                
                function init() {
                    particlesArray = [];
                    for (let i = 0; i < numberOfParticles; i++) {
                        const x = Math.random() * canvas.width; const y = Math.random() * canvas.height; const size = (Math.random() * 4) + 1; const color = `rgba(0, 255, 255, ${Math.random() * 0.3 + 0.1})`; const weight = 1;
                        particlesArray.push(new Particle(x, y, size, color, weight));
                    }
                }
                
                let animationFrameId;
                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    particlesArray.forEach(p => { p.update(); p.draw(); });
                    animationFrameId = requestAnimationFrame(animate);
                }
                
                init(); animate();
                const handleResize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; init(); };
                window.addEventListener('resize', handleResize);
                return () => { window.removeEventListener('resize', handleResize); cancelAnimationFrame(animationFrameId); }
            }, []);
            
            useEffect(() => {
                const animatedElements = document.querySelectorAll('.scroll-animate');
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        } else {
                            entry.target.classList.remove('visible');
                        }
                    });
                }, { threshold: 0.1 });
                animatedElements.forEach(el => observer.observe(el));
                return () => animatedElements.forEach(el => observer.unobserve(el));
            }, []);
            
            const handleSmash = useCallback((x, y) => {
                const el = document.elementFromPoint(x, y);
                if (el && (el.tagName === 'A' || el.tagName === 'BUTTON' || el.tagName === 'INPUT' || el.closest('.muscle-group') || el.closest('.animal-block'))) return;
                setSmashEvents(prev => [...prev, { x, y, id: Date.now() }]);
            }, []);
            
            useEffect(() => {
                const handleClick = (e) => handleSmash(e.clientX, e.clientY);
                document.addEventListener('click', handleClick);
                return () => document.removeEventListener('click', handleClick);
            }, [handleSmash]);
            
            return (
                <>
                    <CustomCursor onSmash={handleSmash} />
                    <AmbientGlow />
                    <SmashEffectContainer smashEvents={smashEvents} />
                    <AnimalAwakeningOverlay animal={awakenedAnimal} />
                    <LoadingScreen />
                    <Header />
                    <Dashboard showNotification={showNotification} onAnimalAwaken={handleAnimalAwaken} />
                    <Notification message={notification.message} visible={notification.visible} onClose={closeNotification} />
                    <footer className="footer">
                        <div className="container">
                            <p>&copy; 2025 Personal Stat Log. Elite Performance Dashboard - Engineered for Champions.</p>
                        </div>
                    </footer>
                </>
            );
        };
        
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>