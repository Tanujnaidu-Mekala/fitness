<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elite - Adventure Fitness Quest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* All existing CSS styles remain unchanged */
        :root {
            --bg-dark: #010409;
            --bg-darker: #0d1117;
            --bg-lighter: #161b22;
            --bg-card: rgba(10, 15, 25, 0.7);
            --text-primary: #e6edf3;
            --text-secondary: #7d8590;
            --text-muted: #484f58;
            --border-subtle: rgba(0, 255, 255, 0.2);
            --accent-color: #00FFFF;
            --accent-pink: #F72585;
            --accent-orange: #FF6B35;
            --primary-gradient: linear-gradient(135deg, var(--accent-color) 0%, #0099CC 100%);
            --secondary-gradient: linear-gradient(135deg, var(--accent-orange) 0%, #F7931E 100%);
            --accent-gradient: linear-gradient(135deg, var(--accent-pink) 0%, #C77DFF 100%);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --neon-blue: #00d4ff;
            --neon-purple: #9d00ff;
            --neon-green: #39ff14;
            --neon-pink: #ff006e;
            --holographic: linear-gradient(45deg, #ff00cc, #3333ff, #00ccff, #00ff99, #ffcc00, #ff00cc);
            --cyber-grid-color: rgba(0, 255, 255, 0.07);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none;
        }
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
       
        /* Loading Screen Styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            transition: opacity 0.5s ease-out;
        }
        .loading-container {
            text-align: center;
            position: relative;
            width: 100%;
            max-width: 500px;
        }
        .loading-animation {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .loading-icon {
            font-size: 3rem;
            color: var(--accent-color);
            animation: pulse-grow 1.5s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        .loading-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid transparent;
            border-top-color: var(--accent-color);
            transform: rotate(0deg);
            animation: spin 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        }
        .loading-circle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: var(--accent-color);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px var(--accent-color);
        }
        .loading-circle-alt {
            position: absolute;
            width: 80%;
            height: 80%;
            border-radius: 50%;
            border: 3px solid transparent;
            border-bottom-color: var(--accent-pink);
            transform: rotate(0deg) scale(0.8);
            animation: spin-reverse 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        }
        .loading-text h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
        }
        .loading-text p {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 2rem;
            font-size: 1.2rem;
        }
        .loading-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .loading-bar {
            width: 8px;
            height: 30px;
            background: var(--primary-gradient);
            border-radius: 4px;
            animation: loadingPulse 1.4s ease-in-out infinite;
        }
        .loading-bar:nth-child(2) { animation-delay: 0.2s; background: var(--secondary-gradient); }
        .loading-bar:nth-child(3) { animation-delay: 0.4s; background: var(--accent-gradient); }
        .loading-bar:nth-child(4) { animation-delay: 0.6s; background: var(--primary-gradient); }
        .loading-bar:nth-child(5) { animation-delay: 0.8s; background: var(--secondary-gradient); }
       
        /* Custom Cursor */
        .custom-cursor {
            position: fixed;
            width: 40px;
            height: 40px;
            z-index: 10001;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease;
        }
        .dumbbell-cursor {
            font-size: 40px;
            color: var(--accent-color);
            animation: rotate 3s linear infinite;
            filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.9));
        }
       
        /* Smash Effect */
        .smash-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10000;
        }
        .smash-particle {
            position: absolute; font-size: 16px; pointer-events: none; animation: smash 0.8s ease-out forwards; filter: drop-shadow(0 0 6px rgba(0, 255, 255, 0.7));
        }
        .glass-break {
            position: absolute; pointer-events: none; animation: glassBreak 0.8s ease-out forwards;
        }
        .glass-shard {
            position: absolute; background: linear-gradient(45deg, rgba(255, 255, 255, 0.8), rgba(0, 255, 255, 0.5)); pointer-events: none; animation: shardFly 1s ease-out forwards; box-shadow: 0 0 8px rgba(0, 255, 255, 0.7);
        }
       
        /* Header Styles */
        header {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; background: rgba(1, 4, 9, 0.7); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border-subtle); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .header-content {
            display: flex; align-items: center; justify-content: space-between; height: 80px; max-width: 1400px; margin: 0 auto; padding: 0 2rem;
        }
        .logo {
            font-family: 'Orbitron', sans-serif; display: flex; align-items: center; gap: 0.75rem; font-size: 1.8rem; font-weight: 800; color: var(--text-primary); text-decoration: none; letter-spacing: 1px; transition: all 0.3s ease;
        }
        .logo:hover { transform: scale(1.05); text-shadow: 0 0 10px var(--accent-color); }
        .logo-icon { width: 2.5rem; height: 2.5rem; color: var(--accent-color); animation: pulse 2s infinite; }
       
        /* Profile Dropdown */
        .profile-dropdown { position: relative; margin-left: 1rem; }
        .profile-btn { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: var(--primary-gradient); border: none; border-radius: 50px; color: var(--bg-dark); font-size: 0.9rem; font-weight: 600; cursor: none; transition: all 0.3s ease; font-family: 'Montserrat', sans-serif; }
        .profile-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 255, 255, 0.4); }
        .profile-avatar { width: 24px; height: 24px; border-radius: 50%; background: var(--bg-dark); display: flex; align-items: center; justify-content: center; color: var(--accent-color); }
        .profile-avatar i { font-size: 0.9rem; }
        .dropdown-menu { position: absolute; top: 100%; right: 0; margin-top: 0.5rem; background: rgba(1, 4, 9, 0.9); backdrop-filter: blur(20px); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; min-width: 180px; opacity: 0; transform: translateY(-10px); transition: all 0.3s ease; pointer-events: none; z-index: 1000; }
        .dropdown-menu.active { opacity: 1; transform: translateY(0); pointer-events: auto; }
        .dropdown-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: var(--text-secondary); text-decoration: none; transition: all 0.2s ease; font-size: 0.9rem; }
        .dropdown-item:hover { background: rgba(0, 255, 255, 0.1); color: var(--text-primary); }
        .dropdown-item i { width: 16px; text-align: center; font-size: 0.9rem; }
        .dropdown-divider { height: 1px; background: var(--border-subtle); margin: 0.5rem 0; }
       
        /* Main Content */
        main { padding-top: 80px; min-height: 100vh; position: relative; overflow: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
       
        /* Animated Background */
        .bg-animation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background: linear-gradient(45deg, #000000, #0a0a2e, #16213e); background-size: 400% 400%; animation: gradientShift 15s ease infinite; }
        .cyber-grid { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(var(--cyber-grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--cyber-grid-color) 1px, transparent 1px); background-size: 50px 50px; z-index: -1; opacity: 0.3; }
        .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .particle { position: absolute; background-color: rgba(0, 255, 255, 0.5); border-radius: 50%; pointer-events: none; opacity: 0; animation: floatUp 10s infinite linear; }
       
        /* Floating Icons */
        .floating-icons {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }
        .floating-icon {
            position: absolute;
            font-size: 2rem;
            color: rgba(0, 255, 255, 0.1);
            animation: float-icon 15s infinite linear;
            filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.2));
        }
       
        /* Enhanced Hero Section */
        .hero { padding: 80px 0; text-align: center; position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at center, rgba(0, 212, 255, 0.1) 0%, rgba(0,0,0,0) 70%); z-index: 0; }
        .hero h1 {
            font-family: 'Orbitron', sans-serif; font-size: clamp(2.5rem, 8vw, 5rem); font-weight: 900; margin-bottom: 20px; text-transform: uppercase; background: var(--holographic); background-size: 200% 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-shadow: 0 0 20px rgba(0, 255, 255, 0.5); animation: gradientShift 5s ease infinite, glow 2s ease-in-out infinite alternate; position: relative;
        }
        .hero h1::before, .hero h1::after { content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-dark); overflow: hidden; clip: rect(0, 900px, 0, 0); }
        .hero h1::before { left: 2px; text-shadow: -2px 0 var(--accent-pink); animation: glitch-anim-1 3s infinite linear alternate-reverse; }
        .hero h1::after { left: -2px; text-shadow: -2px 0 var(--accent-orange), 2px 2px var(--accent-color); animation: glitch-anim-2 2s infinite linear alternate-reverse; }
        .hero p { font-size: 1.2rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto; text-shadow: 0 0 10px rgba(0, 255, 255, 0.3); }
       
        /* Universal Section Styling */
        .game-section {
            background: var(--bg-card);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border-subtle);
            border-radius: 0; /* Removed for clip-path */
            padding: 30px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(0, 255, 255, 0.1);
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
        }
        .game-section::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.05), transparent); transition: left 0.8s ease;
        }
        .game-section:hover::before { left: 100%; }
        .game-section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .game-section-title { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--text-primary); text-shadow: 0 0 10px var(--accent-color); }
       
        /* Character Section */
        .level-badge { background: var(--primary-gradient); color: var(--bg-dark); width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.9rem; box-shadow: 0 0 15px rgba(0, 255, 255, 0.5); }
        .level-text { font-weight: 600; color: var(--accent-color); font-family: 'Orbitron', sans-serif; }
        .character-name { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; font-weight: 700; margin-bottom: 15px; color: var(--text-primary); text-shadow: 0 0 10px rgba(0, 255, 255, 0.3); }
        .xp-bar { height: 20px; background: rgba(0, 0, 0, 0.5); border-radius: 10px; overflow: hidden; margin-bottom: 15px; border: 1px solid rgba(0, 255, 255, 0.2); }
        .xp-fill { height: 100%; width: 0%; background: var(--primary-gradient); border-radius: 10px; position: relative; overflow: hidden; transition: width 0.8s ease; box-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
        .xp-fill::after { content: ''; position: absolute; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent); animation: shimmer 2s infinite; }
        .xp-text { display: flex; justify-content: flex-end; font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 20px; }
        .skills-container { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .skill-badge { padding: 5px 12px; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-subtle); border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: var(--text-secondary); display: flex; align-items: center; gap: 5px; transition: all 0.3s ease; cursor: pointer; }
        .skill-badge:hover { transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); border-color: rgba(0, 255, 255, 0.5); }
        .skill-badge.unlocked { background: rgba(0, 255, 255, 0.2); color: var(--accent-color); border-color: var(--accent-color); box-shadow: 0 0 10px rgba(0, 255, 255, 0.3); }
        .skill-badge i { font-size: 0.8rem; }
        .skill-bar { width: 100%; height: 8px; background: rgba(0, 0, 0, 0.5); border-radius: 4px; overflow: hidden; margin-top: 5px; position: relative; border: 1px solid rgba(0, 255, 255, 0.1); }
        .skill-bar-fill { height: 100%; width: 0%; border-radius: 4px; transition: width 0.8s ease; }
        .skill-bar-fill.strength { background: linear-gradient(90deg, #FF6B35, #F7931E); box-shadow: 0 0 10px rgba(255, 107, 53, 0.5); }
        .skill-bar-fill.endurance { background: linear-gradient(90deg, #4CAF50, #8BC34A); box-shadow: 0 0 10px rgba(76, 175, 80, 0.5); }
        .skill-bar-fill.agility { background: linear-gradient(90deg, #2196F3, #03A9F4); box-shadow: 0 0 10px rgba(33, 150, 243, 0.5); }
        .skill-bar-fill.wisdom { background: linear-gradient(90deg, #9C27B0, #673AB7); box-shadow: 0 0 10px rgba(156, 39, 176, 0.5); }
       
        /* Quest Section */
        .quest-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .quest-item {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 15px;
            position: relative;
            transition: all 0.3s ease;
        }
        .quest-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: rgba(0, 255, 255, 0.5);
        }
        .quest-item.active {
            border-color: var(--accent-color);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }
        .quest-item.completed {
            opacity: 0.7;
            border-color: var(--text-muted);
        }
        .quest-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        .quest-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        .quest-progress {
            height: 8px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .quest-progress-fill {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        .quest-reward {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--accent-orange);
        }
       
        /* Map Section */
        .map-container-wrapper { position: relative; width: 100%; overflow: hidden; border-radius: 15px; cursor: grab; border: 2px solid var(--border-subtle); box-shadow: 0 0 20px rgba(0, 0, 0, 0.5); }
        .map-container-wrapper.dragging { cursor: grabbing; }
        .map-container { position: relative; width: 200%; height: 500px; background: var(--bg-darker); border: 2px solid var(--border-subtle); transition: transform 0.3s ease; background-image: linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px); background-size: 50px 50px; }
        .map-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('') center/cover; opacity: 0.3; z-index: 1; }
        .map-path { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; }
        .map-location { position: absolute; width: 80px; height: 80px; border-radius: 50%; background: rgba(0, 0, 0, 0.7); border: 3px solid var(--border-subtle); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; z-index: 3; box-shadow: 0 0 20px rgba(0, 0, 0, 0.5); }
        .map-location.locked { opacity: 0.5; cursor: not-allowed; background: rgba(0, 0, 0, 0.5); border-color: var(--text-muted); }
        .map-location.unlocked { border-color: var(--accent-color); box-shadow: 0 0 30px rgba(0, 255, 255, 0.5); }
        .map-location.current { border-color: var(--accent-orange); box-shadow: 0 0 40px rgba(255, 107, 53, 0.7); animation: float 3s ease-in-out infinite; }
        .map-location:hover:not(.locked) { transform: scale(1.1); }
        .location-icon { font-size: 1.5rem; margin-bottom: 5px; color: var(--text-secondary); }
        .map-location.unlocked .location-icon { color: var(--accent-color); }
        .map-location.current .location-icon { color: var(--accent-orange); }
        .location-name { font-size: 0.7rem; font-weight: 600; text-align: center; color: var(--text-primary); }
        .map-path-line { stroke-dasharray: 5; animation: dash 2s linear infinite; }
        .map-path-line.active { stroke: url(#line-gradient); box-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
        .map-slide-indicator { display: flex; justify-content: center; gap: 8px; margin-top: 15px; }
        .map-slide-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--bg-lighter); cursor: pointer; transition: all 0.3s ease; }
        .map-slide-dot.active { background: var(--accent-color); transform: scale(1.2); box-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
       
        /* Rewards Section */
        .rewards-tabs { display: flex; gap: 15px; margin-bottom: 30px; }
        .rewards-tab { padding: 10px 20px; background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-subtle); border-radius: 8px; color: var(--text-secondary); font-family: 'Orbitron', sans-serif; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .rewards-tab:hover { border-color: rgba(0, 255, 255, 0.5); transform: translateY(-3px); }
        .rewards-tab.active { background: var(--primary-gradient); color: var(--bg-dark); border-color: var(--accent-color); box-shadow: 0 0 15px rgba(0, 255, 255, 0.5); }
        .rewards-content { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .reward-item { background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 20px; text-align: center; transition: all 0.3s ease; position: relative; overflow: hidden; cursor: pointer; }
        .reward-item:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); border-color: var(--accent-color); }
        .reward-rarity { position: absolute; top: 10px; right: 10px; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; }
        .rarity-common { background: rgba(255, 255, 255, 0.2); color: #FFFFFF; border: 1px solid rgba(255, 255, 255, 0.3); }
        .rarity-uncommon { background: rgba(76, 175, 80, 0.3); color: #4CAF50; border: 1px solid rgba(76, 175, 80, 0.5); }
        .rarity-rare { background: rgba(33, 150, 243, 0.3); color: #2196F3; border: 1px solid rgba(33, 150, 243, 0.5); }
        .rarity-epic { background: rgba(156, 39, 176, 0.3); color: #9C27B0; border: 1px solid rgba(156, 39, 176, 0.5); }
        .rarity-legendary { background: rgba(255, 193, 7, 0.3); color: #FFC107; border: 1px solid rgba(255, 193, 7, 0.5); }
        .reward-icon { font-size: 2.5rem; margin-bottom: 15px; color: var(--accent-color); filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.5)); }
        .reward-name { font-size: 1rem; font-weight: 700; margin-bottom: 10px; color: var(--text-primary); }
        .reward-description { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 15px; max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .reward-item.expanded .reward-description { max-height: 100px; }
        .reward-action { width: 100%; padding: 8px; background: var(--primary-gradient); border: none; border-radius: 6px; color: var(--bg-dark); font-family: 'Orbitron', sans-serif; font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.3s ease; }
        .reward-action:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3); }
        .reward-action:disabled { background: var(--bg-lighter); color: var(--text-muted); cursor: not-allowed; }
        .reward-action:disabled:hover { transform: none; box-shadow: none; }
       
        /* Progress Bar Section */
        .current-level { font-family: 'Orbitron', sans-serif; font-size: 2rem; font-weight: 700; color: var(--accent-color); text-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
        .level-points { font-size: 1.1rem; color: var(--text-secondary); }
        .progress-bar { height: 25px; background: rgba(0, 0, 0, 0.5); border-radius: 15px; overflow: hidden; margin-bottom: 20px; border: 1px solid var(--border-subtle); }
        .progress-fill { height: 100%; width: 0%; background: var(--primary-gradient); border-radius: 15px; position: relative; overflow: hidden; transition: width 0.8s ease; box-shadow: 0 0 15px rgba(0, 255, 255, 0.5); }
        .progress-fill::after { content: ''; position: absolute; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent); animation: shimmer 2s infinite; }
       
        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-top: 20px; }
        .stat-card { background: rgba(0, 0, 0, 0.5); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 15px; text-align: center; transition: all 0.3s ease; position: relative; clip-path: polygon(0 15px, 15px 0, 100% 0, 100% 100%, 0 100%); }
        .stat-card:hover { transform: translateY(-5px); border-color: var(--accent-color); box-shadow: 0 10px 20px rgba(0, 212, 255, 0.2); }
        .stat-value { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--accent-color); margin-bottom: 5px; text-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
        .stat-label { font-size: 0.9rem; color: var(--text-secondary); text-transform: uppercase; }
       
        /* Challenge Categories */
        .challenge-categories { display: flex; justify-content: center; gap: 30px; margin: 40px 0; flex-wrap: wrap; }
        .category-btn { font-family: 'Orbitron', sans-serif; padding: 15px 30px; background: transparent; border: 1px solid var(--border-subtle); border-radius: 0; color: var(--text-primary); font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%); }
        .category-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--accent-color); z-index: -1; transform: scaleX(0); transform-origin: left; transition: transform 0.4s ease; }
        .category-btn:hover { color: var(--bg-dark); }
        .category-btn:hover::before { transform: scaleX(1); }
        .category-btn.active { color: var(--bg-dark); border-color: var(--accent-color); }
        .category-btn.active::before { transform: scaleX(1); }
       
        /* Challenge Grid */
        .challenges-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; margin: 40px 0; }
        .challenge-card { background: var(--bg-card); backdrop-filter: blur(15px); border: 1px solid var(--border-subtle); border-radius: 0; padding: 25px; transition: all 0.3s ease; position: relative; overflow: hidden; height: 100%; display: flex; flex-direction: column; clip-path: polygon(0 20px, 20px 0, 100% 0, 100% 100%, 0 100%); }
        .challenge-card.locked { opacity: 0.7; pointer-events: none; }
        .challenge-card.locked::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1; }
        .challenge-card.locked .lock-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; color: var(--text-muted); z-index: 2; }
        .challenge-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); border-color: rgba(0, 255, 255, 0.5); }
        .challenge-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .challenge-title { font-family: 'Orbitron', sans-serif; font-size: 1.3rem; font-weight: 700; color: var(--text-primary); }
        .challenge-difficulty { padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; }
        .difficulty-easy { background: rgba(76, 175, 80, 0.2); color: #4CAF50; border: 1px solid rgba(76, 175, 80, 0.5); }
        .difficulty-medium { background: rgba(255, 193, 7, 0.2); color: #FFC107; border: 1px solid rgba(255, 193, 7, 0.5); }
        .difficulty-hard { background: rgba(244, 67, 54, 0.2); color: #F44336; border: 1px solid rgba(244, 67, 54, 0.5); }
        .challenge-description { color: var(--text-secondary); margin-bottom: 20px; flex-grow: 1; }
        .challenge-details { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .detail-item { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .detail-icon { font-size: 1.2rem; color: var(--accent-color); }
        .detail-value { font-size: 0.9rem; font-weight: 600; }
        .detail-label { font-size: 0.8rem; color: var(--text-muted); }
        .challenge-points { display: flex; align-items: center; justify-content: center; gap: 5px; margin-bottom: 20px; font-weight: 600; color: var(--accent-orange); }
        .challenge-btn { width: 100%; padding: 12px; background: var(--primary-gradient); border: none; border-radius: 8px; color: var(--bg-dark); font-family: 'Orbitron', sans-serif; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; }
        .challenge-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3); }
       
        /* Modals */
        .challenge-modal, .completion-modal, .loot-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .challenge-modal.active, .completion-modal.active, .loot-modal.active { opacity: 1; visibility: visible; }
        .modal-content, .completion-content, .loot-content { 
            background: rgba(1, 4, 9, 0.9); 
            backdrop-filter: blur(20px); 
            border: 1px solid var(--border-subtle); 
            padding: 20px; 
            max-width: 600px; 
            width: 90%; 
            position: relative; 
            transform: scale(0.8); 
            transition: transform 0.3s ease; 
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.2); 
            clip-path: polygon(0 20px, 20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
            max-height: 90vh;
            overflow-y: auto;
        }
        .challenge-modal.active .modal-content, .completion-modal.active .completion-content, .loot-modal.active .loot-content { transform: scale(1); }
        .modal-close { position: absolute; top: 15px; right: 15px; background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer; transition: color 0.3s ease; }
        .modal-close:hover { color: var(--text-primary); }
        .modal-title, .completion-title, .loot-title { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; font-weight: 700; margin-bottom: 15px; color: var(--text-primary); text-align: center; text-shadow: 0 0 10px var(--accent-color); }
        .modal-description, .completion-message, .loot-subtitle { color: var(--text-secondary); margin-bottom: 25px; text-align: center; }
       
        /* Timer & Progress Tracker */
        .timer-container { text-align: center; margin-bottom: 20px; }
        .timer-display { font-family: 'Orbitron', sans-serif; font-size: 2.5rem; font-weight: 700; color: var(--accent-color); margin-bottom: 10px; text-shadow: 0 0 15px rgba(0, 255, 255, 0.7); }
        .timer-progress { height: 10px; background: rgba(0, 0, 0, 0.5); border-radius: 5px; overflow: hidden; border: 1px solid var(--border-subtle); }
        .timer-progress-fill { height: 100%; width: 100%; background: var(--primary-gradient); border-radius: 5px; transition: width 1s linear; box-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
        .progress-tracker { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; padding: 15px; background: rgba(0, 0, 0, 0.5); border-radius: 15px; border: 1px solid var(--border-subtle); }
        .progress-step { display: flex; flex-direction: column; align-items: center; position: relative; flex: 1; text-align: center; }
        .progress-step:not(:last-child)::after { content: ''; position: absolute; top: 20px; left: 50%; width: 100%; height: 2px; background: var(--border-subtle); z-index: 1; transition: background 0.5s ease; }
        .progress-step.completed:not(:last-child)::after { background: var(--primary-gradient); box-shadow: 0 0 10px rgba(0, 255, 255, 0.5); }
        .step-icon { width: 40px; height: 40px; border-radius: 50%; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--border-subtle); display: flex; align-items: center; justify-content: center; margin-bottom: 10px; position: relative; z-index: 2; transition: all 0.3s ease; }
        .progress-step.completed .step-icon { background: var(--primary-gradient); border-color: var(--accent-color); animation: pulse 1s ease; box-shadow: 0 0 15px rgba(0, 255, 255, 0.5); }
        .step-label { font-size: 0.9rem; color: var(--text-secondary); transition: color 0.3s ease;}
        .progress-step.completed .step-label { color: var(--accent-color); }
       
        /* Modal Buttons */
        .modal-actions, .completion-actions, .loot-actions { display: flex; gap: 15px; justify-content: center; margin-top: 20px; }
        .modal-btn { font-family: 'Orbitron', sans-serif; padding: 12px 25px; border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; }
        .btn-complete { background: var(--primary-gradient); color: var(--bg-dark); }
        .btn-complete:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3); }
        .btn-quit { background: rgba(0, 0, 0, 0.5); color: var(--text-primary); border: 1px solid var(--border-subtle); }
        .btn-quit:hover { background: rgba(255, 255, 255, 0.1); border-color: rgba(0, 255, 255, 0.5); }
        .btn-yes { background: var(--primary-gradient); color: var(--bg-dark); }
        .btn-no { background: rgba(0, 0, 0, 0.5); color: var(--text-primary); border: 1px solid var(--border-subtle); }
       
        /* Loot Box Modal */
        .loot-boxes {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        .loot-box { width: 120px; height: 120px; background: rgba(0, 0, 0, 0.5); border: 3px solid var(--accent-orange); border-radius: 15px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .loot-box:hover:not(.disabled) { transform: scale(1.05); box-shadow: 0 0 30px rgba(255, 107, 53, 0.5); }
        .loot-box.disabled { cursor: not-allowed; opacity: 0.7; }
        .loot-box.opened { border-color: var(--accent-color); background: rgba(0, 255, 255, 0.1); }
        .loot-box.opened.empty { background: rgba(0, 0, 0, 0.5); border-color: var(--text-muted); }
        .loot-box.opening { animation: shake 0.5s ease; }
        .loot-box.spinning { animation: spin 2s linear infinite; }
        .loot-box-icon { font-size: 2.5rem; color: var(--accent-orange); transition: all 0.5s ease; }
        .loot-box.opened .loot-box-icon { color: var(--accent-color); }
        .loot-box.opened.empty .loot-box-icon { color: var(--text-muted); }
        .loot-item { display: none; flex-direction: column; align-items: center; gap: 15px; padding: 20px; background: rgba(0, 255, 255, 0.1); border-radius: 15px; margin-bottom: 20px; border: 1px solid var(--border-subtle); }
        .loot-item.show { display: flex; }
        .loot-item-icon { font-size: 3rem; color: var(--accent-color); filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.7)); }
        .loot-item-name { font-size: 1.2rem; font-weight: 700; color: var(--text-primary); }
        .loot-item-description { font-size: 0.9rem; color: var(--text-secondary); }
       
        /* Notification & Active Effects */
        .notification { position: fixed; top: 100px; right: 20px; background: rgba(1, 4, 9, 0.9); backdrop-filter: blur(20px); border: 1px solid var(--accent-color); border-radius: 10px; padding: 15px 20px; color: var(--text-primary); font-family: 'Montserrat', sans-serif; z-index: 5000; transform: translateX(400px); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); max-width: 300px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); }
        .notification.show { transform: translateX(0); }
        .notification::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--primary-gradient); border-radius: 4px 0 0 4px; }
        .notification-title { font-family: 'Orbitron', sans-serif; font-weight: 700; margin-bottom: 5px; color: var(--accent-color); }
        .notification-message { font-size: 0.9rem; color: var(--text-secondary); }
        .active-effects { position: fixed; bottom: 20px; left: 20px; background: rgba(1, 4, 9, 0.9); backdrop-filter: blur(20px); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 15px; z-index: 1000; max-width: 300px; opacity: 0; transition: opacity 0.5s ease; pointer-events: none; box-shadow: 0 0 30px rgba(0, 255, 255, 0.2); }
        .active-effects.show { opacity: 1; pointer-events: all; }
        .effects-title { font-family: 'Orbitron', sans-serif; font-size: 1rem; font-weight: 700; margin-bottom: 10px; color: var(--text-primary); text-shadow: 0 0 10px var(--accent-color); }
        .effect-item { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 0.9rem; color: var(--text-secondary); }
        .effect-icon { color: var(--accent-color); }
       
        /* Enhanced Game Animations */
        .game-animation-container {
            position: relative;
            width: 100%;
            height: 250px;
            margin: 15px 0;
            border-radius: 15px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-subtle);
        }
       
        /* Morning Stretch Animation - Enhanced */
        .stretch-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB, #1E90FF);
            overflow: hidden;
        }
       
        .sun {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            box-shadow: 0 0 40px #FFD700;
            animation: sunRise 10s ease-in-out infinite;
        }
       
        @keyframes sunRise {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }
       
        .stretch-person {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.5s ease;
        }
       
        .stretch-person.stretching {
            animation: stretchPerson 2s ease-in-out;
        }
       
        @keyframes stretchPerson {
            0%, 100% { transform: translateX(-50%) rotate(0deg); }
            25% { transform: translateX(-50%) rotate(-10deg); }
            75% { transform: translateX(-50%) rotate(10deg); }
        }
       
        .stretch-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #3498db, #2980b9);
            border-radius: 12px 12px 0 0;
        }
       
        .stretch-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .stretch-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .stretch-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .stretch-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .stretch-person.stretching .stretch-arm.left {
            animation: stretchArmLeft 2s ease-in-out;
        }
       
        .stretch-person.stretching .stretch-arm.right {
            animation: stretchArmRight 2s ease-in-out;
        }
       
        @keyframes stretchArmLeft {
            0%, 100% { transform: rotate(30deg); }
            50% { transform: rotate(-30deg); }
        }
       
        @keyframes stretchArmRight {
            0%, 100% { transform: rotate(-30deg); }
            50% { transform: rotate(30deg); }
        }
       
        .stretch-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .stretch-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .stretch-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .stretch-person.stretching .stretch-leg.left {
            animation: stretchLegLeft 2s ease-in-out;
        }
       
        .stretch-person.stretching .stretch-leg.right {
            animation: stretchLegRight 2s ease-in-out;
        }
       
        @keyframes stretchLegLeft {
            0%, 100% { transform: rotate(10deg); }
            50% { transform: rotate(-30deg); }
        }
       
        @keyframes stretchLegRight {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(30deg); }
        }
       
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
        }
       
        .cloud1 {
            top: 30px;
            left: 30px;
            width: 40px;
            height: 20px;
            animation: cloudMove 20s linear infinite;
        }
       
        .cloud2 {
            top: 60px;
            left: 150px;
            width: 60px;
            height: 30px;
            animation: cloudMove 25s linear infinite;
        }
       
        @keyframes cloudMove {
            0% { transform: translateX(0); }
            100% { transform: translateX(300px); }
        }
       
        /* Enhanced sweat particles */
        .sweat-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            opacity: 0;
            animation: sweatDrop 1.5s ease-out forwards;
        }
       
        @keyframes sweatDrop {
            0% { 
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            100% { 
                transform: translateY(30px) scale(1);
                opacity: 0;
            }
        }
       
        /* Quick Walk Animation - Enhanced */
        .walk-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB, #2E8B57);
            overflow: hidden;
        }
       
        .path {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: #8B4513;
            border-top: 3px solid #A0522D;
        }
       
        .tree {
            position: absolute;
            bottom: 40px;
            width: 30px;
            height: 80px;
            background: #8B4513;
            border-radius: 5px;
        }
       
        .tree::before {
            content: '';
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #228B22, #006400);
            border-radius: 50%;
        }
       
        .tree1 { left: 50px; }
        .tree2 { left: 200px; }
        .tree3 { left: 350px; }
       
        .walker {
            position: absolute;
            bottom: 40px;
            left: 20px;
            width: 40px;
            height: 80px;
            z-index: 2;
            transition: all 0.5s ease;
        }
       
        .walker.walking {
            animation: walkMove 5s linear forwards;
        }
       
        @keyframes walkMove {
            0% { left: 20px; }
            100% { left: calc(100% - 60px); }
        }
       
        .walker-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 50px;
            background: linear-gradient(to top, #e74c3c, #c0392b);
            border-radius: 10px 10px 0 0;
        }
       
        .walker-head {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 18px;
            height: 18px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .walker-arm {
            position: absolute;
            top: 5px;
            width: 6px;
            height: 30px;
            background: #f5cda7;
            border-radius: 3px;
            transform-origin: top center;
        }
       
        .walker-arm.left {
            left: -6px;
            animation: walkArmLeft 0.5s infinite alternate;
        }
       
        .walker-arm.right {
            right: -6px;
            animation: walkArmRight 0.5s infinite alternate;
        }
       
        @keyframes walkArmLeft {
            0% { transform: rotate(20deg); }
            100% { transform: rotate(-20deg); }
        }
       
        @keyframes walkArmRight {
            0% { transform: rotate(-20deg); }
            100% { transform: rotate(20deg); }
        }
       
        .walker-leg {
            position: absolute;
            bottom: -20px;
            width: 6px;
            height: 30px;
            background: #34495e;
            border-radius: 3px;
            transform-origin: top center;
        }
       
        .walker-leg.left {
            left: 4px;
            animation: walkLegLeft 0.5s infinite alternate;
        }
       
        .walker-leg.right {
            right: 4px;
            animation: walkLegRight 0.5s infinite alternate;
        }
       
        @keyframes walkLegLeft {
            0% { transform: rotate(-20deg); }
            100% { transform: rotate(20deg); }
        }
       
        @keyframes walkLegRight {
            0% { transform: rotate(20deg); }
            100% { transform: rotate(-20deg); }
        }
       
        .destination {
            position: absolute;
            bottom: 40px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
       
        .destination.reached {
            animation: destinationReached 1s ease;
        }
       
        @keyframes destinationReached {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); }
            100% { transform: scale(1); }
        }
       
        /* Footprints effect */
        .footprint {
            position: absolute;
            bottom: 15px;
            width: 12px;
            height: 20px;
            background: rgba(52, 73, 94, 0.4);
            border-radius: 50% 50% 0 0;
            opacity: 0;
        }
       
        .walker.walking .footprint {
            animation: footprintAppear 0.5s ease-out forwards;
        }
       
        @keyframes footprintAppear {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }
       
        /* Jumping Jacks Animation - Enhanced */
        .jumping-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            overflow: hidden;
        }
       
        .jumper {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .jumper.jumping {
            animation: jump 1s ease-in-out infinite;
        }
       
        @keyframes jump {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-50px); }
        }
       
        .jumper-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #e67e22, #d35400);
            border-radius: 12px 12px 0 0;
        }
       
        .jumper-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .jumper-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .jumper-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .jumper-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .jumper.jumping .jumper-arm.left {
            animation: jumpArmLeft 1s ease-in-out infinite;
        }
       
        .jumper.jumping .jumper-arm.right {
            animation: jumpArmRight 1s ease-in-out infinite;
        }
       
        @keyframes jumpArmLeft {
            0%, 100% { transform: rotate(30deg); }
            50% { transform: rotate(-90deg); }
        }
       
        @keyframes jumpArmRight {
            0%, 100% { transform: rotate(-30deg); }
            50% { transform: rotate(90deg); }
        }
       
        .jumper-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .jumper-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .jumper-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .jumper.jumping .jumper-leg.left {
            animation: jumpLegLeft 1s ease-in-out infinite;
        }
       
        .jumper.jumping .jumper-leg.right {
            animation: jumpLegRight 1s ease-in-out infinite;
        }
       
        @keyframes jumpLegLeft {
            0%, 100% { transform: rotate(10deg); }
            50% { transform: rotate(-30deg); }
        }
       
        @keyframes jumpLegRight {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(30deg); }
        }
       
        .star {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #FFD700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            opacity: 0;
            animation: starAppear 2s ease-in-out infinite;
        }
       
        .star1 { top: 20px; left: 30%; animation-delay: 0.2s; }
        .star2 { top: 40px; left: 60%; animation-delay: 0.5s; }
        .star3 { top: 60px; left: 40%; animation-delay: 0.8s; }
       
        @keyframes starAppear {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }
       
        /* Enhanced energy burst effect */
        .energy-burst {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.8), rgba(255, 140, 0, 0.4), transparent);
            border-radius: 50%;
            opacity: 0;
            z-index: 1;
        }
       
        .jumper.jumping .energy-burst {
            animation: energyBurst 1s ease-in-out infinite;
        }
       
        @keyframes energyBurst {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
       
        /* Bodyweight Squats Animation - Enhanced */
        .squat-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            overflow: hidden;
        }
       
        .squatter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .squatter.squatting {
            animation: squat 2s ease-in-out infinite;
        }
       
        @keyframes squat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-30px); }
        }
       
        .squatter-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #3498db, #2980b9);
            border-radius: 12px 12px 0 0;
        }
       
        .squatter-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .squatter-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .squatter-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .squatter-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .squatter.squatting .squatter-arm.left {
            animation: squatArmLeft 2s ease-in-out infinite;
        }
       
        .squatter.squatting .squatter-arm.right {
            animation: squatArmRight 2s ease-in-out infinite;
        }
       
        @keyframes squatArmLeft {
            0%, 100% { transform: rotate(30deg); }
            50% { transform: rotate(60deg); }
        }
       
        @keyframes squatArmRight {
            0%, 100% { transform: rotate(-30deg); }
            50% { transform: rotate(-60deg); }
        }
       
        .squatter-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .squatter-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .squatter-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .squatter.squatting .squatter-leg.left {
            animation: squatLegLeft 2s ease-in-out infinite;
        }
       
        .squatter.squatting .squatter-leg.right {
            animation: squatLegRight 2s ease-in-out infinite;
        }
       
        @keyframes squatLegLeft {
            0%, 100% { transform: rotate(10deg); }
            50% { transform: rotate(90deg); }
        }
       
        @keyframes squatLegRight {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(-90deg); }
        }
       
        .squat-counter {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
       
        .squat-target {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 10px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }
       
        .squat-target-fill {
            height: 100%;
            width: 0%;
            background: var(--primary-gradient);
            border-radius: 5px;
            transition: width 0.5s ease;
        }
       
        /* Enhanced ground impact effect */
        .ground-impact {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 20px;
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.5), transparent);
            border-radius: 50%;
            opacity: 0;
        }
       
        .squatter.squatting .ground-impact {
            animation: groundImpact 2s ease-in-out infinite;
        }
       
        @keyframes groundImpact {
            0%, 100% { opacity: 0; transform: translateX(-50%) scale(0.5); }
            50% { opacity: 1; transform: translateX(-50%) scale(1); }
        }
       
        /* Plank Hold Animation - Enhanced */
        .plank-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #34495e, #2c3e50);
            overflow: hidden;
        }
       
        .planker {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%) rotate(90deg);
            width: 100px;
            height: 50px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .planker.planking {
            animation: plankHold 5s ease-in-out;
        }
       
        @keyframes plankHold {
            0%, 100% { transform: translateX(-50%) rotate(90deg); }
            50% { transform: translateX(-50%) rotate(85deg); }
        }
       
        .planker-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 30px;
            background: linear-gradient(to top, #9b59b6, #8e44ad);
            border-radius: 15px;
        }
       
        .planker-head {
            position: absolute;
            top: -15px;
            left: 10px;
            width: 20px;
            height: 20px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .planker-arm {
            position: absolute;
            top: 5px;
            width: 6px;
            height: 25px;
            background: #f5cda7;
            border-radius: 3px;
        }
       
        .planker-arm.left {
            left: 5px;
        }
       
        .planker-arm.right {
            right: 5px;
        }
       
        .planker-leg {
            position: absolute;
            bottom: -5px;
            width: 6px;
            height: 25px;
            background: #34495e;
            border-radius: 3px;
        }
       
        .planker-leg.left {
            left: 15px;
        }
       
        .planker-leg.right {
            right: 15px;
        }
       
        .plank-timer {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
       
        .plank-progress {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 10px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }
       
        .plank-progress-fill {
            height: 100%;
            width: 0%;
            background: var(--primary-gradient);
            border-radius: 5px;
            transition: width 0.1s linear;
        }
       
        /* Enhanced muscle strain effect */
        .muscle-strain {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 60px;
            background: radial-gradient(ellipse at center, rgba(155, 89, 182, 0.3), transparent);
            border-radius: 50%;
            opacity: 0;
            z-index: 1;
        }
       
        .planker.planking .muscle-strain {
            animation: muscleStrain 5s ease-in-out;
        }
       
        @keyframes muscleStrain {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        }
       
        /* Push-up Challenge Animation - Enhanced */
        .pushup-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            overflow: hidden;
        }
       
        .ground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: #7f8c8d;
            border-top: 2px solid #95a5a6;
        }
       
        .pushupper {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 40px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .pushupper.pushupping {
            animation: pushup 2s ease-in-out infinite;
        }
       
        @keyframes pushup {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(20px); }
        }
       
        .pushupper-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 25px;
            background: linear-gradient(to top, #e74c3c, #c0392b);
            border-radius: 12px;
        }
       
        .pushupper-head {
            position: absolute;
            top: -12px;
            left: 10px;
            width: 18px;
            height: 18px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .pushupper-arm {
            position: absolute;
            top: 5px;
            width: 5px;
            height: 20px;
            background: #f5cda7;
            border-radius: 3px;
        }
       
        .pushupper-arm.left {
            left: 5px;
            transform: rotate(20deg);
        }
       
        .pushupper-arm.right {
            right: 5px;
            transform: rotate(-20deg);
        }
       
        .pushupper-leg {
            position: absolute;
            bottom: -5px;
            width: 5px;
            height: 20px;
            background: #34495e;
            border-radius: 3px;
        }
       
        .pushupper-leg.left {
            left: 15px;
        }
       
        .pushupper-leg.right {
            right: 15px;
        }
       
        .pushup-effect {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 20px;
            background: rgba(231, 76, 60, 0.3);
            border-radius: 50%;
            opacity: 0;
        }
       
        .pushupper.pushupping .pushup-effect {
            animation: pushupEffect 2s ease-in-out infinite;
        }
       
        @keyframes pushupEffect {
            0%, 100% { opacity: 0; transform: translateX(-50%) scale(0.5); }
            50% { opacity: 1; transform: translateX(-50%) scale(1); }
        }
       
        /* Enhanced strength lines effect */
        .strength-lines {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 40px;
            opacity: 0;
            z-index: 1;
        }
       
        .strength-line {
            position: absolute;
            height: 2px;
            width: 100%;
            background: linear-gradient(to right, transparent, rgba(231, 76, 60, 0.8), transparent);
            top: 50%;
            left: 0;
            transform: translateY(-50%);
        }
       
        .strength-line:nth-child(2) {
            top: 30%;
            transform: translateY(-50%) rotate(-5deg);
        }
       
        .strength-line:nth-child(3) {
            top: 70%;
            transform: translateY(-50%) rotate(5deg);
        }
       
        .pushupper.pushupping .strength-lines {
            animation: strengthLines 2s ease-in-out infinite;
        }
       
        @keyframes strengthLines {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
       
        /* Lunges Animation - Enhanced */
        .lunge-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            overflow: hidden;
        }
       
        .lunger {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .lunger.lunging {
            animation: lunge 3s ease-in-out infinite;
        }
       
        @keyframes lunge {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            25% { transform: translateX(-50%) translateY(0) rotate(-10deg); }
            75% { transform: translateX(-50%) translateY(0) rotate(10deg); }
        }
       
        .lunger-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #f39c12, #e67e22);
            border-radius: 12px 12px 0 0;
        }
       
        .lunger-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .lunger-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .lunger-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .lunger-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .lunger.lunging .lunger-arm.left {
            animation: lungeArmLeft 3s ease-in-out infinite;
        }
       
        .lunger.lunging .lunger-arm.right {
            animation: lungeArmRight 3s ease-in-out infinite;
        }
       
        @keyframes lungeArmLeft {
            0%, 100% { transform: rotate(30deg); }
            25% { transform: rotate(60deg); }
            75% { transform: rotate(0deg); }
        }
       
        @keyframes lungeArmRight {
            0%, 100% { transform: rotate(-30deg); }
            25% { transform: rotate(0deg); }
            75% { transform: rotate(-60deg); }
        }
       
        .lunger-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .lunger-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .lunger-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .lunger.lunging .lunger-leg.left {
            animation: lungeLegLeft 3s ease-in-out infinite;
        }
       
        .lunger.lunging .lunger-leg.right {
            animation: lungeLegRight 3s ease-in-out infinite;
        }
       
        @keyframes lungeLegLeft {
            0%, 100% { transform: rotate(10deg); }
            25% { transform: rotate(90deg); }
            75% { transform: rotate(-30deg); }
        }
       
        @keyframes lungeLegRight {
            0%, 100% { transform: rotate(-10deg); }
            25% { transform: rotate(-30deg); }
            75% { transform: rotate(90deg); }
        }
       
        .footprint {
            position: absolute;
            bottom: 20px;
            width: 15px;
            height: 25px;
            background: rgba(52, 73, 94, 0.5);
            border-radius: 50% 50% 0 0;
            opacity: 0;
        }
       
        .footprint1 { left: 30%; animation: footprintAppear 3s ease-in-out infinite; animation-delay: 0.5s; }
        .footprint2 { left: 50%; animation: footprintAppear 3s ease-in-out infinite; animation-delay: 1.5s; }
        .footprint3 { left: 70%; animation: footprintAppear 3s ease-in-out infinite; animation-delay: 2.5s; }
       
        @keyframes footprintAppear {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
       
        /* Enhanced motion trail effect */
        .motion-trail {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 100px;
            opacity: 0;
            z-index: 1;
        }
       
        .motion-trail-line {
            position: absolute;
            height: 2px;
            width: 100%;
            background: linear-gradient(to right, transparent, rgba(243, 156, 18, 0.6), transparent);
            top: 50%;
            left: 0;
            transform: translateY(-50%);
        }
       
        .motion-trail-line:nth-child(2) {
            top: 30%;
            transform: translateY(-50%) rotate(-5deg);
        }
       
        .motion-trail-line:nth-child(3) {
            top: 70%;
            transform: translateY(-50%) rotate(5deg);
        }
       
        .lunger.lunging .motion-trail {
            animation: motionTrail 3s ease-in-out infinite;
        }
       
        @keyframes motionTrail {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
       
        /* Burpees Animation - Enhanced */
        .burpee-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            overflow: hidden;
        }
       
        .burpeeer {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .burpeeer.burpeeing {
            animation: burpee 3s ease-in-out infinite;
        }
       
        @keyframes burpee {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            25% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            50% { transform: translateX(-50%) translateY(-40px) rotate(0deg); }
            75% { transform: translateX(-50%) translateY(0) rotate(0deg); }
        }
       
        .burpeeer-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #e74c3c, #c0392b);
            border-radius: 12px 12px 0 0;
        }
       
        .burpeeer-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .burpeeer-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .burpeeer-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .burpeeer-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .burpeeer.burpeeing .burpeeer-arm.left {
            animation: burpeeArmLeft 3s ease-in-out infinite;
        }
       
        .burpeeer.burpeeing .burpeeer-arm.right {
            animation: burpeeArmRight 3s ease-in-out infinite;
        }
       
        @keyframes burpeeArmLeft {
            0%, 100% { transform: rotate(30deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(-90deg); }
            75% { transform: rotate(90deg); }
        }
       
        @keyframes burpeeArmRight {
            0%, 100% { transform: rotate(-30deg); }
            25% { transform: rotate(-90deg); }
            50% { transform: rotate(90deg); }
            75% { transform: rotate(-90deg); }
        }
       
        .burpeeer-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .burpeeer-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .burpeeer-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .burpeeer.burpeeing .burpeeer-leg.left {
            animation: burpeeLegLeft 3s ease-in-out infinite;
        }
       
        .burpeeer.burpeeing .burpeeer-leg.right {
            animation: burpeeLegRight 3s ease-in-out infinite;
        }
       
        @keyframes burpeeLegLeft {
            0%, 100% { transform: rotate(10deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(90deg); }
        }
       
        @keyframes burpeeLegRight {
            0%, 100% { transform: rotate(-10deg); }
            25% { transform: rotate(-90deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-90deg); }
        }
       
        .fire-effect {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(255, 69, 0, 0.8), rgba(255, 140, 0, 0.4), transparent);
            border-radius: 50%;
            opacity: 0;
        }
       
        .burpeeer.burpeeing .fire-effect {
            animation: fireEffect 3s ease-in-out infinite;
        }
       
        @keyframes fireEffect {
            0%, 100% { opacity: 0; transform: translateX(-50%) scale(0.5); }
            50% { opacity: 1; transform: translateX(-50%) scale(1); }
        }
       
        /* Enhanced explosion effect */
        .explosion {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            opacity: 0;
            z-index: 1;
        }
       
        .explosion-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid rgba(255, 69, 0, 0.8);
            border-radius: 50%;
            top: 0;
            left: 0;
        }
       
        .explosion-ring:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border-color: rgba(255, 140, 0, 0.6);
        }
       
        .explosion-ring:nth-child(3) {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            border-color: rgba(255, 215, 0, 0.4);
        }
       
        .burpeeer.burpeeing .explosion {
            animation: explosion 3s ease-in-out infinite;
        }
       
        @keyframes explosion {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
       
        /* Mountain Climbers Animation - Enhanced */
        .climber-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB, #1E90FF);
            overflow: hidden;
        }
       
        .mountain {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(to top, #8B4513, #A0522D);
            clip-path: polygon(0 100%, 20% 60%, 40% 80%, 60% 40%, 80% 70%, 100% 50%, 100% 100%);
        }
       
        .climber {
            position: absolute;
            bottom: 150px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .climber.climbing {
            animation: climb 3s ease-in-out infinite;
        }
       
        @keyframes climb {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-30px); }
        }
       
        .climber-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #3498db, #2980b9);
            border-radius: 12px 12px 0 0;
        }
       
        .climber-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .climber-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .climber-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .climber-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .climber.climbing .climber-arm.left {
            animation: climbArmLeft 0.5s infinite alternate;
        }
       
        .climber.climbing .climber-arm.right {
            animation: climbArmRight 0.5s infinite alternate;
        }
       
        @keyframes climbArmLeft {
            0% { transform: rotate(30deg); }
            100% { transform: rotate(-30deg); }
        }
       
        @keyframes climbArmRight {
            0% { transform: rotate(-30deg); }
            100% { transform: rotate(30deg); }
        }
       
        .climber-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .climber-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .climber-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .climber.climbing .climber-leg.left {
            animation: climbLegLeft 0.5s infinite alternate;
        }
       
        .climber.climbing .climber-leg.right {
            animation: climbLegRight 0.5s infinite alternate;
        }
       
        @keyframes climbLegLeft {
            0% { transform: rotate(10deg); }
            100% { transform: rotate(60deg); }
        }
       
        @keyframes climbLegRight {
            0% { transform: rotate(-10deg); }
            100% { transform: rotate(-60deg); }
        }
       
        .climber-progress {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 10px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }
       
        .climber-progress-fill {
            height: 100%;
            width: 0%;
            background: var(--primary-gradient);
            border-radius: 5px;
            transition: width 0.1s linear;
        }
       
        /* Enhanced mountain peak effect */
        .mountain-peak {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 200px solid rgba(52, 73, 94, 0.5);
            z-index: 1;
        }
       
        /* Enhanced climbing rope effect */
        .climbing-rope {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #8B4513, #A0522D);
            z-index: 1;
        }
       
        /* Bicycle Crunches Animation - Enhanced */
        .crunch-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            overflow: hidden;
        }
       
        .cruncher {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 40px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .cruncher.crunching {
            animation: crunch 2s ease-in-out infinite;
        }
       
        @keyframes crunch {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            50% { transform: translateX(-50%) translateY(10px) rotate(5deg); }
        }
       
        .cruncher-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 25px;
            background: linear-gradient(to top, #9b59b6, #8e44ad);
            border-radius: 12px;
        }
       
        .cruncher-head {
            position: absolute;
            top: -12px;
            left: 10px;
            width: 18px;
            height: 18px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .cruncher-arm {
            position: absolute;
            top: 5px;
            width: 5px;
            height: 20px;
            background: #f5cda7;
            border-radius: 3px;
        }
       
        .cruncher-arm.left {
            left: 5px;
            transform: rotate(20deg);
        }
       
        .cruncher-arm.right {
            right: 5px;
            transform: rotate(-20deg);
        }
       
        .cruncher-leg {
            position: absolute;
            bottom: -5px;
            width: 5px;
            height: 20px;
            background: #34495e;
            border-radius: 3px;
        }
       
        .cruncher-leg.left {
            left: 15px;
        }
       
        .cruncher-leg.right {
            right: 15px;
        }
       
        .wheel {
            position: absolute;
            bottom: 10px;
            width: 30px;
            height: 30px;
            border: 3px solid #95a5a6;
            border-radius: 50%;
            opacity: 0;
        }
       
        .wheel1 { left: 30%; animation: wheelSpin 2s ease-in-out infinite; animation-delay: 0.2s; }
        .wheel2 { left: 50%; animation: wheelSpin 2s ease-in-out infinite; animation-delay: 0.7s; }
        .wheel3 { left: 70%; animation: wheelSpin 2s ease-in-out infinite; animation-delay: 1.2s; }
       
        @keyframes wheelSpin {
            0%, 100% { opacity: 0; transform: rotate(0deg); }
            50% { opacity: 1; transform: rotate(180deg); }
        }
       
        /* Enhanced cycling motion effect */
        .cycling-motion {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 40px;
            opacity: 0;
            z-index: 1;
        }
       
        .cycling-line {
            position: absolute;
            height: 2px;
            width: 100%;
            background: linear-gradient(to right, transparent, rgba(155, 89, 182, 0.6), transparent);
            top: 50%;
            left: 0;
            transform: translateY(-50%);
        }
       
        .cycling-line:nth-child(2) {
            top: 30%;
            transform: translateY(-50%) rotate(-5deg);
        }
       
        .cycling-line:nth-child(3) {
            top: 70%;
            transform: translateY(-50%) rotate(5deg);
        }
       
        .cruncher.crunching .cycling-motion {
            animation: cyclingMotion 2s ease-in-out infinite;
        }
       
        @keyframes cyclingMotion {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
       
        /* HIIT Circuit Animation - Enhanced */
        .hiit-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #e74c3c, #c0392b);
            overflow: hidden;
        }
       
        .hiiter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .hiiter.hiiiting {
            animation: hiit 4s ease-in-out infinite;
        }
       
        @keyframes hiit {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            25% { transform: translateX(-50%) translateY(-40px); }
            50% { transform: translateX(-50%) translateY(0); }
            75% { transform: translateX(-50%) translateY(-20px); }
        }
       
        .hiiter-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #f39c12, #e67e22);
            border-radius: 12px 12px 0 0;
        }
       
        .hiiter-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .hiiter-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .hiiter-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .hiiter-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .hiiter.hiiiting .hiiter-arm.left {
            animation: hiitArmLeft 4s ease-in-out infinite;
        }
       
        .hiiter.hiiiting .hiiter-arm.right {
            animation: hiitArmRight 4s ease-in-out infinite;
        }
       
        @keyframes hiitArmLeft {
            0%, 100% { transform: rotate(30deg); }
            25% { transform: rotate(-90deg); }
            50% { transform: rotate(90deg); }
            75% { transform: rotate(-30deg); }
        }
       
        @keyframes hiitArmRight {
            0%, 100% { transform: rotate(-30deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(-90deg); }
            75% { transform: rotate(30deg); }
        }
       
        .hiiter-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .hiiter-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .hiiter-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .hiiter.hiiiting .hiiter-leg.left {
            animation: hiitLegLeft 4s ease-in-out infinite;
        }
       
        .hiiter.hiiiting .hiiter-leg.right {
            animation: hiitLegRight 4s ease-in-out infinite;
        }
       
        @keyframes hiitLegLeft {
            0%, 100% { transform: rotate(10deg); }
            25% { transform: rotate(-60deg); }
            50% { transform: rotate(60deg); }
            75% { transform: rotate(-30deg); }
        }
       
        @keyframes hiitLegRight {
            0%, 100% { transform: rotate(-10deg); }
            25% { transform: rotate(60deg); }
            50% { transform: rotate(-60deg); }
            75% { transform: rotate(30deg); }
        }
       
        .fire-trail {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, transparent, #FFD700, #FFA500, transparent);
            opacity: 0;
        }
       
        .hiiter.hiiiting .fire-trail {
            animation: fireTrail 4s ease-in-out infinite;
        }
       
        @keyframes fireTrail {
            0%, 100% { opacity: 0; }
            25%, 75% { opacity: 1; }
        }
       
        .hiit-timer {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
       
        /* Enhanced energy waves effect */
        .energy-wave {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 2px solid rgba(255, 215, 0, 0.6);
            opacity: 0;
            z-index: 1;
        }
       
        .hiiter.hiiiting .energy-wave {
            animation: energyWave 4s ease-in-out infinite;
        }
       
        @keyframes energyWave {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            25%, 75% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
       
        /* Pull-up Challenge Animation - Enhanced */
        .pullup-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #34495e, #2c3e50);
            overflow: hidden;
        }
       
        .pullup-bar {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 10px;
            background: #7f8c8d;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
       
        .pullupper {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .pullupper.pullupping {
            animation: pullup 2s ease-in-out infinite;
        }
       
        @keyframes pullup {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(40px); }
        }
       
        .pullupper-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #3498db, #2980b9);
            border-radius: 12px 12px 0 0;
        }
       
        .pullupper-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .pullupper-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .pullupper-arm.left {
            left: -8px;
            transform: rotate(90deg);
        }
       
        .pullupper-arm.right {
            right: -8px;
            transform: rotate(-90deg);
        }
       
        .pullupper.pullupping .pullupper-arm.left {
            animation: pullupArmLeft 2s ease-in-out infinite;
        }
       
        .pullupper.pullupping .pullupper-arm.right {
            animation: pullupArmRight 2s ease-in-out infinite;
        }
       
        @keyframes pullupArmLeft {
            0%, 100% { transform: rotate(90deg); }
            50% { transform: rotate(120deg); }
        }
       
        @keyframes pullupArmRight {
            0%, 100% { transform: rotate(-90deg); }
            50% { transform: rotate(-120deg); }
        }
       
        .strength-meter {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 15px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 7px;
            overflow: hidden;
        }
       
        .strength-meter-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 7px;
            transition: width 0.5s ease;
        }
       
        /* Enhanced muscle tension effect */
        .muscle-tension {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 100px;
            opacity: 0;
            z-index: 1;
        }
       
        .muscle-tension-line {
            position: absolute;
            height: 2px;
            width: 100%;
            background: linear-gradient(to right, transparent, rgba(52, 152, 219, 0.8), transparent);
            top: 50%;
            left: 0;
            transform: translateY(-50%);
        }
       
        .muscle-tension-line:nth-child(2) {
            top: 30%;
            transform: translateY(-50%) rotate(-5deg);
        }
       
        .muscle-tension-line:nth-child(3) {
            top: 70%;
            transform: translateY(-50%) rotate(5deg);
        }
       
        .pullupper.pullupping .muscle-tension {
            animation: muscleTension 2s ease-in-out infinite;
        }
       
        @keyframes muscleTension {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
       
        /* Pistol Squats Animation - Enhanced */
        .pistol-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2c3e50, #34495e);
            overflow: hidden;
        }
       
        .pistoler {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .pistoler.pistoling {
            animation: pistol 3s ease-in-out infinite;
        }
       
        @keyframes pistol {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            50% { transform: translateX(-50%) translateY(-30px) rotate(5deg); }
        }
       
        .pistoler-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #e74c3c, #c0392b);
            border-radius: 12px 12px 0 0;
        }
       
        .pistoler-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .pistoler-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .pistoler-arm.left {
            left: -8px;
            transform: rotate(30deg);
        }
       
        .pistoler-arm.right {
            right: -8px;
            transform: rotate(-30deg);
        }
       
        .pistoler.pistoling .pistoler-arm.left {
            animation: pistolArmLeft 3s ease-in-out infinite;
        }
       
        .pistoler.pistoling .pistoler-arm.right {
            animation: pistolArmRight 3s ease-in-out infinite;
        }
       
        @keyframes pistolArmLeft {
            0%, 100% { transform: rotate(30deg); }
            50% { transform: rotate(60deg); }
        }
       
        @keyframes pistolArmRight {
            0%, 100% { transform: rotate(-30deg); }
            50% { transform: rotate(-60deg); }
        }
       
        .pistoler-leg {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .pistoler-leg.left {
            left: 6px;
            transform: rotate(10deg);
        }
       
        .pistoler-leg.right {
            right: 6px;
            transform: rotate(-10deg);
        }
       
        .pistoler.pistoling .pistoler-leg.left {
            animation: pistolLegLeft 3s ease-in-out infinite;
        }
       
        .pistoler.pistoling .pistoler-leg.right {
            animation: pistolLegRight 3s ease-in-out infinite;
        }
       
        @keyframes pistolLegLeft {
            0%, 100% { transform: rotate(10deg); }
            50% { transform: rotate(90deg); }
        }
       
        @keyframes pistolLegRight {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
        }
       
        .balance-meter {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 15px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 7px;
            overflow: hidden;
        }
       
        .balance-meter-fill {
            height: 100%;
            width: 50%;
            background: linear-gradient(to right, #e74c3c, #f39c12, #2ecc71);
            border-radius: 7px;
            transition: width 0.5s ease;
        }
       
        .pistoler.pistoling .balance-meter-fill {
            animation: balanceMeter 3s ease-in-out infinite;
        }
       
        @keyframes balanceMeter {
            0%, 100% { width: 50%; }
            25% { width: 30%; }
            75% { width: 70%; }
        }
       
        /* Enhanced balance indicator effect */
        .balance-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            opacity: 0;
            z-index: 1;
        }
       
        .balance-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(231, 76, 60, 0.6);
            border-radius: 50%;
            top: 0;
            left: 0;
        }
       
        .balance-circle:nth-child(2) {
            width: 70%;
            height: 70%;
            top: 15%;
            left: 15%;
            border-color: rgba(243, 156, 18, 0.6);
        }
       
        .balance-circle:nth-child(3) {
            width: 40%;
            height: 40%;
            top: 30%;
            left: 30%;
            border-color: rgba(46, 204, 113, 0.6);
        }
       
        .pistoler.pistoling .balance-indicator {
            animation: balanceIndicator 3s ease-in-out infinite;
        }
       
        @keyframes balanceIndicator {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
       
        /* Handstand Hold Animation - Enhanced */
        .handstand-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #34495e, #2c3e50);
            overflow: hidden;
        }
       
        .handstander {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) rotate(180deg);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .handstander.handstanding {
            animation: handstand 5s ease-in-out;
        }
       
        @keyframes handstand {
            0%, 100% { transform: translateX(-50%) rotate(180deg); }
            50% { transform: translateX(-50%) rotate(175deg); }
        }
       
        .handstander-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #9b59b6, #8e44ad);
            border-radius: 12px 12px 0 0;
        }
       
        .handstander-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .handstander-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
        }
       
        .handstander-arm.left {
            left: -8px;
            transform: rotate(-30deg);
        }
       
        .handstander-arm.right {
            right: -8px;
            transform: rotate(30deg);
        }
       
        .handstander.leg {
            position: absolute;
            top: -20px;
            width: 8px;
            height: 40px;
            background: #34495e;
            border-radius: 4px;
        }
       
        .handstander-leg.left {
            left: 6px;
            transform: rotate(-10deg);
        }
       
        .handstander-leg.right {
            right: 6px;
            transform: rotate(10deg);
        }
       
        .handstand-timer {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
       
        .handstand-progress {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 10px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }
       
        .handstand-progress-fill {
            height: 100%;
            width: 0%;
            background: var(--primary-gradient);
            border-radius: 5px;
            transition: width 0.1s linear;
        }
       
        /* Enhanced focus effect */
        .focus-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(155, 89, 182, 0.3), transparent);
            border-radius: 50%;
            opacity: 0;
            z-index: 1;
        }
       
        .handstander.handstanding .focus-effect {
            animation: focusEffect 5s ease-in-out;
        }
       
        @keyframes focusEffect {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        }
       
        /* Muscle-up Progress Animation - Enhanced */
        .muscleup-scene {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #34495e, #2c3e50);
            overflow: hidden;
        }
       
        .muscleup-bar {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 10px;
            background: #7f8c8d;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
       
        .muscleupper {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 100px;
            z-index: 2;
            transition: all 0.3s ease;
        }
       
        .muscleupper.muscleupping {
            animation: muscleup 3s ease-in-out infinite;
        }
       
        @keyframes muscleup {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            33% { transform: translateX(-50%) translateY(20px); }
            66% { transform: translateX(-50%) translateY(40px); }
        }
       
        .muscleupper-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 60px;
            background: linear-gradient(to top, #e74c3c, #c0392b);
            border-radius: 12px 12px 0 0;
        }
       
        .muscleupper-head {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 22px;
            height: 22px;
            background: #f5cda7;
            border-radius: 50%;
        }
       
        .muscleupper-arm {
            position: absolute;
            top: 10px;
            width: 8px;
            height: 40px;
            background: #f5cda7;
            border-radius: 4px;
            transform-origin: top center;
        }
       
        .muscleupper-arm.left {
            left: -8px;
            transform: rotate(90deg);
        }
       
        .muscleupper-arm.right {
            right: -8px;
            transform: rotate(-90deg);
        }
       
        .muscleupper.muscleupping .muscleupper-arm.left {
            animation: muscleupArmLeft 3s ease-in-out infinite;
        }
       
        .muscleupper.muscleupping .muscleupper-arm.right {
            animation: muscleupArmRight 3s ease-in-out infinite;
        }
       
        @keyframes muscleupArmLeft {
            0%, 100% { transform: rotate(90deg); }
            33% { transform: rotate(120deg); }
            66% { transform: rotate(60deg); }
        }
       
        @keyframes muscleupArmRight {
            0%, 100% { transform: rotate(-90deg); }
            33% { transform: rotate(-120deg); }
            66% { transform: rotate(-60deg); }
        }
       
        .dragon-effect {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(231, 76, 60, 0.8), rgba(255, 140, 0, 0.4), transparent);
            border-radius: 50%;
            opacity: 0;
        }
       
        .muscleupper.muscleupping .dragon-effect {
            animation: dragonEffect 3s ease-in-out infinite;
        }
       
        @keyframes dragonEffect {
            0%, 100% { opacity: 0; transform: translateX(-50%) scale(0.5); }
            66% { opacity: 1; transform: translateX(-50%) scale(1); }
        }
       
        .strength-meter {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 15px;
            background: rgba(0, 255, 255, 0.3);
            border-radius: 7px;
            overflow: hidden;
        }
       
        .strength-meter-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #e74c3c, #f39c12);
            border-radius: 7px;
            transition: width 0.5s ease;
        }
       
        .muscleupper.muscleupping .strength-meter-fill {
            animation: strengthMeter 3s ease-in-out infinite;
        }
       
        @keyframes strengthMeter {
            0%, 100% { width: 0%; }
            33% { width: 50%; }
            66% { width: 100%; }
        }
       
        /* Enhanced power surge effect */
        .power-surge {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            opacity: 0;
            z-index: 1;
        }
       
        .power-surge-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid rgba(231, 76, 60, 0.8);
            border-radius: 50%;
            top: 0;
            left: 0;
        }
       
        .power-surge-ring:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border-color: rgba(255, 140, 0, 0.6);
        }
       
        .power-surge-ring:nth-child(3) {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            border-color: rgba(255, 215, 0, 0.4);
        }
       
        .muscleupper.muscleupping .power-surge {
            animation: powerSurge 3s ease-in-out infinite;
        }
       
        @keyframes powerSurge {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            66% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
       
        /* Animations */
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.8; } }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes spin-reverse { from { transform: rotate(0deg) scale(0.8); } to { transform: rotate(-360deg) scale(0.8); } }
        @keyframes pulse-grow { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes loadingPulse { 0%, 100% { transform: scaleY(0.5); } 50% { transform: scaleY(1); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes glassBreak { 0% { transform: scale(0); opacity: 1; } 50% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.2); opacity: 0; } }
        @keyframes shardFly { 0% { transform: translate(0, 0) rotate(0deg); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) rotate(var(--rotation)); opacity: 0; } }
        @keyframes smash { 0% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) scale(0) rotate(720deg); opacity: 0; } }
        @keyframes particle-float { 0% { opacity: 0; transform: translateY(0) scale(0); } 10% { opacity: 1; } 90% { opacity: 1; } 100% { opacity: 0; transform: translateY(-100px) scale(1.5); } }
        @keyframes glitch-anim-1 { 0% { clip: rect(25px, 9999px, 83px, 0); } 10% { clip: rect(3px, 9999px, 89px, 0); } 20% { clip: rect(44px, 9999px, 15px, 0); } 30% { clip: rect(63px, 9999px, 35px, 0); } 40% { clip: rect(13px, 9999px, 73px, 0); } 50% { clip: rect(65px, 9999px, 38px, 0); } 60% { clip: rect(8px, 9999px, 98px, 0); } 70% { clip: rect(46px, 9999px, 33px, 0); } 80% { clip: rect(100px, 9999px, 5px, 0); } 90% { clip: rect(59px, 9999px, 43px, 0); } 100% { clip: rect(23px, 9999px, 59px, 0); } }
        @keyframes glitch-anim-2 { 0% { clip: rect(7px, 9999px, 92px, 0); } 10% { clip: rect(81px, 9999px, 98px, 0); } 20% { clip: rect(6px, 9999px, 57px, 0); } 30% { clip: rect(88px, 9999px, 4px, 0); } 40% { clip: rect(51px, 9999px, 95px, 0); } 50% { clip: rect(2px, 9999px, 79px, 0); } 60% { clip: rect(92px, 9999px, 100px, 0); } 70% { clip: rect(30px, 9999px, 1px, 0); } 80% { clip: rect(4px, 9999px, 45px, 0); } 90% { clip: rect(11px, 9999px, 86px, 0); } 100% { clip: rect(2px, 9999px, 51px, 0); } }
        @keyframes float-icon { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 10% { opacity: 0.4; } 90% { opacity: 0.4; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes glow { 0% { text-shadow: 0 0 10px rgba(0, 255, 255, 0.5); } 100% { text-shadow: 0 0 20px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 255, 255, 0.6); } }
        @keyframes floatUp { 0% { transform: translateY(100vh); opacity: 0; } 10% { opacity: 0.4; } 90% { opacity: 0.4; } 100% { transform: translateY(-100px); opacity: 0; } }
        @keyframes dash { to { stroke-dashoffset: -10; } }
       
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content { padding: 0 1rem; }
            .hero h1 { font-size: clamp(2rem, 10vw, 3rem); }
            .map-container { height: 400px; }
            .rewards-content { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
            .challenge-categories { gap: 15px; }
            .category-btn { padding: 10px 20px; font-size: 0.9rem; }
            .challenges-container { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
            .modal-content { padding: 20px; }
            .timer-display { font-size: 2rem; }
            .progress-tracker { flex-direction: column; gap: 20px; align-items: center; }
            .progress-step { width: 100%; }
            .progress-step:not(:last-child)::after { width: 2px; height: 30px; top: 40px; left: 50%; transform: translateX(-50%); }
            .loot-boxes { flex-wrap: wrap; }
        }
        @media (max-width: 480px) {
            .container { padding: 0 1rem; }
            .hero { padding: 40px 0; }
            .map-container { height: 300px; }
            .challenge-categories { flex-direction: column; align-items: stretch; }
            .category-btn { width: 100%; max-width: 300px; margin: 0 auto; }
            .challenges-container { grid-template-columns: 1fr; }
            .modal-actions, .completion-actions, .loot-actions { flex-direction: column; }
            .modal-btn { width: 100%; }
            .loot-boxes { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-container">
            <div class="loading-animation">
                <div class="loading-circle"></div>
                <div class="loading-circle-alt"></div>
                <i class="fas fa-dumbbell loading-icon"></i>
            </div>
            <div class="loading-text">
                <h2>ELITE PERFORMANCE</h2>
                <p>"Champions are made when nobody's watching"</p>
            </div>
            <div class="loading-progress">
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
                <div class="loading-bar"></div>
            </div>
        </div>
    </div>
    <!-- Custom Cursor -->
    <div class="custom-cursor" id="customCursor">
        <i class="fas fa-dumbbell dumbbell-cursor"></i>
    </div>
    <!-- Smash Effect Container -->
    <div class="smash-container" id="smashContainer"></div>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    <div class="cyber-grid"></div>
    <div class="particles" id="particles"></div>
    <!-- Floating Icons -->
    <div class="floating-icons" id="floatingIcons"></div>
    <!-- Header -->
    <header>
        <div class="header-content">
            <a href="#" class="logo">
                <i class="fas fa-dumbbell logo-icon"></i>
                <span>ELITE</span>
            </a>
            <div class="profile-dropdown">
                <button class="profile-btn" id="profileBtn">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span id="userName">Athlete</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content -->
    <main>
        <section class="hero">
            <div class="container">
                <h1 data-text="Adventure Fitness Quest">Adventure Fitness Quest</h1>
                <p>Embark on an epic fitness journey, unlock new territories, and collect powerful rewards!</p>
            </div>
        </section>
        
        <div class="container">
            <!-- Character Section -->
            <section class="game-section" id="characterSection">
                <div class="game-section-header">
                    <h2 class="game-section-title" id="characterTitle">Your Hero</h2>
                    <div class="character-level">
                        <div class="level-badge" id="characterLevelBadge">1</div>
                        <div class="level-text">Level <span id="characterLevel">1</span></div>
                    </div>
                </div>
                <div class="character-content">
                    <div class="character-stats">
                        <h3 class="character-name" id="characterName">Fitness Warrior</h3>
                        <div class="xp-bar">
                            <div class="xp-fill" id="characterXpFill" style="width: 0%"></div>
                        </div>
                        <div class="xp-text">
                            <span id="characterXpText">0 / 100 XP</span>
                        </div>
                        <div class="skills-container" id="skillsContainer">
                            <div class="skill-badge" data-skill="strength">
                                <i class="fas fa-fist-raised"></i>
                                <span>Strength</span>
                                <div class="skill-bar">
                                    <div class="skill-bar-fill strength" id="strengthBar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-badge" data-skill="endurance">
                                <i class="fas fa-heartbeat"></i>
                                <span>Endurance</span>
                                <div class="skill-bar">
                                    <div class="skill-bar-fill endurance" id="enduranceBar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-badge" data-skill="agility">
                                <i class="fas fa-running"></i>
                                <span>Agility</span>
                                <div class="skill-bar">
                                    <div class="skill-bar-fill agility" id="agilityBar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-badge" data-skill="wisdom">
                                <i class="fas fa-brain"></i>
                                <span>Wisdom</span>
                                <div class="skill-bar">
                                    <div class="skill-bar-fill wisdom" id="wisdomBar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Quest Section -->
            <section class="game-section" id="questSection">
                <div class="game-section-header">
                    <h2 class="game-section-title">Active Quests</h2>
                </div>
                <div class="quest-list" id="questList"></div>
            </section>
            
            <!-- Map Section -->
            <section class="game-section" id="mapSection">
                <div class="game-section-header">
                    <h2 class="game-section-title">Adventure Map</h2>
                    <div class="map-progress">
                        <span id="mapProgressText">1 of 15 locations unlocked</span>
                    </div>
                </div>
                <div class="map-container-wrapper" id="mapContainerWrapper">
                    <div class="map-container" id="mapContainer">
                        <div class="map-background"></div>
                         <svg class="map-path" id="mapPath" width="200%" height="100%">
                            <defs>
                                <linearGradient id="line-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:var(--accent-pink);stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:var(--accent-color);stop-opacity:1" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                </div>
                <div class="map-slide-indicator">
                    <div class="map-slide-dot active" data-slide="0"></div>
                    <div class="map-slide-dot" data-slide="1"></div>
                </div>
            </section>
            
            <!-- Rewards Section -->
            <section class="game-section" id="rewardsSection">
                <div class="game-section-header">
                    <h2 class="game-section-title">Your Rewards</h2>
                </div>
                <div class="rewards-tabs">
                    <button class="rewards-tab active" data-tab="inventory">Inventory</button>
                    <button class="rewards-tab" data-tab="equipment">Equipment</button>
                    <button class="rewards-tab" data-tab="consumables">Consumables</button>
                </div>
                <div class="rewards-content" id="rewardsContent"></div>
            </section>
            
            <!-- Progress Bar -->
            <section class="game-section progress-container">
                <div class="progress-header">
                    <div class="current-level">Level <span id="currentLevel">1</span></div>
                    <div class="level-points"><span id="currentPoints">0</span> / <span id="nextLevelPoints">100</span> XP</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalChallenges">0</div>
                        <div class="stat-label">Challenges</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="streakCount">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalTime">0</div>
                        <div class="stat-label">Minutes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="lootCount">0</div>
                        <div class="stat-label">Rewards</div>
                    </div>
                </div>
            </section>
            
            <!-- Challenges Section -->
            <section>
                <div class="challenge-categories">
                    <button class="category-btn active" data-category="easy">Easy</button>
                    <button class="category-btn" data-category="medium">Medium</button>
                    <button class="category-btn" data-category="hard">Hard</button>
                </div>
                <div class="challenges-container" id="challengesContainer"></div>
            </section>
        </div>
    </main>
    
    <!-- Active Effects -->
    <div class="active-effects" id="activeEffects">
        <div class="effects-title">Active Effects</div>
        <div id="effectsList"></div>
    </div>
    
    <!-- Modals -->
    <div class="challenge-modal" id="challengeModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose"><i class="fas fa-times"></i></button>
            <h2 class="modal-title" id="modalTitle"></h2>
            <p class="modal-description" id="modalDescription"></p>
            <div class="motivation-container" id="motivationContainer">
                <div class="motivation-quote" id="motivationQuote"></div>
                <div class="motivation-author" id="motivationAuthor"></div>
            </div>
            
            <!-- Game Animation Container -->
            <div class="game-animation-container" id="gameAnimationContainer"></div>
            
            <div class="timer-container">
                <div class="timer-display" id="timerDisplay">00:00</div>
                <div class="timer-progress"><div class="timer-progress-fill" id="timerProgressFill"></div></div>
            </div>
            
            <div class="progress-tracker" id="progressTracker">
                <div class="progress-step"><div class="step-icon"><i class="fas fa-play"></i></div><div class="step-label">Start</div></div>
                <div class="progress-step"><div class="step-icon"><i class="fas fa-fire"></i></div><div class="step-label">Halfway</div></div>
                <div class="progress-step"><div class="step-icon"><i class="fas fa-trophy"></i></div><div class="step-label">Complete</div></div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn btn-complete" id="btnComplete">Completed</button>
                <button class="modal-btn btn-quit" id="btnQuit">Quit</button>
            </div>
        </div>
    </div>
    
    <div class="completion-modal" id="completionModal">
        <div class="completion-content">
            <h2 class="completion-title" id="completionTitle"></h2>
            <p class="completion-message" id="completionMessage"></p>
            <div class="completion-actions">
                <button class="modal-btn btn-yes" id="btnYes">Yes!</button>
                <button class="modal-btn btn-no" id="btnNo">No</button>
            </div>
        </div>
    </div>
    
    <div class="loot-modal" id="lootModal">
        <div class="loot-content">
            <h2 class="loot-title">Mystery Rewards!</h2>
            <p class="loot-subtitle">Choose a loot box. Only one contains a reward!</p>
            <div class="loot-boxes" id="lootBoxes">
                <div class="loot-box" data-box="1"><i class="fas fa-gift loot-box-icon"></i></div>
                <div class="loot-box" data-box="2"><i class="fas fa-gift loot-box-icon"></i></div>
                <div class="loot-box" data-box="3"><i class="fas fa-gift loot-box-icon"></i></div>
            </div>
            <div class="loot-item" id="lootItem">
                <i class="fas fa-star loot-item-icon" id="lootItemIcon"></i>
                <div class="loot-item-name" id="lootItemName"></div>
                <div class="loot-item-description" id="lootItemDescription"></div>
            </div>
            <div class="loot-actions">
                <button class="modal-btn btn-yes" id="btnClaimReward">Claim Reward</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-title" id="notificationTitle"></div>
        <div class="notification-message" id="notificationMessage"></div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let audioContext = null;
            let clickSound = null;
            
            function initAudio() {
                if (audioContext) return;
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    // Load click sound
                    clickSound = new Audio('click.mp3.wav');
                    clickSound.load();
                } catch (e) { console.warn('Web Audio API is not supported in this browser'); }
            }
            
            function playSound(type) {
                if (type === 'click' && clickSound) {
                    clickSound.currentTime = 0;
                    clickSound.play().catch(e => console.log('Sound play error:', e));
                }
            }
            
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                loadingScreen.style.opacity = '0';
                setTimeout(() => { loadingScreen.style.display = 'none'; }, 500);
            }, 3500);
            
            // Create floating icons
            const floatingIconsContainer = document.getElementById('floatingIcons');
            const iconTypes = ['fa-dumbbell', 'fa-running', 'fa-bicycle', 'fa-swimmer', 'fa-fist-raised', 'fa-basketball-ball', 'fa-football-ball', 'fa-table-tennis', 'fa-volleyball-ball', 'fa-baseball-ball', 'fa-medal', 'fa-trophy'];
            
            for (let i = 0; i < 15; i++) {
                const icon = document.createElement('i');
                icon.className = `fas ${iconTypes[Math.floor(Math.random() * iconTypes.length)]} floating-icon`;
                icon.style.left = `${Math.random() * 100}%`;
                icon.style.top = `${Math.random() * 100}%`;
                icon.style.fontSize = `${Math.random() * 1.5 + 1}rem`;
                icon.style.animationDuration = `${Math.random() * 10 + 15}s`;
                icon.style.animationDelay = `${Math.random() * 5}s`;
                floatingIconsContainer.appendChild(icon);
            }
            
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 10 + 5}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.background = `rgba(0, 255, 255, ${Math.random() * 0.5 + 0.2})`;
                particle.style.animationDuration = `${Math.random() * 10 + 10}s`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particle.classList.add('active');
                particlesContainer.appendChild(particle);
            }
            
            const customCursor = document.getElementById('customCursor');
            document.addEventListener('mousemove', (e) => {
                customCursor.style.left = `${e.clientX}px`;
                customCursor.style.top = `${e.clientY}px`;
            });
            
            const smashContainer = document.getElementById('smashContainer');
            document.addEventListener('click', (e) => {
                initAudio();
                playSound('click');
                const glassBreak = document.createElement('div');
                glassBreak.className = 'glass-break';
                glassBreak.style.left = `${e.clientX - 75}px`;
                glassBreak.style.top = `${e.clientY - 75}px`;
                glassBreak.style.width = '150px';
                glassBreak.style.height = '150px';
                glassBreak.style.borderRadius = '50%';
                glassBreak.style.background = 'radial-gradient(circle, rgba(255,255,255,0.9), rgba(0,255,255,0.5), transparent)';
                smashContainer.appendChild(glassBreak);
                for (let i = 0; i < 15; i++) {
                    const shard = document.createElement('div');
                    shard.className = 'glass-shard';
                    shard.style.left = `${e.clientX}px`;
                    shard.style.top = `${e.clientY}px`;
                    shard.style.width = `${Math.random() * 15 + 5}px`;
                    shard.style.height = `${Math.random() * 20 + 8}px`;
                    shard.style.setProperty('--tx', `${(Math.random() - 0.5) * 150}px`);
                    shard.style.setProperty('--ty', `${(Math.random() - 0.5) * 150}px`);
                    shard.style.setProperty('--rotation', `${(Math.random() - 0.5) * 360}deg`);
                    shard.style.animationDuration = `${Math.random() * 0.8 + 0.8}s`;
                    smashContainer.appendChild(shard);
                }
                const sportIcons = ['fas fa-dumbbell', 'fas fa-running', 'fas fa-bicycle', 'fas fa-swimmer', 'fas fa-fist-raised', 'fas fa-basketball-ball', 'fas fa-football-ball', 'fas fa-table-tennis', 'fas fa-volleyball-ball', 'fas fa-baseball-ball'];
                for (let i = 0; i < 15; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'smash-particle';
                    particle.style.left = `${e.clientX}px`;
                    particle.style.top = `${e.clientY}px`;
                    particle.innerHTML = `<i class="${sportIcons[Math.floor(Math.random() * sportIcons.length)]}"></i>`;
                    particle.style.setProperty('--tx', `${(Math.random() - 0.5) * 150}px`);
                    particle.style.setProperty('--ty', `${(Math.random() - 0.5) * 150}px`);
                    particle.style.animationDuration = `${Math.random() * 0.8 + 0.8}s`;
                    smashContainer.appendChild(particle);
                }
                setTimeout(() => { smashContainer.innerHTML = ''; }, 1500);
            });
            
            const profileBtn = document.getElementById('profileBtn');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const logoutBtn = document.getElementById('logoutBtn');
            const userNameElement = document.getElementById('userName');
            const savedUserName = localStorage.getItem('userName');
            if (savedUserName) { userNameElement.textContent = savedUserName; }
            profileBtn.addEventListener('click', (e) => { e.stopPropagation(); dropdownMenu.classList.toggle('active'); });
            document.addEventListener('click', () => { dropdownMenu.classList.remove('active'); });
            logoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.setItem('eliteGameState', JSON.stringify(gameState));
                localStorage.removeItem('userName');
                window.location.href = 'index.html';
            });
            
            let gameState = {
                level: 1, points: 0, nextLevelPoints: 100,
                unlockedChallenges: [0, 100], // Start with first challenge and first hard challenge unlocked
                completedChallenges: [],
                currentCategory: 'easy', currentChallenge: null, timer: null, timeRemaining: 0, totalTime: 0, activeEffects: [],
                stats: { totalChallenges: 0, streakCount: 0, totalTime: 0, lastCompleted: null, lootCount: 0 },
                character: { name: "Fitness Warrior", level: 1, xp: 0, nextXp: 100, skills: { strength: false, endurance: false, agility: false, wisdom: false }, skillLevels: { strength: 0, endurance: 0, agility: 0, wisdom: 0 }, equippedItems: { helmet: null, armor: null, accessory: null } },
                mapProgress: { unlockedLocations: [0], currentLocation: 0, currentSlide: 0 },
                rewards: { inventory: [], equipment: [], consumables: [] },
                lootBoxSelected: false, correctBox: 0, currentLootItem: null,
                quests: [
                    { id: 1, title: "First Steps", description: "Complete 3 easy challenges", progress: 0, target: 3, completed: false, reward: "Unlock Medium Challenges" },
                    { id: 2, title: "Strength Training", description: "Complete 5 strength-based challenges", progress: 0, target: 5, completed: false, reward: "Strength Skill Boost" },
                    { id: 3, title: "Endurance Master", description: "Complete 5 endurance-based challenges", progress: 0, target: 5, completed: false, reward: "Endurance Skill Boost" },
                    { id: 4, title: "Agility Expert", description: "Complete 5 agility-based challenges", progress: 0, target: 5, completed: false, reward: "Agility Skill Boost" },
                    { id: 5, title: "Wisdom Seeker", description: "Complete 5 hard challenges", progress: 0, target: 5, completed: false, reward: "Wisdom Skill Unlock" }
                ]
            };
            
            const lootItems = [
                { id: "xp_boost", name: "XP Elixir", type: "consumable", rarity: "common", icon: "fa-bolt", description: "Double XP for your next challenge.", effect: "xp_boost", duration: 1 },
                { id: "time_bonus", name: "Chrono-Sand", type: "consumable", rarity: "common", icon: "fa-hourglass-half", description: "Adds 2 minutes to your next challenge.", effect: "time_bonus", duration: 1 },
                { id: "streak_save", name: "Guardian Charm", type: "consumable", rarity: "uncommon", icon: "fa-calendar-check", description: "Preserves your daily streak if you miss a day.", effect: "streak_save", duration: 0 },
                { id: "instant_complete", name: "Scroll of Haste", type: "consumable", rarity: "rare", icon: "fa-check-double", description: "Instantly completes your next chosen challenge.", effect: "instant_complete", duration: 1 },
                { id: "helmet1", name: "Helm of Strength", type: "equipment", rarity: "rare", icon: "fa-hard-hat", description: "+10% XP gain for Strength challenges.", effect: "strength_boost", durability: 10 },
                { id: "armor1", name: "Aegis of Endurance", type: "equipment", rarity: "rare", icon: "fa-shield-alt", description: "+10% XP gain for Endurance challenges.", effect: "endurance_boost", durability: 10 },
                { id: "acc1", name: "Boots of Agility", type: "equipment", rarity: "epic", icon: "fa-shoe-prints", description: "+15% XP gain for Agility challenges.", effect: "agility_boost", durability: 15 },
                { id: "acc2", name: "Crown of Wisdom", type: "equipment", rarity: "legendary", icon: "fa-crown", description: "Unlocks the Wisdom skill tree.", effect: "wisdom_unlock", durability: 20 },
                { id: "helmet2", name: "Dragonscale Helm", type: "equipment", rarity: "epic", icon: "fa-dragon", description: "+5% XP from all challenges.", effect: "all_boost", durability: 15 },
                { id: "armor2", name: "Phoenix Plate", type: "equipment", rarity: "legendary", icon: "fa-fire", description: "Grants an 'Extra Life' on a failed challenge.", effect: "extra_life", durability: 5 }
            ];
            
            const savedGameState = localStorage.getItem('eliteGameState');
            if (savedGameState) {
                gameState = JSON.parse(savedGameState);
                if (gameState.rewards && gameState.rewards.equipment) {
                    gameState.rewards.equipment.forEach(reward => {
                        if (reward.durability === undefined) {
                            const itemData = lootItems.find(item => item.id === reward.id);
                            if (itemData && itemData.durability) { reward.durability = itemData.durability; }
                        }
                    });
                }
            }
            
            function saveGameState() {
                localStorage.setItem('eliteGameState', JSON.stringify(gameState));
            }
            
            const mapLocations = [
                { id: 0, name: "Starting Village", icon: "fa-home", requiredChallenges: 0, x: 50, y: 450 },
                { id: 1, name: "Forest Path", icon: "fa-tree", requiredChallenges: 10, x: 150, y: 350 },
                { id: 2, name: "Mountain Pass", icon: "fa-mountain", requiredChallenges: 20, x: 250, y: 250 },
                { id: 3, name: "River Crossing", icon: "fa-water", requiredChallenges: 30, x: 350, y: 350 },
                { id: 4, name: "Ancient Ruins", icon: "fa-landmark", requiredChallenges: 40, x: 450, y: 250 },
                { id: 5, name: "Desert Dunes", icon: "fa-sun", requiredChallenges: 50, x: 550, y: 150 },
                { id: 6, name: "Ice Caverns", icon: "fa-icicles", requiredChallenges: 60, x: 650, y: 250 },
                { id: 7, name: "Sky City", icon: "fa-cloud", requiredChallenges: 70, x: 750, y: 150 },
                { id: 8, name: "Volcanic Crater", icon: "fa-fire", requiredChallenges: 80, x: 850, y: 250 },
                { id: 9, name: "Mystic Grove", icon: "fa-magic", requiredChallenges: 90, x: 950, y: 350 },
                { id: 10, name: "Ocean Depths", icon: "fa-water", requiredChallenges: 100, x: 1050, y: 450 },
                { id: 11, name: "Storm Peaks", icon: "fa-cloud-bolt", requiredChallenges: 110, x: 1150, y: 350 },
                { id: 12, name: "Shadow Realm", icon: "fa-moon", requiredChallenges: 120, x: 1250, y: 250 },
                { id: 13, name: "Crystal Caves", icon: "fa-gem", requiredChallenges: 130, x: 1350, y: 150 },
                { id: 14, name: "Dragon's Lair", icon: "fa-dragon", requiredChallenges: 140, x: 1450, y: 250 }
            ];
            
            const motivationalQuotes = [
                { text: "The only bad workout is the one that didn't happen.", author: "" },
                { text: "Your body can stand almost anything. It's your mind you have to convince.", author: "" },
                { text: "Success starts with self-discipline.", author: "" },
                { text: "The hardest lift of all is lifting your butt off the couch.", author: "" },
                { text: "Don't stop when you're tired. Stop when you're done.", author: "" },
                { text: "The pain you feel today will be the strength you feel tomorrow.", author: "" },
                { text: "Push yourself because no one else is going to do it for you.", author: "" },
                { text: "Great things never come from comfort zones.", author: "" },
                { text: "Success isn't always about greatness. It's about consistency.", author: "Dwayne Johnson" },
                { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" }
            ];
            
            const challenges = {
                easy: generateChallenges('easy', 50),
                medium: generateChallenges('medium', 50),
                hard: generateChallenges('hard', 50)
            };
            
            function generateChallenges(difficulty, count) {
                const templates = {
                    easy: [ 
                        { title: "Morning Stretch", reps: "1 set", baseTime: 5, basePoints: 10, animation: "stretch" }, 
                        { title: "Quick Walk", reps: "1 session", baseTime: 10, basePoints: 15, animation: "walk" }, 
                        { title: "Jumping Jacks", reps: "3 sets", baseTime: 5, basePoints: 15, animation: "jumping" }, 
                        { title: "Bodyweight Squats", reps: "3 sets", baseTime: 5, basePoints: 15, animation: "squat" }, 
                        { title: "Plank Hold", reps: "1 set", baseTime: 3, basePoints: 10, animation: "plank" } 
                    ],
                    medium: [ 
                        { title: "Push-up Challenge", reps: "Multiple sets", baseTime: 10, basePoints: 25, animation: "pushup" }, 
                        { title: "Lunges", reps: "3 sets", baseTime: 8, basePoints: 20, animation: "lunge" }, 
                        { title: "Burpees", reps: "3 sets", baseTime: 10, basePoints: 30, animation: "burpee" }, 
                        { title: "Mountain Climbers", reps: "3 sets", baseTime: 8, basePoints: 25, animation: "climber" }, 
                        { title: "Bicycle Crunches", reps: "3 sets", baseTime: 8, basePoints: 20, animation: "crunch" } 
                    ],
                    hard: [ 
                        { title: "HIIT Circuit", reps: "5 exercises", baseTime: 15, basePoints: 40, animation: "hiit" }, 
                        { title: "Pull-up Challenge", reps: "AMRAP", baseTime: 10, basePoints: 40, animation: "pullup" }, 
                        { title: "Pistol Squats", reps: "3 sets", baseTime: 12, basePoints: 40, animation: "pistol" }, 
                        { title: "Handstand Hold", reps: "1 set", baseTime: 5, basePoints: 35, animation: "handstand" }, 
                        { title: "Muscle-up Progress", reps: "3 sets", baseTime: 12, basePoints: 35, animation: "muscleup" } 
                    ]
                };
                const challengeList = [];
                for (let i = 0; i < count; i++) {
                    const template = templates[difficulty][i % templates[difficulty].length];
                    challengeList.push({ 
                        id: (difficulty === 'easy' ? i : (difficulty === 'medium' ? i + 50 : i + 100)), 
                        title: `${template.title} #${Math.floor(i / templates[difficulty].length) + 1}`, 
                        description: template.description || "Complete the task as described.", 
                        reps: template.reps, 
                        time: template.baseTime + Math.floor(i / templates[difficulty].length) * 2, 
                        points: template.basePoints + Math.floor(i / templates[difficulty].length) * 5, 
                        difficulty: difficulty,
                        animation: template.animation
                    });
                }
                return challengeList;
            }
            
            const challengesContainer = document.getElementById('challengesContainer');
            const categoryBtns = document.querySelectorAll('.category-btn');
            const mapContainer = document.getElementById('mapContainer');
            const mapContainerWrapper = document.getElementById('mapContainerWrapper');
            const characterLevelBadge = document.getElementById('characterLevelBadge');
            const characterLevel = document.getElementById('characterLevel');
            const characterName = document.getElementById('characterName');
            const characterXpFill = document.getElementById('characterXpFill');
            const characterXpText = document.getElementById('characterXpText');
            const skillsContainer = document.getElementById('skillsContainer');
            const mapProgressText = document.getElementById('mapProgressText');
            const rewardsTabs = document.querySelectorAll('.rewards-tab');
            const rewardsContent = document.getElementById('rewardsContent');
            const activeEffects = document.getElementById('activeEffects');
            const effectsList = document.getElementById('effectsList');
            const challengeModal = document.getElementById('challengeModal');
            const completionModal = document.getElementById('completionModal');
            const lootModal = document.getElementById('lootModal');
            const modalClose = document.getElementById('modalClose');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');
            const motivationContainer = document.getElementById('motivationContainer');
            const motivationQuote = document.getElementById('motivationQuote');
            const motivationAuthor = document.getElementById('motivationAuthor');
            const timerDisplay = document.getElementById('timerDisplay');
            const timerProgressFill = document.getElementById('timerProgressFill');
            const progressTracker = document.getElementById('progressTracker');
            const lootBoxes = document.getElementById('lootBoxes');
            const lootItem = document.getElementById('lootItem');
            const lootItemIcon = document.getElementById('lootItemIcon');
            const lootItemName = document.getElementById('lootItemName');
            const lootItemDescription = document.getElementById('lootItemDescription');
            const btnComplete = document.getElementById('btnComplete');
            const btnQuit = document.getElementById('btnQuit');
            const btnYes = document.getElementById('btnYes');
            const btnNo = document.getElementById('btnNo');
            const btnClaimReward = document.getElementById('btnClaimReward');
            const currentLevelEl = document.getElementById('currentLevel');
            const currentPointsEl = document.getElementById('currentPoints');
            const nextLevelPointsEl = document.getElementById('nextLevelPoints');
            const progressFill = document.getElementById('progressFill');
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationMessage = document.getElementById('notificationMessage');
            const totalChallengesEl = document.getElementById('totalChallenges');
            const streakCountEl = document.getElementById('streakCount');
            const totalTimeEl = document.getElementById('totalTime');
            const lootCountEl = document.getElementById('lootCount');
            const mapSlideDots = document.querySelectorAll('.map-slide-dot');
            const completionTitle = document.getElementById('completionTitle');
            const completionMessage = document.getElementById('completionMessage');
            const questList = document.getElementById('questList');
            const characterTitle = document.getElementById('characterTitle');
            const gameAnimationContainer = document.getElementById('gameAnimationContainer');
            
            function init() {
                // Update character title with username
                const username = localStorage.getItem('userName') || 'Athlete';
                characterTitle.textContent = `${username}`;
                
                updateAllUI();
                categoryBtns.forEach(btn => btn.addEventListener('click', () => {
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.currentCategory = btn.dataset.category;
                    renderChallenges();
                }));
                rewardsTabs.forEach(tab => tab.addEventListener('click', () => {
                    rewardsTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    updateRewards(tab.dataset.tab);
                }));
                modalClose.addEventListener('click', closeChallengeModal);
                btnComplete.addEventListener('click', () => { clearInterval(gameState.timer); showCompletionModal(); });
                btnQuit.addEventListener('click', closeChallengeModal);
                btnYes.addEventListener('click', processChallengeCompletion);
                btnNo.addEventListener('click', () => {
                    const extraLifeEffect = gameState.activeEffects.find(e => e.id === 'extra_life');
                    if (extraLifeEffect) {
                        const armorItem = Object.values(gameState.character.equippedItems).map(id => gameState.rewards.equipment.find(r => r.id === id)).find(item => item && lootItems.find(li => li.id === item.id).effect === 'extra_life');
                        if (armorItem) {
                            showNotification('Extra Life Used!', `Your ${lootItems.find(li => li.id === armorItem.id).name} saved you!`);
                            armorItem.durability--;
                            if (armorItem.durability <= 0) { handleItemBreakage(armorItem); }
                            processChallengeCompletion();
                            return;
                        }
                    }
                    closeCompletionModal();
                    closeChallengeModal();
                });
                mapSlideDots.forEach(dot => dot.addEventListener('click', () => {
                    const slide = parseInt(dot.dataset.slide);
                    gameState.mapProgress.currentSlide = slide;
                    updateMapSlide();
                    updateSlideDots();
                }));
                rewardsContent.addEventListener('click', (e) => {
                    const rewardItem = e.target.closest('.reward-item');
                    if (rewardItem && !e.target.classList.contains('reward-action')) { rewardItem.classList.toggle('expanded'); }
                });
            }
            
            function renderMap() {
                mapContainer.innerHTML = `<div class="map-background"></div><svg class="map-path" id="mapPath" width="200%" height="100%"><defs><linearGradient id="line-gradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:var(--accent-pink);stop-opacity:1" /><stop offset="100%" style="stop-color:var(--accent-color);stop-opacity:1" /></linearGradient></defs></svg>`;
                const svg = document.getElementById('mapPath');
                for (let i = 0; i < mapLocations.length - 1; i++) {
                    const start = mapLocations[i];
                    const end = mapLocations[i + 1];
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', start.x); line.setAttribute('y1', start.y); line.setAttribute('x2', end.x); line.setAttribute('y2', end.y);
                    line.setAttribute('stroke-width', '3'); line.classList.add('map-path-line');
                    if (gameState.mapProgress.unlockedLocations.includes(end.id)) { line.style.stroke = 'url(#line-gradient)'; } 
                    else { line.style.stroke = 'var(--border-subtle)'; line.setAttribute('stroke-dasharray', '5'); }
                    svg.appendChild(line);
                }
                mapLocations.forEach(location => {
                    const isUnlocked = gameState.mapProgress.unlockedLocations.includes(location.id);
                    const isCurrent = gameState.mapProgress.currentLocation === location.id;
                    const locationEl = document.createElement('div');
                    locationEl.className = `map-location ${isUnlocked ? 'unlocked' : 'locked'} ${isCurrent ? 'current' : ''}`;
                    locationEl.style.left = `${location.x - 40}px`; locationEl.style.top = `${location.y - 40}px`;
                    locationEl.innerHTML = `${!isUnlocked ? '<i class="fas fa-lock lock-icon"></i>' : ''}<i class="fas ${location.icon} location-icon"></i><div class="location-name">${location.name}</div>`;
                    mapContainer.appendChild(locationEl);
                });
                mapProgressText.textContent = `${gameState.mapProgress.unlockedLocations.length} of ${mapLocations.length} locations unlocked`;
                initMapSliding();
            }
            
            function initMapSliding() {
                let isDown = false, startX, scrollLeft;
                const start = (e) => { isDown = true; mapContainerWrapper.classList.add('dragging'); startX = (e.pageX || e.touches[0].pageX) - mapContainerWrapper.offsetLeft; scrollLeft = mapContainerWrapper.scrollLeft; };
                const end = () => { isDown = false; mapContainerWrapper.classList.remove('dragging'); const slideWidth = mapContainer.offsetWidth / 2; const targetSlide = Math.round(mapContainerWrapper.scrollLeft / slideWidth); gameState.mapProgress.currentSlide = targetSlide; updateMapSlide(); updateSlideDots(); };
                const move = (e) => { if (!isDown) return; e.preventDefault(); const x = (e.pageX || e.touches[0].pageX) - mapContainerWrapper.offsetLeft; const walk = (x - startX) * 2; mapContainerWrapper.scrollLeft = scrollLeft - walk; };
                mapContainerWrapper.addEventListener('mousedown', start); mapContainerWrapper.addEventListener('mouseleave', end); mapContainerWrapper.addEventListener('mouseup', end); mapContainerWrapper.addEventListener('mousemove', move);
                mapContainerWrapper.addEventListener('touchstart', start); mapContainerWrapper.addEventListener('touchend', end); mapContainerWrapper.addEventListener('touchmove', move);
            }
            
            function updateMapSlide() {
                const slideWidth = mapContainer.offsetWidth / 2;
                mapContainerWrapper.scrollTo({ left: gameState.mapProgress.currentSlide * slideWidth, behavior: 'smooth' });
            }
            
            function updateSlideDots() {
                mapSlideDots.forEach((dot, index) => { dot.classList.toggle('active', index === gameState.mapProgress.currentSlide); });
            }
            
            function renderChallenges() {
                challengesContainer.innerHTML = '';
                challenges[gameState.currentCategory].forEach(challenge => {
                    const isUnlocked = gameState.unlockedChallenges.includes(challenge.id);
                    const isCompleted = gameState.completedChallenges.includes(challenge.id);
                    const challengeCard = document.createElement('div');
                    challengeCard.className = `challenge-card ${!isUnlocked ? 'locked' : ''}`;
                    challengeCard.innerHTML = `
                        ${!isUnlocked ? '<i class="fas fa-lock lock-icon"></i>' : ''}
                        <div class="challenge-header">
                            <h3 class="challenge-title">${challenge.title}</h3>
                            <span class="challenge-difficulty difficulty-${challenge.difficulty}">${challenge.difficulty}</span>
                        </div>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="challenge-details">
                            <div class="detail-item"><i class="fas fa-redo detail-icon"></i><span class="detail-value">${challenge.reps}</span><span class="detail-label">Reps</span></div>
                            <div class="detail-item"><i class="fas fa-clock detail-icon"></i><span class="detail-value">${challenge.time} min</span><span class="detail-label">Time</span></div>
                        </div>
                        <div class="challenge-points"><i class="fas fa-star"></i><span>${challenge.points} XP</span></div>
                        <button class="challenge-btn" ${!isUnlocked || isCompleted ? 'disabled' : ''} data-id="${challenge.id}">
                            ${isCompleted ? 'Completed' : 'Start'}
                        </button>`;
                    challengesContainer.appendChild(challengeCard);
                    const startBtn = challengeCard.querySelector('.challenge-btn');
                    if (isUnlocked && !isCompleted) {
                        const hasInstantComplete = gameState.activeEffects.some(e => e.id === 'instant_complete' && e.duration > 0);
                        if (hasInstantComplete) { startBtn.textContent = 'Instant Complete'; startBtn.style.background = 'var(--accent-gradient)'; }
                        startBtn.addEventListener('click', () => startChallenge(challenge));
                    }
                });
            }
            
            function updateRewards(tab = 'inventory') {
                rewardsContent.innerHTML = '';
                const rewardsToShow = tab === 'inventory' ? [...gameState.rewards.equipment, ...gameState.rewards.consumables] : gameState.rewards[tab] || [];
                if (rewardsToShow.length === 0) {
                    rewardsContent.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No rewards in this category yet.</p>';
                    return;
                }
                rewardsToShow.forEach(reward => {
                    const itemData = lootItems.find(item => item.id === reward.id);
                    if (!itemData) return;
                    const rewardEl = document.createElement('div');
                    rewardEl.className = 'reward-item';
                    rewardEl.innerHTML = `
                        <div class="reward-rarity rarity-${itemData.rarity}">${itemData.rarity}</div>
                        <i class="fas ${itemData.icon} reward-icon"></i>
                        <div class="reward-name">${itemData.name}</div>
                        <div class="reward-description">
                            ${itemData.description}
                            ${itemData.type === 'equipment' ? `<br>Durability: ${reward.durability}/${itemData.durability}` : ''}
                        </div>
                        ${itemData.type === 'consumable' && reward.count > 0 ? `<button class="reward-action" data-reward-id="${reward.id}">Use (${reward.count})</button>` : itemData.type === 'equipment' ? `<button class="reward-action" data-reward-id="${reward.id}">${reward.equipped ? 'Unequip' : 'Equip'}</button>` : ''}`;
                    rewardsContent.appendChild(rewardEl);
                });
                rewardsContent.querySelectorAll('.reward-action').forEach(button => {
                    button.addEventListener('click', (e) => { e.stopPropagation(); handleRewardAction(button.dataset.rewardId); });
                });
            }
            
            function handleRewardAction(rewardId) {
                const itemData = lootItems.find(item => item.id === rewardId);
                if (!itemData) return;
                const rewardList = itemData.type === 'consumable' ? gameState.rewards.consumables : gameState.rewards.equipment;
                const reward = rewardList.find(r => r.id === rewardId);
                if (!reward) return;
                if (itemData.type === 'consumable') {
                    if (reward.count > 0) {
                        reward.count--;
                        applyRewardEffect(itemData);
                        if (reward.count === 0) {
                            rewardList.splice(rewardList.indexOf(reward), 1);
                        }
                    }
                } else if (itemData.type === 'equipment') {
                    if (reward.equipped) {
                        reward.equipped = false;
                        if (itemData.id.includes('helmet')) gameState.character.equippedItems.helmet = null;
                        else if (itemData.id.includes('armor')) gameState.character.equippedItems.armor = null;
                        else if (itemData.id.includes('acc')) gameState.character.equippedItems.accessory = null;
                        removeRewardEffect(itemData);
                        showNotification('Item Unequipped', `${itemData.name} has been unequipped.`);
                    } else {
                        let slot;
                        if (itemData.id.includes('helmet')) slot = 'helmet';
                        else if (itemData.id.includes('armor')) slot = 'armor';
                        else if (itemData.id.includes('acc')) slot = 'accessory';
                        if (slot) {
                            const currentItemId = gameState.character.equippedItems[slot];
                            if (currentItemId) {
                                const itemToUnequip = gameState.rewards.equipment.find(r => r.id === currentItemId);
                                if (itemToUnequip) {
                                    itemToUnequip.equipped = false;
                                    removeRewardEffect(lootItems.find(i => i.id === itemToUnequip.id));
                                }
                            }
                            gameState.character.equippedItems[slot] = itemData.id;
                        }
                        reward.equipped = true;
                        applyRewardEffect(itemData);
                        showNotification('Item Equipped', `${itemData.name} has been equipped.`);
                    }
                }
                updateAllUI();
                saveGameState();
            }
            
            function applyRewardEffect(itemData) {
                removeRewardEffect(itemData);
                addActiveEffect(itemData.name, itemData.description, itemData.duration, itemData.effect);
                if (itemData.effect === 'wisdom_unlock') {
                    gameState.character.skills.wisdom = true;
                    updateCharacter();
                }
                saveGameState();
            }
            
            function removeRewardEffect(itemData) {
                const effectIndex = gameState.activeEffects.findIndex(e => e.id === itemData.effect);
                if (effectIndex > -1) { gameState.activeEffects.splice(effectIndex, 1); }
                updateActiveEffects();
            }
            
            function addActiveEffect(name, description, duration, id) {
                gameState.activeEffects.push({ id, name, description, duration, activatedAt: Date.now() });
                updateActiveEffects();
                activeEffects.classList.add('show');
                setTimeout(() => { activeEffects.classList.remove('show'); }, 4000);
            }
            
            function updateActiveEffects() {
                effectsList.innerHTML = '';
                if (gameState.activeEffects.length === 0) {
                    activeEffects.classList.remove('show');
                    return;
                }
                activeEffects.classList.add('show');
                gameState.activeEffects.forEach(effect => {
                    const effectEl = document.createElement('div');
                    effectEl.className = 'effect-item';
                    effectEl.innerHTML = `<i class="fas fa-star effect-icon"></i><span>${effect.name} ${effect.duration > 0 ? `(${effect.duration} use/s)` : ''}</span>`;
                    effectsList.appendChild(effectEl);
                });
            }
            
            function updateCharacter() {
                userNameElement.textContent = localStorage.getItem('userName') || 'Athlete';
                characterName.textContent = gameState.character.name;
                characterLevelBadge.textContent = gameState.character.level;
                characterLevel.textContent = gameState.character.level;
                characterXpText.textContent = `${gameState.character.xp} / ${gameState.character.nextXp} XP`;
                characterXpFill.style.width = `${(gameState.character.xp / gameState.character.nextXp) * 100}%`;
                
                for (const skill in gameState.character.skills) {
                    const badge = skillsContainer.querySelector(`[data-skill="${skill}"]`);
                    if (badge) badge.classList.toggle('unlocked', gameState.character.skills[skill]);
                    const bar = document.getElementById(`${skill}Bar`);
                    if (bar) bar.style.width = `${gameState.character.skillLevels[skill]}%`;
                }
            }
            
            function startChallenge(challenge) {
                initAudio();
                const instantCompleteEffect = gameState.activeEffects.find(e => e.id === 'instant_complete');
                if (instantCompleteEffect && instantCompleteEffect.duration > 0) {
                    instantCompleteEffect.duration--;
                    if (instantCompleteEffect.duration <= 0) { gameState.activeEffects = gameState.activeEffects.filter(e => e.id !== 'instant_complete'); }
                    showNotification('Scroll of Haste Used!', 'Challenge instantly completed!');
                    updateActiveEffects();
                    gameState.currentChallenge = challenge;
                    processChallengeCompletion();
                    return;
                }
                gameState.currentChallenge = challenge;
                let timeBonus = 0;
                const timeBonusEffect = gameState.activeEffects.find(e => e.id === 'time_bonus');
                if (timeBonusEffect && timeBonusEffect.duration > 0) {
                    timeBonus = 2;
                    timeBonusEffect.duration--;
                    if (timeBonusEffect.duration <= 0) { gameState.activeEffects = gameState.activeEffects.filter(e => e.id !== 'time_bonus'); }
                    showNotification('Chrono-Sand Used!', '+2 minutes added.');
                    updateActiveEffects();
                }
                gameState.totalTime = (challenge.time + timeBonus) * 60;
                gameState.timeRemaining = gameState.totalTime;
                modalTitle.textContent = challenge.title;
                modalDescription.textContent = challenge.description;
                const randomQuote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
                motivationQuote.textContent = `"${randomQuote.text}"`;
                motivationAuthor.textContent = randomQuote.author ? `- ${randomQuote.author}` : '';
                progressTracker.querySelectorAll('.progress-step').forEach(step => step.classList.remove('completed'));
                challengeModal.classList.add('active');
                motivationContainer.classList.add('active');
                
                // Initialize game animation
                initGameAnimation(challenge);
                
                startTimer();
            }
            
            function initGameAnimation(challenge) {
                gameAnimationContainer.innerHTML = '';
                
                switch(challenge.animation) {
                    case 'stretch':
                        createStretchAnimation();
                        break;
                    case 'walk':
                        createWalkAnimation();
                        break;
                    case 'jumping':
                        createJumpingAnimation();
                        break;
                    case 'squat':
                        createSquatAnimation();
                        break;
                    case 'plank':
                        createPlankAnimation();
                        break;
                    case 'pushup':
                        createPushupAnimation();
                        break;
                    case 'lunge':
                        createLungeAnimation();
                        break;
                    case 'burpee':
                        createBurpeeAnimation();
                        break;
                    case 'climber':
                        createClimberAnimation();
                        break;
                    case 'crunch':
                        createCrunchAnimation();
                        break;
                    case 'hiit':
                        createHiitAnimation();
                        break;
                    case 'pullup':
                        createPullupAnimation();
                        break;
                    case 'pistol':
                        createPistolAnimation();
                        break;
                    case 'handstand':
                        createHandstandAnimation();
                        break;
                    case 'muscleup':
                        createMuscleupAnimation();
                        break;
                    default:
                        createDefaultAnimation();
                }
            }
            
            function createStretchAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="stretch-scene">
                        <div class="sun"></div>
                        <div class="cloud cloud1"></div>
                        <div class="cloud cloud2"></div>
                        <div class="stretch-person">
                            <div class="stretch-body"></div>
                            <div class="stretch-head"></div>
                            <div class="stretch-arm left"></div>
                            <div class="stretch-arm right"></div>
                            <div class="stretch-leg left"></div>
                            <div class="stretch-leg right"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                    </div>
                `;
                
                const person = gameAnimationContainer.querySelector('.stretch-person');
                
                person.addEventListener('click', () => {
                    person.classList.add('stretching');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 5; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            person.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 300);
                    }
                    
                    setTimeout(() => {
                        person.classList.remove('stretching');
                    }, 2000);
                });
            }
            
            function createWalkAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="walk-scene">
                        <div class="path"></div>
                        <div class="tree tree1"></div>
                        <div class="tree tree2"></div>
                        <div class="tree tree3"></div>
                        <div class="walker">
                            <div class="walker-body"></div>
                            <div class="walker-head"></div>
                            <div class="walker-arm left"></div>
                            <div class="walker-arm right"></div>
                            <div class="walker-leg left"></div>
                            <div class="walker-leg right"></div>
                            <!-- Enhanced footprints -->
                            <div class="footprint" style="left: 10px; bottom: 0px;"></div>
                            <div class="footprint" style="left: 20px; bottom: 0px;"></div>
                        </div>
                        <div class="destination">
                            <i class="fas fa-flag"></i>
                        </div>
                    </div>
                `;
                
                const walker = gameAnimationContainer.querySelector('.walker');
                const destination = gameAnimationContainer.querySelector('.destination');
                
                walker.addEventListener('click', () => {
                    walker.classList.add('walking');
                    
                    // Create footprints as walker moves
                    const footprintInterval = setInterval(() => {
                        const footprint = document.createElement('div');
                        footprint.className = 'footprint';
                        footprint.style.left = `${walker.offsetLeft + 10}px`;
                        footprint.style.bottom = '0px';
                        gameAnimationContainer.appendChild(footprint);
                        
                        setTimeout(() => footprint.remove(), 2000);
                    }, 300);
                    
                    setTimeout(() => {
                        walker.classList.remove('walking');
                        destination.classList.add('reached');
                        clearInterval(footprintInterval);
                        setTimeout(() => {
                            destination.classList.remove('reached');
                        }, 1000);
                    }, 5000);
                });
            }
            
            function createJumpingAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="jumping-scene">
                        <div class="jumper">
                            <div class="jumper-body"></div>
                            <div class="jumper-head"></div>
                            <div class="jumper-arm left"></div>
                            <div class="jumper-arm right"></div>
                            <div class="jumper-leg left"></div>
                            <div class="jumper-leg right"></div>
                            <!-- Enhanced energy burst effect -->
                            <div class="energy-burst"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="star star1"></div>
                        <div class="star star2"></div>
                        <div class="star star3"></div>
                    </div>
                `;
                
                const jumper = gameAnimationContainer.querySelector('.jumper');
                
                jumper.addEventListener('click', () => {
                    jumper.classList.add('jumping');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 8; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            jumper.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 200);
                    }
                    
                    setTimeout(() => {
                        jumper.classList.remove('jumping');
                    }, 3000);
                });
            }
            
            function createSquatAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="squat-scene">
                        <div class="squatter">
                            <div class="squatter-body"></div>
                            <div class="squatter-head"></div>
                            <div class="squatter-arm left"></div>
                            <div class="squatter-arm right"></div>
                            <div class="squatter-leg left"></div>
                            <div class="squatter-leg right"></div>
                            <!-- Enhanced ground impact effect -->
                            <div class="ground-impact"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="squat-counter">0 / 10</div>
                        <div class="squat-target">
                            <div class="squat-target-fill"></div>
                        </div>
                    </div>
                `;
                
                const squatter = gameAnimationContainer.querySelector('.squatter');
                const counter = gameAnimationContainer.querySelector('.squat-counter');
                const targetFill = gameAnimationContainer.querySelector('.squat-target-fill');
                let count = 0;
                
                squatter.addEventListener('click', () => {
                    squatter.classList.add('squatting');
                    count++;
                    counter.textContent = `${count} / 10`;
                    targetFill.style.width = `${count * 10}%`;
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 3; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            squatter.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 400);
                    }
                    
                    setTimeout(() => {
                        squatter.classList.remove('squatting');
                        if (count >= 10) {
                            count = 0;
                            counter.textContent = `${count} / 10`;
                            targetFill.style.width = '0%';
                        }
                    }, 2000);
                });
            }
            
            function createPlankAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="plank-scene">
                        <div class="planker">
                            <div class="planker-body"></div>
                            <div class="planker-head"></div>
                            <div class="planker-arm left"></div>
                            <div class="planker-arm right"></div>
                            <div class="planker-leg left"></div>
                            <div class="planker-leg right"></div>
                            <!-- Enhanced muscle strain effect -->
                            <div class="muscle-strain"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="plank-timer">00:00</div>
                        <div class="plank-progress">
                            <div class="plank-progress-fill"></div>
                        </div>
                    </div>
                `;
                
                const planker = gameAnimationContainer.querySelector('.planker');
                const timer = gameAnimationContainer.querySelector('.plank-timer');
                const progressFill = gameAnimationContainer.querySelector('.plank-progress-fill');
                let time = 0;
                let progress = 0;
                
                planker.addEventListener('click', () => {
                    planker.classList.add('planking');
                    
                    // Create additional sweat particles during animation
                    const sweatInterval = setInterval(() => {
                        const sweat = document.createElement('div');
                        sweat.className = 'sweat-particle';
                        sweat.style.top = `${Math.random() * 20 + 10}px`;
                        sweat.style.left = `${Math.random() * 20 + 40}%`;
                        planker.appendChild(sweat);
                        
                        setTimeout(() => sweat.remove(), 1500);
                    }, 1000);
                    
                    const interval = setInterval(() => {
                        time++;
                        const minutes = Math.floor(time / 60);
                        const seconds = time % 60;
                        timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        
                        progress = Math.min(100, (time / 180) * 100);
                        progressFill.style.width = `${progress}%`;
                        
                        if (time >= 180) {
                            clearInterval(interval);
                            clearInterval(sweatInterval);
                            planker.classList.remove('planking');
                            time = 0;
                            progress = 0;
                            timer.textContent = '00:00';
                            progressFill.style.width = '0%';
                        }
                    }, 1000);
                });
            }
            
            function createPushupAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="pushup-scene">
                        <div class="ground"></div>
                        <div class="pushupper">
                            <div class="pushupper-body"></div>
                            <div class="pushupper-head"></div>
                            <div class="pushupper-arm left"></div>
                            <div class="pushupper-arm right"></div>
                            <div class="pushupper-leg left"></div>
                            <div class="pushupper-leg right"></div>
                            <div class="pushup-effect"></div>
                            <!-- Enhanced strength lines effect -->
                            <div class="strength-lines">
                                <div class="strength-line"></div>
                                <div class="strength-line"></div>
                                <div class="strength-line"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                    </div>
                `;
                
                const pushupper = gameAnimationContainer.querySelector('.pushupper');
                
                pushupper.addEventListener('click', () => {
                    pushupper.classList.add('pushupping');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 10; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            pushupper.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 300);
                    }
                    
                    setTimeout(() => {
                        pushupper.classList.remove('pushupping');
                    }, 4000);
                });
            }
            
            function createLungeAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="lunge-scene">
                        <div class="lunger">
                            <div class="lunger-body"></div>
                            <div class="lunger-head"></div>
                            <div class="lunger-arm left"></div>
                            <div class="lunger-arm right"></div>
                            <div class="lunger-leg left"></div>
                            <div class="lunger-leg right"></div>
                            <!-- Enhanced motion trail effect -->
                            <div class="motion-trail">
                                <div class="motion-trail-line"></div>
                                <div class="motion-trail-line"></div>
                                <div class="motion-trail-line"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="footprint footprint1"></div>
                        <div class="footprint footprint2"></div>
                        <div class="footprint footprint3"></div>
                    </div>
                `;
                
                const lunger = gameAnimationContainer.querySelector('.lunger');
                
                lunger.addEventListener('click', () => {
                    lunger.classList.add('lunging');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 12; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            lunger.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 250);
                    }
                    
                    setTimeout(() => {
                        lunger.classList.remove('lunging');
                    }, 6000);
                });
            }
            
            function createBurpeeAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="burpee-scene">
                        <div class="burpeeer">
                            <div class="burpeeer-body"></div>
                            <div class="burpeeer-head"></div>
                            <div class="burpeeer-arm left"></div>
                            <div class="burpeeer-arm right"></div>
                            <div class="burpeeer-leg left"></div>
                            <div class="burpeeer-leg right"></div>
                            <div class="fire-effect"></div>
                            <!-- Enhanced explosion effect -->
                            <div class="explosion">
                                <div class="explosion-ring"></div>
                                <div class="explosion-ring"></div>
                                <div class="explosion-ring"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                    </div>
                `;
                
                const burpeeer = gameAnimationContainer.querySelector('.burpeeer');
                
                burpeeer.addEventListener('click', () => {
                    burpeeer.classList.add('burpeeing');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 15; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            burpeeer.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 200);
                    }
                    
                    setTimeout(() => {
                        burpeeer.classList.remove('burpeeing');
                    }, 6000);
                });
            }
            
            function createClimberAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="climber-scene">
                        <div class="mountain"></div>
                        <!-- Enhanced mountain peak effect -->
                        <div class="mountain-peak"></div>
                        <!-- Enhanced climbing rope effect -->
                        <div class="climbing-rope"></div>
                        <div class="climber">
                            <div class="climber-body"></div>
                            <div class="climber-head"></div>
                            <div class="climber-arm left"></div>
                            <div class="climber-arm right"></div>
                            <div class="climber-leg left"></div>
                            <div class="climber-leg right"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="climber-progress">
                            <div class="climber-progress-fill"></div>
                        </div>
                    </div>
                `;
                
                const climber = gameAnimationContainer.querySelector('.climber');
                const progressFill = gameAnimationContainer.querySelector('.climber-progress-fill');
                let progress = 0;
                
                climber.addEventListener('click', () => {
                    climber.classList.add('climbing');
                    
                    // Create additional sweat particles during animation
                    const sweatInterval = setInterval(() => {
                        const sweat = document.createElement('div');
                        sweat.className = 'sweat-particle';
                        sweat.style.top = `${Math.random() * 20 + 10}px`;
                        sweat.style.left = `${Math.random() * 20 + 40}%`;
                        climber.appendChild(sweat);
                        
                        setTimeout(() => sweat.remove(), 1500);
                    }, 500);
                    
                    const interval = setInterval(() => {
                        progress += 2;
                        progressFill.style.width = `${progress}%`;
                        
                        if (progress >= 100) {
                            clearInterval(interval);
                            clearInterval(sweatInterval);
                            climber.classList.remove('climbing');
                            progress = 0;
                            progressFill.style.width = '0%';
                        }
                    }, 100);
                });
            }
            
            function createCrunchAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="crunch-scene">
                        <div class="cruncher">
                            <div class="cruncher-body"></div>
                            <div class="cruncher-head"></div>
                            <div class="cruncher-arm left"></div>
                            <div class="cruncher-arm right"></div>
                            <div class="cruncher-leg left"></div>
                            <div class="cruncher-leg right"></div>
                            <!-- Enhanced cycling motion effect -->
                            <div class="cycling-motion">
                                <div class="cycling-line"></div>
                                <div class="cycling-line"></div>
                                <div class="cycling-line"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="wheel wheel1"></div>
                        <div class="wheel wheel2"></div>
                        <div class="wheel wheel3"></div>
                    </div>
                `;
                
                const cruncher = gameAnimationContainer.querySelector('.cruncher');
                
                cruncher.addEventListener('click', () => {
                    cruncher.classList.add('crunching');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 10; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            cruncher.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 300);
                    }
                    
                    setTimeout(() => {
                        cruncher.classList.remove('crunching');
                    }, 4000);
                });
            }
            
            function createHiitAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="hiit-scene">
                        <div class="hiiter">
                            <div class="hiiter-body"></div>
                            <div class="hiiter-head"></div>
                            <div class="hiiter-arm left"></div>
                            <div class="hiiter-arm right"></div>
                            <div class="hiiter-leg left"></div>
                            <div class="hiiter-leg right"></div>
                            <div class="fire-trail"></div>
                            <!-- Enhanced energy waves effect -->
                            <div class="energy-wave"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="hiit-timer">00:00</div>
                    </div>
                `;
                
                const hiiter = gameAnimationContainer.querySelector('.hiiter');
                const timer = gameAnimationContainer.querySelector('.hiit-timer');
                let time = 0;
                
                hiiter.addEventListener('click', () => {
                    hiiter.classList.add('hiiiting');
                    
                    // Create additional sweat particles during animation
                    const sweatInterval = setInterval(() => {
                        const sweat = document.createElement('div');
                        sweat.className = 'sweat-particle';
                        sweat.style.top = `${Math.random() * 20 + 10}px`;
                        sweat.style.left = `${Math.random() * 20 + 40}%`;
                        hiiter.appendChild(sweat);
                        
                        setTimeout(() => sweat.remove(), 1500);
                    }, 500);
                    
                    const interval = setInterval(() => {
                        time++;
                        const minutes = Math.floor(time / 60);
                        const seconds = time % 60;
                        timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        
                        if (time >= 90) {
                            clearInterval(interval);
                            clearInterval(sweatInterval);
                            hiiter.classList.remove('hiiiting');
                            time = 0;
                            timer.textContent = '00:00';
                        }
                    }, 1000);
                });
            }
            
            function createPullupAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="pullup-scene">
                        <div class="pullup-bar"></div>
                        <div class="pullupper">
                            <div class="pullupper-body"></div>
                            <div class="pullupper-head"></div>
                            <div class="pullupper-arm left"></div>
                            <div class="pullupper-arm right"></div>
                            <!-- Enhanced muscle tension effect -->
                            <div class="muscle-tension">
                                <div class="muscle-tension-line"></div>
                                <div class="muscle-tension-line"></div>
                                <div class="muscle-tension-line"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="strength-meter">
                            <div class="strength-meter-fill"></div>
                        </div>
                    </div>
                `;
                
                const pullupper = gameAnimationContainer.querySelector('.pullupper');
                const strengthFill = gameAnimationContainer.querySelector('.strength-meter-fill');
                let strength = 0;
                
                pullupper.addEventListener('click', () => {
                    pullupper.classList.add('pullupping');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 8; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            pullupper.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 250);
                    }
                    
                    const interval = setInterval(() => {
                        strength += 5;
                        strengthFill.style.width = `${strength}%`;
                        
                        if (strength >= 100) {
                            clearInterval(interval);
                            pullupper.classList.remove('pullupping');
                            strength = 0;
                            strengthFill.style.width = '0%';
                        }
                    }, 100);
                });
            }
            
            function createPistolAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="pistol-scene">
                        <div class="pistoler">
                            <div class="pistoler-body"></div>
                            <div class="pistoler-head"></div>
                            <div class="pistoler-arm left"></div>
                            <div class="pistoler-arm right"></div>
                            <div class="pistoler-leg left"></div>
                            <div class="pistoler-leg right"></div>
                            <!-- Enhanced balance indicator effect -->
                            <div class="balance-indicator">
                                <div class="balance-circle"></div>
                                <div class="balance-circle"></div>
                                <div class="balance-circle"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="balance-meter">
                            <div class="balance-meter-fill"></div>
                        </div>
                    </div>
                `;
                
                const pistoler = gameAnimationContainer.querySelector('.pistoler');
                
                pistoler.addEventListener('click', () => {
                    pistoler.classList.add('pistoling');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 12; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            pistoler.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 250);
                    }
                    
                    setTimeout(() => {
                        pistoler.classList.remove('pistoling');
                    }, 6000);
                });
            }
            
            function createHandstandAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="handstand-scene">
                        <div class="handstander">
                            <div class="handstander-body"></div>
                            <div class="handstander-head"></div>
                            <div class="handstander-arm left"></div>
                            <div class="handstander-arm right"></div>
                            <div class="handstander-leg left"></div>
                            <div class="handstander-leg right"></div>
                            <!-- Enhanced focus effect -->
                            <div class="focus-effect"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="handstand-timer">00:00</div>
                        <div class="handstand-progress">
                            <div class="handstand-progress-fill"></div>
                        </div>
                    </div>
                `;
                
                const handstander = gameAnimationContainer.querySelector('.handstander');
                const timer = gameAnimationContainer.querySelector('.handstand-timer');
                const progressFill = gameAnimationContainer.querySelector('.handstand-progress-fill');
                let time = 0;
                let progress = 0;
                
                handstander.addEventListener('click', () => {
                    handstander.classList.add('handstanding');
                    
                    // Create additional sweat particles during animation
                    const sweatInterval = setInterval(() => {
                        const sweat = document.createElement('div');
                        sweat.className = 'sweat-particle';
                        sweat.style.top = `${Math.random() * 20 + 10}px`;
                        sweat.style.left = `${Math.random() * 20 + 40}%`;
                        handstander.appendChild(sweat);
                        
                        setTimeout(() => sweat.remove(), 1500);
                    }, 1000);
                    
                    const interval = setInterval(() => {
                        time++;
                        const minutes = Math.floor(time / 60);
                        const seconds = time % 60;
                        timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        
                        progress = Math.min(100, (time / 120) * 100);
                        progressFill.style.width = `${progress}%`;
                        
                        if (time >= 120) {
                            clearInterval(interval);
                            clearInterval(sweatInterval);
                            handstander.classList.remove('handstanding');
                            time = 0;
                            progress = 0;
                            timer.textContent = '00:00';
                            progressFill.style.width = '0%';
                        }
                    }, 1000);
                });
            }
            
            function createMuscleupAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="muscleup-scene">
                        <div class="muscleup-bar"></div>
                        <div class="muscleupper">
                            <div class="muscleupper-body"></div>
                            <div class="muscleupper-head"></div>
                            <div class="muscleupper-arm left"></div>
                            <div class="muscleupper-arm right"></div>
                            <div class="dragon-effect"></div>
                            <!-- Enhanced power surge effect -->
                            <div class="power-surge">
                                <div class="power-surge-ring"></div>
                                <div class="power-surge-ring"></div>
                                <div class="power-surge-ring"></div>
                            </div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                        <div class="strength-meter">
                            <div class="strength-meter-fill"></div>
                        </div>
                    </div>
                `;
                
                const muscleupper = gameAnimationContainer.querySelector('.muscleupper');
                const strengthFill = gameAnimationContainer.querySelector('.strength-meter-fill');
                let strength = 0;
                
                muscleupper.addEventListener('click', () => {
                    muscleupper.classList.add('muscleupping');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 10; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            muscleupper.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 300);
                    }
                    
                    const interval = setInterval(() => {
                        strength += 3.33;
                        strengthFill.style.width = `${strength}%`;
                        
                        if (strength >= 100) {
                            clearInterval(interval);
                            muscleupper.classList.remove('muscleupping');
                            strength = 0;
                            strengthFill.style.width = '0%';
                        }
                    }, 100);
                });
            }
            
            function createDefaultAnimation() {
                gameAnimationContainer.innerHTML = `
                    <div class="default-scene">
                        <div class="default-exerciser">
                            <div class="default-body"></div>
                            <div class="default-head"></div>
                            <div class="default-arm left"></div>
                            <div class="default-arm right"></div>
                            <div class="default-leg left"></div>
                            <div class="default-leg right"></div>
                            <!-- Enhanced sweat particles -->
                            <div class="sweat-particle" style="top: 10px; left: 50%;"></div>
                            <div class="sweat-particle" style="top: 15px; left: 45%;"></div>
                            <div class="sweat-particle" style="top: 20px; left: 55%;"></div>
                        </div>
                    </div>
                `;
                
                const exerciser = gameAnimationContainer.querySelector('.default-exerciser');
                
                exerciser.addEventListener('click', () => {
                    exerciser.classList.add('exercising');
                    
                    // Create additional sweat particles during animation
                    for (let i = 0; i < 8; i++) {
                        setTimeout(() => {
                            const sweat = document.createElement('div');
                            sweat.className = 'sweat-particle';
                            sweat.style.top = `${Math.random() * 20 + 10}px`;
                            sweat.style.left = `${Math.random() * 20 + 40}%`;
                            exerciser.appendChild(sweat);
                            
                            setTimeout(() => sweat.remove(), 1500);
                        }, i * 300);
                    }
                    
                    setTimeout(() => {
                        exerciser.classList.remove('exercising');
                    }, 3000);
                });
            }
            
            function startTimer() {
                updateTimerDisplay();
                timerProgressFill.style.width = '100%';
                const progressSteps = progressTracker.querySelectorAll('.progress-step');
                if (progressSteps[0]) progressSteps[0].classList.add('completed');
                
                gameState.timer = setInterval(() => {
                    gameState.timeRemaining--;
                    updateTimerDisplay();
                    const progressPercent = (gameState.timeRemaining / gameState.totalTime) * 100;
                    timerProgressFill.style.width = `${progressPercent}%`;
                    if (progressPercent <= 50 && progressSteps[1] && !progressSteps[1].classList.contains('completed')) {
                        progressSteps[1].classList.add('completed');
                        createParticles();
                    }
                    if (gameState.timeRemaining <= 0) {
                        clearInterval(gameState.timer);
                        showCompletionModal(true);
                    }
                }, 1000);
            }
            
            function updateTimerDisplay() {
                if (gameState.timeRemaining < 0) return;
                const minutes = Math.floor(gameState.timeRemaining / 60);
                const seconds = gameState.timeRemaining % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            function showCompletionModal(timeUp = false) {
                completionTitle.textContent = timeUp ? "Time's Up!" : "Challenge Completed?";
                completionMessage.textContent = timeUp ? "Did you manage to complete the challenge?" : "Confirm that you have completed this challenge.";
                completionModal.classList.add('active');
            }
            
            function closeCompletionModal() { completionModal.classList.remove('active'); }
            function closeChallengeModal() { clearInterval(gameState.timer); challengeModal.classList.remove('active'); motivationContainer.classList.remove('active'); }
            
            function processChallengeCompletion() {
                const challenge = gameState.currentChallenge;
                if (!challenge) return;
                const progressSteps = progressTracker.querySelectorAll('.progress-step');
                if (progressSteps[2]) progressSteps[2].classList.add('completed');
                if (!gameState.completedChallenges.includes(challenge.id)) { gameState.completedChallenges.push(challenge.id); }
                
                let finalXp = challenge.points;
                const xpBoostEffect = gameState.activeEffects.find(e => e.id === 'xp_boost');
                if (xpBoostEffect && xpBoostEffect.duration > 0) {
                    finalXp *= 2;
                    xpBoostEffect.duration--;
                    if (xpBoostEffect.duration <= 0) { gameState.activeEffects = gameState.activeEffects.filter(e => e.id !== 'xp_boost'); }
                    showNotification('XP Boost Used!', `You earned double XP!`);
                }
                
                Object.values(gameState.character.equippedItems).filter(id => id).forEach(itemId => {
                    const itemData = lootItems.find(item => item.id === itemId);
                    const rewardItem = gameState.rewards.equipment.find(r => r.id === itemId);
                    if (itemData && rewardItem) {
                        let boostMultiplier = 1;
                        if (itemData.effect === 'all_boost') boostMultiplier = 1.05;
                        if (challenge.difficulty === 'easy' && itemData.effect === 'strength_boost') boostMultiplier = 1.10;
                        if (challenge.difficulty === 'medium' && itemData.effect === 'endurance_boost') boostMultiplier = 1.10;
                        if (challenge.difficulty === 'hard' && itemData.effect === 'agility_boost') boostMultiplier = 1.15;
                        finalXp = Math.floor(finalXp * boostMultiplier);
                        rewardItem.durability--;
                        if (rewardItem.durability <= 0) { handleItemBreakage(rewardItem); }
                    }
                });
                gameState.points += finalXp;
                gameState.character.xp += finalXp;
                gameState.stats.totalChallenges++;
                gameState.stats.totalTime += challenge.time;
                
                if (challenge.difficulty === 'easy') gameState.character.skillLevels.strength = Math.min(100, gameState.character.skillLevels.strength + 5);
                else if (challenge.difficulty === 'medium') gameState.character.skillLevels.endurance = Math.min(100, gameState.character.skillLevels.endurance + 5);
                else if (challenge.difficulty === 'hard') gameState.character.skillLevels.agility = Math.min(100, gameState.character.skillLevels.agility + 5);
                
                updateStreak(); 
                checkCharacterLevelUp(); 
                checkPlayerLevelUp();
                unlockNextChallenges(challenge); 
                unlockMapLocations();
                updateQuests();
                updateAllUI(); 
                saveGameState();
                closeCompletionModal(); 
                closeChallengeModal();
                showNotification('Challenge Completed!', `You earned ${finalXp} XP!`);
                setTimeout(showLootBox, 1000); 
                createParticles();
            }
            
            function handleItemBreakage(brokenItem) {
                const itemData = lootItems.find(item => item.id === brokenItem.id);
                if (!itemData) return;
                showNotification('Item Broken!', `${itemData.name} has broken and been removed.`);
                if (brokenItem.equipped) {
                    if (itemData.id.includes('helmet')) gameState.character.equippedItems.helmet = null;
                    else if (itemData.id.includes('armor')) gameState.character.equippedItems.armor = null;
                    else if (itemData.id.includes('acc')) gameState.character.equippedItems.accessory = null;
                    removeRewardEffect(itemData);
                }
                const itemIndex = gameState.rewards.equipment.findIndex(i => i.id === brokenItem.id);
                if (itemIndex > -1) { gameState.rewards.equipment.splice(itemIndex, 1); }
            }
            
            function updateStreak() {
                const today = new Date().toDateString();
                const lastCompleted = gameState.stats.lastCompleted;
                if (lastCompleted) {
                    const diffDays = (new Date(today) - new Date(lastCompleted)) / (1000 * 60 * 60 * 24);
                    if (diffDays === 1) { gameState.stats.streakCount++; } 
                    else if (diffDays > 1) {
                        const streakSaverEffect = gameState.activeEffects.find(e => e.id === 'streak_save');
                        if (streakSaverEffect) {
                            showNotification('Streak Saved!', 'Your Guardian Charm protected your streak!');
                            gameState.activeEffects = gameState.activeEffects.filter(e => e.id !== 'streak_save');
                        } else {
                            gameState.stats.streakCount = 1;
                        }
                    }
                } else { gameState.stats.streakCount = 1; }
                gameState.stats.lastCompleted = today;
            }
            
            function checkCharacterLevelUp() {
                 while (gameState.character.xp >= gameState.character.nextXp) {
                    gameState.character.xp -= gameState.character.nextXp;
                    gameState.character.level++;
                    gameState.character.nextXp = Math.floor(gameState.character.level * 100 * 1.1);
                    showNotification('Level Up!', `Your hero reached level ${gameState.character.level}!`);
                    if (gameState.character.level === 2 && !gameState.character.skills.strength) { gameState.character.skills.strength = true; showNotification('Skill Unlocked!', 'You have unlocked Strength!'); } 
                    else if (gameState.character.level === 5 && !gameState.character.skills.endurance) { gameState.character.skills.endurance = true; showNotification('Skill Unlocked!', 'You have unlocked Endurance!'); } 
                    else if (gameState.character.level === 8 && !gameState.character.skills.agility) { gameState.character.skills.agility = true; showNotification('Skill Unlocked!', 'You have unlocked Agility!'); }
                }
            }
            
            function checkPlayerLevelUp() {
                 while (gameState.points >= gameState.nextLevelPoints) {
                    gameState.points -= gameState.nextLevelPoints;
                    gameState.level++;
                    gameState.nextLevelPoints = Math.floor(gameState.level * 100 * 1.2);
                    showNotification(`Level Up!`, `You reached level ${gameState.level}!`);
                }
            }
            
            function unlockNextChallenges(completedChallenge) {
                const categoryChallenges = challenges[completedChallenge.difficulty];
                const completedIndex = categoryChallenges.findIndex(c => c.id === completedChallenge.id);
                if (completedIndex > -1 && completedIndex < categoryChallenges.length - 1) {
                    const nextChallenge = categoryChallenges[completedIndex + 1];
                    if (!gameState.unlockedChallenges.includes(nextChallenge.id)) {
                        gameState.unlockedChallenges.push(nextChallenge.id);
                        showNotification('New Challenge Unlocked!', `"${nextChallenge.title}" is available!`);
                    }
                }
                
                const easyCompletedCount = gameState.completedChallenges.filter(id => id < 50).length;
                if (easyCompletedCount >= 5 && !gameState.unlockedChallenges.includes(50)) {
                    gameState.unlockedChallenges.push(50);
                    showNotification('New Tier Unlocked!', 'Medium challenges are now available!');
                }
                
                const mediumCompletedCount = gameState.completedChallenges.filter(id => id >= 50 && id < 100).length;
                if (mediumCompletedCount >= 5 && !gameState.unlockedChallenges.includes(100)) {
                    gameState.unlockedChallenges.push(100);
                    showNotification('New Tier Unlocked!', 'Hard challenges are now available!');
                }
            }
            
            function unlockMapLocations() {
                 mapLocations.forEach(location => {
                    if (!gameState.mapProgress.unlockedLocations.includes(location.id) && gameState.stats.totalChallenges >= location.requiredChallenges) {
                        gameState.mapProgress.unlockedLocations.push(location.id);
                        showNotification('New Location Unlocked!', `You can now travel to ${location.name}!`);
                    }
                });
            }
            
            function updateQuests() {
                // Update quest progress based on completed challenges
                const easyCompletedCount = gameState.completedChallenges.filter(id => id < 50).length;
                const mediumCompletedCount = gameState.completedChallenges.filter(id => id >= 50 && id < 100).length;
                const hardCompletedCount = gameState.completedChallenges.filter(id => id >= 100).length;
                
                // Update quest 1: Complete 3 easy challenges
                if (!gameState.quests[0].completed) {
                    gameState.quests[0].progress = Math.min(easyCompletedCount, gameState.quests[0].target);
                    if (gameState.quests[0].progress >= gameState.quests[0].target) {
                        gameState.quests[0].completed = true;
                        showNotification('Quest Completed!', `You've completed: ${gameState.quests[0].title}`);
                        // Unlock medium challenges if not already unlocked
                        if (!gameState.unlockedChallenges.includes(50)) {
                            gameState.unlockedChallenges.push(50);
                            showNotification('New Tier Unlocked!', 'Medium challenges are now available!');
                        }
                    }
                }
                
                // Update quest 2: Complete 5 strength challenges
                if (!gameState.quests[1].completed) {
                    gameState.quests[1].progress = Math.min(gameState.character.skillLevels.strength / 20, gameState.quests[1].target);
                    if (gameState.quests[1].progress >= gameState.quests[1].target) {
                        gameState.quests[1].completed = true;
                        showNotification('Quest Completed!', `You've completed: ${gameState.quests[1].title}`);
                        // Boost strength skill
                        gameState.character.skillLevels.strength = Math.min(100, gameState.character.skillLevels.strength + 10);
                    }
                }
                
                // Update quest 3: Complete 5 endurance challenges
                if (!gameState.quests[2].completed) {
                    gameState.quests[2].progress = Math.min(gameState.character.skillLevels.endurance / 20, gameState.quests[2].target);
                    if (gameState.quests[2].progress >= gameState.quests[2].target) {
                        gameState.quests[2].completed = true;
                        showNotification('Quest Completed!', `You've completed: ${gameState.quests[2].title}`);
                        // Boost endurance skill
                        gameState.character.skillLevels.endurance = Math.min(100, gameState.character.skillLevels.endurance + 10);
                    }
                }
                
                // Update quest 4: Complete 5 agility challenges
                if (!gameState.quests[3].completed) {
                    gameState.quests[3].progress = Math.min(gameState.character.skillLevels.agility / 20, gameState.quests[3].target);
                    if (gameState.quests[3].progress >= gameState.quests[3].target) {
                        gameState.quests[3].completed = true;
                        showNotification('Quest Completed!', `You've completed: ${gameState.quests[3].title}`);
                        // Boost agility skill
                        gameState.character.skillLevels.agility = Math.min(100, gameState.character.skillLevels.agility + 10);
                    }
                }
                
                // Update quest 5: Complete 5 hard challenges
                if (!gameState.quests[4].completed) {
                    gameState.quests[4].progress = Math.min(hardCompletedCount, gameState.quests[4].target);
                    if (gameState.quests[4].progress >= gameState.quests[4].target) {
                        gameState.quests[4].completed = true;
                        showNotification('Quest Completed!', `You've completed: ${gameState.quests[4].title}`);
                        // Unlock wisdom skill if not already unlocked
                        if (!gameState.character.skills.wisdom) {
                            gameState.character.skills.wisdom = true;
                            showNotification('Skill Unlocked!', 'You have unlocked Wisdom!');
                        }
                    }
                }
                
                renderQuests();
            }
            
            function renderQuests() {
                questList.innerHTML = '';
                gameState.quests.forEach(quest => {
                    const questEl = document.createElement('div');
                    questEl.className = `quest-item ${quest.completed ? 'completed' : 'active'}`;
                    questEl.innerHTML = `
                        <div class="quest-title">${quest.title}</div>
                        <div class="quest-description">${quest.description}</div>
                        <div class="quest-progress">
                            <div class="quest-progress-fill" style="width: ${(quest.progress / quest.target) * 100}%"></div>
                        </div>
                        <div class="quest-reward">
                            <i class="fas fa-gift"></i>
                            <span>${quest.reward}</span>
                        </div>`;
                    questList.appendChild(questEl);
                });
            }
            
            function updateAllUI() {
                updateProgressBar(); 
                updateCharacter(); 
                updateStats(); 
                renderMap(); 
                renderChallenges(); 
                updateActiveEffects();
                updateRewards(document.querySelector('.rewards-tab.active').dataset.tab);
                renderQuests();
            }
            
            function showLootBox() {
                lootModal.classList.add('active');
                gameState.lootBoxSelected = false;
                lootBoxes.querySelectorAll('.loot-box').forEach(box => {
                    box.classList.remove('opened', 'opening', 'empty', 'disabled', 'spinning');
                    box.style.animation = '';
                    box.style.boxShadow = '';
                    box.querySelector('.loot-box-icon').className = 'fas fa-gift loot-box-icon';
                });
                lootItem.classList.remove('show');
                gameState.currentLootItem = lootItems[Math.floor(Math.random() * lootItems.length)];
                gameState.correctBox = Math.floor(Math.random() * 3) + 1;
            }
            
            function openLootBox(boxElement) {
                if (gameState.lootBoxSelected) return;
                const boxNumber = parseInt(boxElement.dataset.box);
                boxElement.classList.add('opening');
                setTimeout(() => {
                    boxElement.classList.remove('opening');
                    boxElement.classList.add('opened');
                    gameState.lootBoxSelected = true;
                    if (boxNumber === gameState.correctBox) {
                        const itemData = gameState.currentLootItem;
                        const reward = { id: itemData.id, equipped: false };
                        if (itemData.type === 'consumable') {
                            reward.count = 1;
                            const existing = gameState.rewards.consumables.find(r => r.id === itemData.id);
                            if (existing) existing.count++; else gameState.rewards.consumables.push(reward);
                        } else if (itemData.type === 'equipment') {
                            reward.durability = itemData.durability;
                            gameState.rewards.equipment.push(reward);
                        }
                        gameState.stats.lootCount++;
                        lootItemIcon.className = `fas ${itemData.icon} loot-item-icon`;
                        lootItemName.textContent = itemData.name;
                        lootItemDescription.textContent = itemData.description;
                        lootItem.classList.add('show');
                        showNotification('Reward Received!', `You got ${itemData.name}!`);
                        updateAllUI(); saveGameState();
                        setTimeout(() => lootModal.classList.remove('active'), 3000);
                    } else {
                        boxElement.classList.add('empty');
                        const correctBoxElement = lootBoxes.querySelector(`.loot-box[data-box="${gameState.correctBox}"]`);
                        correctBoxElement.querySelector('.loot-box-icon').className = 'fas fa-star loot-box-icon';
                        correctBoxElement.classList.add('spinning', 'opened');
                        lootBoxes.querySelectorAll('.loot-box').forEach(box => box.classList.add('disabled'));
                        
                        setTimeout(() => {
                            const itemData = gameState.currentLootItem;
                            lootItemIcon.className = `fas ${itemData.icon} loot-item-icon`;
                            lootItemName.textContent = itemData.name;
                            lootItemDescription.textContent = `You missed: ${itemData.description}`;
                            lootItem.classList.add('show');
                            showNotification('Wrong Box!', `The reward was in box ${gameState.correctBox}!`);
                        }, 500);
                        setTimeout(() => lootModal.classList.remove('active'), 3000);
                    }
                }, 500);
            }
            
            function updateProgressBar() {
                currentLevelEl.textContent = gameState.level;
                currentPointsEl.textContent = gameState.points;
                nextLevelPointsEl.textContent = gameState.nextLevelPoints;
                progressFill.style.width = `${(gameState.points / gameState.nextLevelPoints) * 100}%`;
            }
            
            function updateStats() {
                totalChallengesEl.textContent = gameState.stats.totalChallenges;
                streakCountEl.textContent = gameState.stats.streakCount;
                totalTimeEl.textContent = gameState.stats.totalTime;
                lootCountEl.textContent = gameState.stats.lootCount;
            }
            
            function showNotification(title, message) {
                notificationTitle.textContent = title;
                notificationMessage.textContent = message;
                notification.classList.add('show');
                setTimeout(() => { notification.classList.remove('show'); }, 3000);
            }
            
            function createParticles() {
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.width = `${Math.random() * 10 + 5}px`;
                    particle.style.height = particle.style.width;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    particle.style.background = `rgba(0, 255, 255, ${Math.random() * 0.5 + 0.2})`;
                    particle.style.animationDuration = `${Math.random() * 1 + 0.5}s`;
                    particle.style.animation = 'particle-float 1s ease-out forwards';
                    particlesContainer.appendChild(particle);
                    setTimeout(() => particle.remove(), 1000);
                }
            }
            
            init();
            lootBoxes.querySelectorAll('.loot-box').forEach(box => {
                box.addEventListener('click', () => openLootBox(box));
            });
        });
    </script>
</body>
</html>